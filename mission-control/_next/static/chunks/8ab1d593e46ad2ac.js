(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31713,e=>{"use strict";let t;var r,a,n,l,s,i,o,d,c,u,g,h,x,m,f,p,b,v,y,k=e.i(43476),w=e.i(71645);async function j(e,t){let r=`https://heather-duplicate-having-domestic.trycloudflare.com${e}${e.includes("?")?"":"/"}`,a=await fetch(r,{...t,headers:{"Content-Type":"application/json",...t?.headers}});if(!a.ok)throw Error(`API error: ${a.status}`);return a.json()}e.i(47167);let N=(e,t)=>j("/api/tasks",{method:"PUT",body:JSON.stringify({id:e,...t})}),C=(e,t)=>j("/api/projects",{method:"PUT",body:JSON.stringify({id:e,...t})});function S(e){let t=Math.floor((Date.now()-new Date(e).getTime())/1e3);if(t<60)return"just now";let r=Math.floor(t/60);if(r<60)return`${r}m ago`;let a=Math.floor(r/60);if(a<24)return`${a}h ago`;let n=Math.floor(a/24);return`${n}d ago`}let E=[{id:"tasks",label:"Tasks",icon:(0,k.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})},{id:"projects",label:"Projects",icon:(0,k.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12.75V12A2.25 2.25 0 014.5 9.75h15A2.25 2.25 0 0121.75 12v.75m-8.69-6.44l-2.12-2.12a1.5 1.5 0 00-1.061-.44H4.5A2.25 2.25 0 002.25 6v12a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9a2.25 2.25 0 00-2.25-2.25h-5.379a1.5 1.5 0 01-1.06-.44z"})})},{id:"automations",label:"Automations",icon:(0,k.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75z"})})},{id:"team",label:"Team",icon:(0,k.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-3.07M12 6.375a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zm8.25 2.25a2.625 2.625 0 11-5.25 0 2.625 2.625 0 015.25 0z"})})}];function M({activeTab:e,onTabChange:t}){let[r,a]=(0,w.useState)(!1);return(0,k.jsxs)("aside",{className:`hidden md:flex flex-col ${r?"w-16":"w-56"} bg-white/80 dark:bg-gray-900/40 backdrop-blur-xl border-r border-gray-200 dark:border-gray-800/50 transition-all duration-300 ease-in-out flex-shrink-0`,children:[(0,k.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-800/50",children:[!r&&(0,k.jsxs)("div",{className:"flex items-center gap-2",children:[(0,k.jsx)("span",{className:"text-lg",children:"⚡"}),(0,k.jsx)("span",{className:"font-semibold text-sm text-gray-900 dark:text-gray-100",children:"Mission Control"})]}),(0,k.jsx)("button",{onClick:()=>a(!r),className:"p-1.5 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800/60 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 transition-colors min-w-[36px] min-h-[36px] flex items-center justify-center",children:(0,k.jsx)("svg",{className:`w-4 h-4 transition-transform duration-300 ${r?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})})})]}),(0,k.jsx)("nav",{className:"flex-1 p-3 space-y-1",children:E.map(a=>(0,k.jsxs)("a",{href:`#${a.id}`,onClick:e=>{e.preventDefault(),t(a.id)},className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200 min-h-[44px] ${e===a.id?"bg-amber-500/10 text-amber-500 dark:text-amber-400 border border-amber-500/20":"text-gray-500 dark:text-gray-300 hover:text-gray-700 dark:hover:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-800/40"}`,title:r?a.label:void 0,children:[a.icon,!r&&(0,k.jsx)("span",{children:a.label})]},a.id))}),!r&&(0,k.jsx)("div",{className:"p-4 border-t border-gray-200 dark:border-gray-800/50",children:(0,k.jsxs)("div",{className:"flex items-center gap-2",children:[(0,k.jsx)("div",{className:"w-7 h-7 rounded-full bg-gradient-to-br from-amber-400 to-orange-500 flex items-center justify-center text-xs font-bold text-gray-950",children:"E"}),(0,k.jsxs)("div",{className:"text-xs",children:[(0,k.jsx)("div",{className:"text-gray-700 dark:text-gray-300 font-medium",children:"Ephraim"}),(0,k.jsx)("div",{className:"text-gray-400 dark:text-gray-500",children:"Owner"})]})]})})]})}var D=e.i(50208);function T({onMenuToggle:e}){let{mode:t,cycle:r}=(0,D.useTheme)(),a="dark"===t?(0,k.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z"})}):"light"===t?(0,k.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z"})}):(0,k.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 17.25v1.007a3 3 0 01-.879 2.122L7.5 21h9l-.621-.621A3 3 0 0115 18.257V17.25m6-12V15a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 15V5.25A2.25 2.25 0 015.25 3h13.5A2.25 2.25 0 0121 5.25z"})}),n="dark"===t?"Dark":"light"===t?"Light":"System";return(0,k.jsxs)("header",{className:"flex items-center justify-between px-4 py-3 bg-white/80 dark:bg-gray-900/60 backdrop-blur-xl border-b border-gray-200 dark:border-gray-800/50",children:[(0,k.jsx)("button",{onClick:e,className:"md:hidden p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800/60 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 transition-colors min-w-[44px] min-h-[44px] flex items-center justify-center",children:(0,k.jsx)("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})})}),(0,k.jsxs)("div",{className:"flex items-center gap-2 md:hidden",children:[(0,k.jsx)("span",{className:"text-lg",children:"⚡"}),(0,k.jsx)("span",{className:"font-semibold text-sm text-gray-900 dark:text-gray-100",children:"Mission Control"})]}),(0,k.jsx)("div",{className:"hidden md:block"}),(0,k.jsxs)("button",{onClick:r,className:"flex items-center gap-2 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800/60 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 transition-colors min-w-[44px] min-h-[44px] justify-center",title:`Theme: ${n}`,children:[a,(0,k.jsx)("span",{className:"text-xs font-medium hidden sm:inline",children:n})]})]})}function L({tasks:e}){let t=e.filter(e=>"archived"!==e.column&&"suggested"!==e.column),r=e.filter(e=>"suggested"===e.column).length,a=t.filter(e=>"in-progress"===e.column).length,n=t.filter(e=>"done"===e.column).length,l=t.length,s=e.filter(e=>"archived"===e.column).length,i=l>0?Math.round(n/l*100):0,o=[...r>0?[{label:"Suggested",value:r.toString(),color:"text-purple-400"}]:[],{label:"Approved",value:l.toString(),color:"text-gray-900 dark:text-gray-100"},{label:"In progress",value:a.toString(),color:"text-blue-500 dark:text-blue-400"},{label:"Completion",value:`${i}%`,color:"text-emerald-500 dark:text-emerald-400"},...s>0?[{label:"Archived",value:s.toString(),color:"text-red-500 dark:text-red-400"}]:[]];return(0,k.jsx)("div",{className:"flex gap-3 overflow-x-auto pb-1 lg:grid lg:overflow-x-visible scrollbar-hide",style:{gridTemplateColumns:`repeat(${o.length}, minmax(0, 1fr))`},children:o.map(e=>(0,k.jsxs)("div",{className:"flex-shrink-0 min-w-[120px] lg:min-w-0 bg-white dark:bg-gray-900/40 backdrop-blur-sm border border-gray-200 dark:border-gray-800/50 rounded-xl px-4 py-3",children:[(0,k.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:e.label}),(0,k.jsx)("div",{className:`text-xl font-bold ${e.color}`,children:e.value})]},e.label))})}function R({selectedAgent:e,selectedProject:t,onAgentChange:r,onProjectChange:a,onNewTask:n,projects:l,tasks:s}){let i=[...new Set(s.map(e=>e.agent).filter(Boolean))];return(0,k.jsxs)("div",{className:"flex flex-col gap-3 lg:flex-row lg:flex-wrap lg:items-center",children:[(0,k.jsxs)("button",{onClick:n,className:"w-full lg:w-auto flex items-center justify-center gap-1.5 px-4 py-2 bg-amber-500 hover:bg-amber-400 text-gray-950 font-semibold text-sm rounded-lg transition-colors min-h-[44px]",children:[(0,k.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),"New task"]}),(0,k.jsxs)("div",{className:"flex items-center gap-2 overflow-x-auto scrollbar-hide",children:[i.map(t=>(0,k.jsxs)("button",{onClick:()=>r(e===t?null:t),className:`flex-shrink-0 flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-medium transition-all min-h-[36px] ${e===t?"bg-amber-500/20 text-amber-500 dark:text-amber-400 border border-amber-500/30":"bg-gray-100 dark:bg-gray-800/60 text-gray-500 dark:text-gray-400 border border-gray-300 dark:border-gray-700/50 hover:border-gray-400 dark:hover:border-gray-600/50 hover:text-gray-700 dark:hover:text-gray-300"}`,children:[(0,k.jsx)("span",{className:"w-2 h-2 rounded-full bg-amber-400"}),t]},t)),(0,k.jsxs)("select",{value:t||"",onChange:e=>a(e.target.value||null),className:"flex-shrink-0 bg-gray-100 dark:bg-gray-800/60 border border-gray-300 dark:border-gray-700/50 text-gray-700 dark:text-gray-300 text-xs rounded-lg px-3 py-2 min-h-[36px] focus:outline-none focus:border-amber-500/50 transition-colors",children:[(0,k.jsx)("option",{value:"",children:"All projects"}),l.map(e=>(0,k.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]})}var A=e.i(74080);let O="u">typeof window&&void 0!==window.document&&void 0!==window.document.createElement;function P(e){let t=Object.prototype.toString.call(e);return"[object Window]"===t||"[object global]"===t}function I(e){return"nodeType"in e}function B(e){var t,r;return e?P(e)?e:I(e)&&null!=(t=null==(r=e.ownerDocument)?void 0:r.defaultView)?t:window:window}function $(e){let{Document:t}=B(e);return e instanceof t}function W(e){return!P(e)&&e instanceof B(e).HTMLElement}function z(e){return e instanceof B(e).SVGElement}function F(e){return e?P(e)?e.document:I(e)?$(e)?e:W(e)||z(e)?e.ownerDocument:document:document:document}let H=O?w.useLayoutEffect:w.useEffect;function U(e){let t=(0,w.useRef)(e);return H(()=>{t.current=e}),(0,w.useCallback)(function(){for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];return null==t.current?void 0:t.current(...r)},[])}function Y(e,t){void 0===t&&(t=[e]);let r=(0,w.useRef)(e);return H(()=>{r.current!==e&&(r.current=e)},t),r}function X(e,t){let r=(0,w.useRef)();return(0,w.useMemo)(()=>{let t=e(r.current);return r.current=t,t},[...t])}function K(e){let t=U(e),r=(0,w.useRef)(null),a=(0,w.useCallback)(e=>{e!==r.current&&(null==t||t(e,r.current)),r.current=e},[]);return[r,a]}function V(e){let t=(0,w.useRef)();return(0,w.useEffect)(()=>{t.current=e},[e]),t.current}let J={};function _(e,t){return(0,w.useMemo)(()=>{if(t)return t;let r=null==J[e]?0:J[e]+1;return J[e]=r,e+"-"+r},[e,t])}function q(e){return function(t){for(var r=arguments.length,a=Array(r>1?r-1:0),n=1;n<r;n++)a[n-1]=arguments[n];return a.reduce((t,r)=>{for(let[a,n]of Object.entries(r)){let r=t[a];null!=r&&(t[a]=r+e*n)}return t},{...t})}}let G=q(1),Q=q(-1);function Z(e){if(!e)return!1;let{KeyboardEvent:t}=B(e.target);return t&&e instanceof t}function ee(e){if(function(e){if(!e)return!1;let{TouchEvent:t}=B(e.target);return t&&e instanceof t}(e)){if(e.touches&&e.touches.length){let{clientX:t,clientY:r}=e.touches[0];return{x:t,y:r}}else if(e.changedTouches&&e.changedTouches.length){let{clientX:t,clientY:r}=e.changedTouches[0];return{x:t,y:r}}}return"clientX"in e&&"clientY"in e?{x:e.clientX,y:e.clientY}:null}let et=Object.freeze({Translate:{toString(e){if(!e)return;let{x:t,y:r}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;let{scaleX:t,scaleY:r}=e;return"scaleX("+t+") scaleY("+r+")"}},Transform:{toString(e){if(e)return[et.Translate.toString(e),et.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:r,easing:a}=e;return t+" "+r+"ms "+a}}}),er="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]",ea={display:"none"};function en(e){let{id:t,value:r}=e;return w.default.createElement("div",{id:t,style:ea},r)}function el(e){let{id:t,announcement:r,ariaLiveType:a="assertive"}=e;return w.default.createElement("div",{id:t,style:{position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"},role:"status","aria-live":a,"aria-atomic":!0},r)}let es=(0,w.createContext)(null),ei={draggable:"\n    To pick up a draggable item, press the space bar.\n    While dragging, use the arrow keys to move the item.\n    Press space again to drop the item in its new position, or press escape to cancel.\n  "},eo={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was moved over droppable area "+r.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was dropped over droppable area "+r.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function ed(e){var t;let r,{announcements:a=eo,container:n,hiddenTextDescribedById:l,screenReaderInstructions:s=ei}=e,{announce:i,announcement:o}=function(){let[e,t]=(0,w.useState)("");return{announce:(0,w.useCallback)(e=>{null!=e&&t(e)},[]),announcement:e}}(),d=_("DndLiveRegion"),[c,u]=(0,w.useState)(!1);if((0,w.useEffect)(()=>{u(!0)},[]),t=(0,w.useMemo)(()=>({onDragStart(e){let{active:t}=e;i(a.onDragStart({active:t}))},onDragMove(e){let{active:t,over:r}=e;a.onDragMove&&i(a.onDragMove({active:t,over:r}))},onDragOver(e){let{active:t,over:r}=e;i(a.onDragOver({active:t,over:r}))},onDragEnd(e){let{active:t,over:r}=e;i(a.onDragEnd({active:t,over:r}))},onDragCancel(e){let{active:t,over:r}=e;i(a.onDragCancel({active:t,over:r}))}}),[i,a]),r=(0,w.useContext)(es),(0,w.useEffect)(()=>{if(!r)throw Error("useDndMonitor must be used within a children of <DndContext>");return r(t)},[t,r]),!c)return null;let g=w.default.createElement(w.default.Fragment,null,w.default.createElement(en,{id:l,value:s.draggable}),w.default.createElement(el,{id:d,announcement:o}));return n?(0,A.createPortal)(g,n):g}function ec(){}function eu(e,t){return(0,w.useMemo)(()=>({sensor:e,options:null!=t?t:{}}),[e,t])}(r=u||(u={})).DragStart="dragStart",r.DragMove="dragMove",r.DragEnd="dragEnd",r.DragCancel="dragCancel",r.DragOver="dragOver",r.RegisterDroppable="registerDroppable",r.SetDroppableDisabled="setDroppableDisabled",r.UnregisterDroppable="unregisterDroppable";let eg=Object.freeze({x:0,y:0});function eh(e,t){let{data:{value:r}}=e,{data:{value:a}}=t;return r-a}function ex(e,t){let{data:{value:r}}=e,{data:{value:a}}=t;return a-r}function em(e,t,r){return void 0===t&&(t=e.left),void 0===r&&(r=e.top),{x:t+.5*e.width,y:r+.5*e.height}}let ef=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:a}=e,n=em(t,t.left,t.top),l=[];for(let e of a){let{id:t}=e,a=r.get(t);if(a){var s;let r=(s=em(a),Math.sqrt(Math.pow(s.x-n.x,2)+Math.pow(s.y-n.y,2)));l.push({id:t,data:{droppableContainer:e,value:r}})}}return l.sort(eh)},ep=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:a}=e,n=[];for(let e of a){let{id:a}=e,l=r.get(a);if(l){let r=function(e,t){let r=Math.max(t.top,e.top),a=Math.max(t.left,e.left),n=Math.min(t.left+t.width,e.left+e.width),l=Math.min(t.top+t.height,e.top+e.height);if(a<n&&r<l){let s=t.width*t.height,i=e.width*e.height,o=(n-a)*(l-r);return Number((o/(s+i-o)).toFixed(4))}return 0}(l,t);r>0&&n.push({id:a,data:{droppableContainer:e,value:r}})}}return n.sort(ex)};function eb(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:eg}let ev=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return r.reduce((e,t)=>({...e,top:e.top+ +t.y,bottom:e.bottom+ +t.y,left:e.left+ +t.x,right:e.right+ +t.x}),{...e})};function ey(e){if(e.startsWith("matrix3d(")){let t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}if(e.startsWith("matrix(")){let t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}let ek={ignoreTransform:!1};function ew(e,t){void 0===t&&(t=ek);let r=e.getBoundingClientRect();if(t.ignoreTransform){let{transform:t,transformOrigin:a}=B(e).getComputedStyle(e);t&&(r=function(e,t,r){let a=ey(t);if(!a)return e;let{scaleX:n,scaleY:l,x:s,y:i}=a,o=e.left-s-(1-n)*parseFloat(r),d=e.top-i-(1-l)*parseFloat(r.slice(r.indexOf(" ")+1)),c=n?e.width/n:e.width,u=l?e.height/l:e.height;return{width:c,height:u,top:d,right:o+c,bottom:d+u,left:o}}(r,t,a))}let{top:a,left:n,width:l,height:s,bottom:i,right:o}=r;return{top:a,left:n,width:l,height:s,bottom:i,right:o}}function ej(e){return ew(e,{ignoreTransform:!0})}function eN(e,t){let r=[];return e?function a(n){var l,s;let i;if(null!=t&&r.length>=t||!n)return r;if($(n)&&null!=n.scrollingElement&&!r.includes(n.scrollingElement))return r.push(n.scrollingElement),r;if(!W(n)||z(n)||r.includes(n))return r;let o=B(e).getComputedStyle(n);return(n!==e&&(void 0===(l=o)&&(l=B(n).getComputedStyle(n)),i=/(auto|scroll|overlay)/,["overflow","overflowX","overflowY"].some(e=>{let t=l[e];return"string"==typeof t&&i.test(t)}))&&r.push(n),void 0===(s=o)&&(s=B(n).getComputedStyle(n)),"fixed"===s.position)?r:a(n.parentNode)}(e):r}function eC(e){let[t]=eN(e,1);return null!=t?t:null}function eS(e){return O&&e?P(e)?e:I(e)?$(e)||e===F(e).scrollingElement?window:W(e)?e:null:null:null}function eE(e){return P(e)?e.scrollX:e.scrollLeft}function eM(e){return P(e)?e.scrollY:e.scrollTop}function eD(e){return{x:eE(e),y:eM(e)}}function eT(e){return!!O&&!!e&&e===document.scrollingElement}function eL(e){let t={x:0,y:0},r=eT(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},a={x:e.scrollWidth-r.width,y:e.scrollHeight-r.height},n=e.scrollTop<=t.y,l=e.scrollLeft<=t.x;return{isTop:n,isLeft:l,isBottom:e.scrollTop>=a.y,isRight:e.scrollLeft>=a.x,maxScroll:a,minScroll:t}}(a=g||(g={}))[a.Forward=1]="Forward",a[a.Backward=-1]="Backward";let eR={x:.2,y:.2};function eA(e){return e.reduce((e,t)=>G(e,eD(t)),eg)}function eO(e,t){if(void 0===t&&(t=ew),!e)return;let{top:r,left:a,bottom:n,right:l}=t(e);eC(e)&&(n<=0||l<=0||r>=window.innerHeight||a>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}let eP=[["x",["left","right"],function(e){return e.reduce((e,t)=>e+eE(t),0)}],["y",["top","bottom"],function(e){return e.reduce((e,t)=>e+eM(t),0)}]];class eI{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=eN(t),a=eA(r);for(const[t,n,l]of(this.rect={...e},this.width=e.width,this.height=e.height,eP))for(const e of n)Object.defineProperty(this,e,{get:()=>{let n=l(r),s=a[t]-n;return this.rect[e]+s},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class eB{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(e=>{var t;return null==(t=this.target)?void 0:t.removeEventListener(...e)})},this.target=e}add(e,t,r){var a;null==(a=this.target)||a.addEventListener(e,t,r),this.listeners.push([e,t,r])}}function e$(e,t){let r=Math.abs(e.x),a=Math.abs(e.y);return"number"==typeof t?Math.sqrt(r**2+a**2)>t:"x"in t&&"y"in t?r>t.x&&a>t.y:"x"in t?r>t.x:"y"in t&&a>t.y}function eW(e){e.preventDefault()}function ez(e){e.stopPropagation()}(n=h||(h={})).Click="click",n.DragStart="dragstart",n.Keydown="keydown",n.ContextMenu="contextmenu",n.Resize="resize",n.SelectionChange="selectionchange",n.VisibilityChange="visibilitychange",(l=x||(x={})).Space="Space",l.Down="ArrowDown",l.Right="ArrowRight",l.Left="ArrowLeft",l.Up="ArrowUp",l.Esc="Escape",l.Enter="Enter",l.Tab="Tab";let eF={start:[x.Space,x.Enter],cancel:[x.Esc],end:[x.Space,x.Enter,x.Tab]},eH=(e,t)=>{let{currentCoordinates:r}=t;switch(e.code){case x.Right:return{...r,x:r.x+25};case x.Left:return{...r,x:r.x-25};case x.Down:return{...r,y:r.y+25};case x.Up:return{...r,y:r.y-25}}};class eU{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new eB(F(t)),this.windowListeners=new eB(B(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(h.Resize,this.handleCancel),this.windowListeners.add(h.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(h.Keydown,this.handleKeyDown))}handleStart(){let{activeNode:e,onStart:t}=this.props,r=e.node.current;r&&eO(r),t(eg)}handleKeyDown(e){if(Z(e)){let{active:t,context:r,options:a}=this.props,{keyboardCodes:n=eF,coordinateGetter:l=eH,scrollBehavior:s="smooth"}=a,{code:i}=e;if(n.end.includes(i))return void this.handleEnd(e);if(n.cancel.includes(i))return void this.handleCancel(e);let{collisionRect:o}=r.current,d=o?{x:o.left,y:o.top}:eg;this.referenceCoordinates||(this.referenceCoordinates=d);let c=l(e,{active:t,context:r.current,currentCoordinates:d});if(c){let t=Q(c,d),a={x:0,y:0},{scrollableAncestors:n}=r.current;for(let r of n){let n=e.code,{isTop:l,isRight:i,isLeft:o,isBottom:d,maxScroll:u,minScroll:g}=eL(r),h=function(e){if(e===document.scrollingElement){let{innerWidth:e,innerHeight:t}=window;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}let{top:t,left:r,right:a,bottom:n}=e.getBoundingClientRect();return{top:t,left:r,right:a,bottom:n,width:e.clientWidth,height:e.clientHeight}}(r),m={x:Math.min(n===x.Right?h.right-h.width/2:h.right,Math.max(n===x.Right?h.left:h.left+h.width/2,c.x)),y:Math.min(n===x.Down?h.bottom-h.height/2:h.bottom,Math.max(n===x.Down?h.top:h.top+h.height/2,c.y))},f=n===x.Right&&!i||n===x.Left&&!o,p=n===x.Down&&!d||n===x.Up&&!l;if(f&&m.x!==c.x){let e=r.scrollLeft+t.x,l=n===x.Right&&e<=u.x||n===x.Left&&e>=g.x;if(l&&!t.y)return void r.scrollTo({left:e,behavior:s});l?a.x=r.scrollLeft-e:a.x=n===x.Right?r.scrollLeft-u.x:r.scrollLeft-g.x,a.x&&r.scrollBy({left:-a.x,behavior:s});break}if(p&&m.y!==c.y){let e=r.scrollTop+t.y,l=n===x.Down&&e<=u.y||n===x.Up&&e>=g.y;if(l&&!t.x)return void r.scrollTo({top:e,behavior:s});l?a.y=r.scrollTop-e:a.y=n===x.Down?r.scrollTop-u.y:r.scrollTop-g.y,a.y&&r.scrollBy({top:-a.y,behavior:s});break}}this.handleMove(e,G(Q(c,this.referenceCoordinates),a))}}}handleMove(e,t){let{onMove:r}=this.props;e.preventDefault(),r(t)}handleEnd(e){let{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){let{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}function eY(e){return!!(e&&"distance"in e)}function eX(e){return!!(e&&"delay"in e)}eU.activators=[{eventName:"onKeyDown",handler:(e,t,r)=>{let{keyboardCodes:a=eF,onActivation:n}=t,{active:l}=r,{code:s}=e.nativeEvent;if(a.start.includes(s)){let t=l.activatorNode.current;return(!t||e.target===t)&&(e.preventDefault(),null==n||n({event:e.nativeEvent}),!0)}return!1}}];class eK{constructor(e,t,r){var a;void 0===r&&(r=function(e){let{EventTarget:t}=B(e);return e instanceof t?e:F(e)}(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:n}=e,{target:l}=n;this.props=e,this.events=t,this.document=F(l),this.documentListeners=new eB(this.document),this.listeners=new eB(r),this.windowListeners=new eB(B(l)),this.initialCoordinates=null!=(a=ee(n))?a:eg,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){let{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(h.Resize,this.handleCancel),this.windowListeners.add(h.DragStart,eW),this.windowListeners.add(h.VisibilityChange,this.handleCancel),this.windowListeners.add(h.ContextMenu,eW),this.documentListeners.add(h.Keydown,this.handleKeydown),t){if(null!=r&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(eX(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(eY(t))return void this.handlePending(t)}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){let{active:r,onPending:a}=this.props;a(r,e,this.initialCoordinates,t)}handleStart(){let{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(h.Click,ez,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(h.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;let{activated:r,initialCoordinates:a,props:n}=this,{onMove:l,options:{activationConstraint:s}}=n;if(!a)return;let i=null!=(t=ee(e))?t:eg,o=Q(a,i);if(!r&&s){if(eY(s)){if(null!=s.tolerance&&e$(o,s.tolerance))return this.handleCancel();if(e$(o,s.distance))return this.handleStart()}return eX(s)&&e$(o,s.tolerance)?this.handleCancel():void this.handlePending(s,o)}e.cancelable&&e.preventDefault(),l(i)}handleEnd(){let{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){let{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===x.Esc&&this.handleCancel()}removeTextSelection(){var e;null==(e=this.document.getSelection())||e.removeAllRanges()}}let eV={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class eJ extends eK{constructor(e){const{event:t}=e;super(e,eV,F(t.target))}}eJ.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:a}=t;return!!r.isPrimary&&0===r.button&&(null==a||a({event:r}),!0)}}];(s=m||(m={}))[s.RightClick=2]="RightClick";let e_={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class eq extends eK{constructor(e){super(e,e_)}static setup(){return window.addEventListener(e_.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(e_.move.name,e)};function e(){}}}eq.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:a}=t,{touches:n}=r;return!(n.length>1)&&(null==a||a({event:r}),!0)}}],(i=f||(f={}))[i.Pointer=0]="Pointer",i[i.DraggableRect=1]="DraggableRect",(o=p||(p={}))[o.TreeOrder=0]="TreeOrder",o[o.ReversedTreeOrder=1]="ReversedTreeOrder";let eG={x:{[g.Backward]:!1,[g.Forward]:!1},y:{[g.Backward]:!1,[g.Forward]:!1}};(d=b||(b={}))[d.Always=0]="Always",d[d.BeforeDragging=1]="BeforeDragging",d[d.WhileDragging=2]="WhileDragging",(v||(v={})).Optimized="optimized";let eQ=new Map;function eZ(e,t){return X(r=>e?r||("function"==typeof t?t(e):e):null,[t,e])}function e0(e){let{callback:t,disabled:r}=e,a=U(t),n=(0,w.useMemo)(()=>{if(r||"u"<typeof window||void 0===window.ResizeObserver)return;let{ResizeObserver:e}=window;return new e(a)},[r]);return(0,w.useEffect)(()=>()=>null==n?void 0:n.disconnect(),[n]),n}function e1(e){return new eI(ew(e),e)}function e2(e,t,r){void 0===t&&(t=e1);let[a,n]=(0,w.useState)(null);function l(){n(a=>{if(!e)return null;if(!1===e.isConnected){var n;return null!=(n=null!=a?a:r)?n:null}let l=t(e);return JSON.stringify(a)===JSON.stringify(l)?a:l})}let s=function(e){let{callback:t,disabled:r}=e,a=U(t),n=(0,w.useMemo)(()=>{if(r||"u"<typeof window||void 0===window.MutationObserver)return;let{MutationObserver:e}=window;return new e(a)},[a,r]);return(0,w.useEffect)(()=>()=>null==n?void 0:n.disconnect(),[n]),n}({callback(t){if(e)for(let r of t){let{type:t,target:a}=r;if("childList"===t&&a instanceof HTMLElement&&a.contains(e)){l();break}}}}),i=e0({callback:l});return H(()=>{l(),e?(null==i||i.observe(e),null==s||s.observe(document.body,{childList:!0,subtree:!0})):(null==i||i.disconnect(),null==s||s.disconnect())},[e]),a}let e5=[];function e4(e,t){void 0===t&&(t=[]);let r=(0,w.useRef)(null);return(0,w.useEffect)(()=>{r.current=null},t),(0,w.useEffect)(()=>{let t=e!==eg;t&&!r.current&&(r.current=e),!t&&r.current&&(r.current=null)},[e]),r.current?Q(e,r.current):eg}function e3(e){return(0,w.useMemo)(()=>{let t,r;return e?(t=e.innerWidth,{top:0,left:0,right:t,bottom:r=e.innerHeight,width:t,height:r}):null},[e])}let e7=[];function e6(e){if(!e)return null;if(e.children.length>1)return e;let t=e.children[0];return W(t)?t:e}let e8=[{sensor:eJ,options:{}},{sensor:eU,options:{}}],e9={current:{}},te={draggable:{measure:ej},droppable:{measure:ej,strategy:b.WhileDragging,frequency:v.Optimized},dragOverlay:{measure:ew}};class tt extends Map{get(e){var t;return null!=e&&null!=(t=super.get(e))?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,r;return null!=(t=null==(r=this.get(e))?void 0:r.node.current)?t:void 0}}let tr={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new tt,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:ec},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:te,measureDroppableContainers:ec,windowRect:null,measuringScheduled:!1},ta={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:ec,draggableNodes:new Map,over:null,measureDroppableContainers:ec},tn=(0,w.createContext)(ta),tl=(0,w.createContext)(tr);function ts(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new tt}}}function ti(e,t){switch(t.type){case u.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case u.DragMove:if(null==e.draggable.active)return e;return{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case u.DragEnd:case u.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case u.RegisterDroppable:{let{element:r}=t,{id:a}=r,n=new tt(e.droppable.containers);return n.set(a,r),{...e,droppable:{...e.droppable,containers:n}}}case u.SetDroppableDisabled:{let{id:r,key:a,disabled:n}=t,l=e.droppable.containers.get(r);if(!l||a!==l.key)return e;let s=new tt(e.droppable.containers);return s.set(r,{...l,disabled:n}),{...e,droppable:{...e.droppable,containers:s}}}case u.UnregisterDroppable:{let{id:r,key:a}=t,n=e.droppable.containers.get(r);if(!n||a!==n.key)return e;let l=new tt(e.droppable.containers);return l.delete(r),{...e,droppable:{...e.droppable,containers:l}}}default:return e}}function to(e){let{disabled:t}=e,{active:r,activatorEvent:a,draggableNodes:n}=(0,w.useContext)(tn),l=V(a),s=V(null==r?void 0:r.id);return(0,w.useEffect)(()=>{if(!t&&!a&&l&&null!=s){if(!Z(l)||document.activeElement===l.target)return;let e=n.get(s);if(!e)return;let{activatorNode:t,node:r}=e;(t.current||r.current)&&requestAnimationFrame(()=>{for(let e of[t.current,r.current]){if(!e)continue;let t=e.matches(er)?e:e.querySelector(er);if(t){t.focus();break}}})}},[a,t,n,s,l]),null}function td(e,t){let{transform:r,...a}=t;return null!=e&&e.length?e.reduce((e,t)=>t({transform:e,...a}),r):r}let tc=(0,w.createContext)({...eg,scaleX:1,scaleY:1});(c=y||(y={}))[c.Uninitialized=0]="Uninitialized",c[c.Initializing=1]="Initializing",c[c.Initialized=2]="Initialized";let tu=(0,w.memo)(function(e){var t,r,a,n,l,s,i,o;let d,c,h,x,m,v,k,j,{id:N,accessibility:C,autoScroll:S=!0,children:E,sensors:M=e8,collisionDetection:D=ep,measuring:T,modifiers:L,...R}=e,[P,I]=(0,w.useReducer)(ti,void 0,ts),[$,z]=function(){let[e]=(0,w.useState)(()=>new Set),t=(0,w.useCallback)(t=>(e.add(t),()=>e.delete(t)),[e]);return[(0,w.useCallback)(t=>{let{type:r,event:a}=t;e.forEach(e=>{var t;return null==(t=e[r])?void 0:t.call(e,a)})},[e]),t]}(),[F,U]=(0,w.useState)(y.Uninitialized),J=F===y.Initialized,{draggable:{active:q,nodes:Q,translate:Z},droppable:{containers:et}}=P,er=null!=q?Q.get(q):null,ea=(0,w.useRef)({initial:null,translated:null}),en=(0,w.useMemo)(()=>{var e;return null!=q?{id:q,data:null!=(e=null==er?void 0:er.data)?e:e9,rect:ea}:null},[q,er]),el=(0,w.useRef)(null),[ei,eo]=(0,w.useState)(null),[ec,eu]=(0,w.useState)(null),eh=Y(R,Object.values(R)),ex=_("DndDescribedBy",N),em=(0,w.useMemo)(()=>et.getEnabled(),[et]),ef=(0,w.useMemo)(()=>({draggable:{...te.draggable,...null==T?void 0:T.draggable},droppable:{...te.droppable,...null==T?void 0:T.droppable},dragOverlay:{...te.dragOverlay,...null==T?void 0:T.dragOverlay}}),[null==T?void 0:T.draggable,null==T?void 0:T.droppable,null==T?void 0:T.dragOverlay]),{droppableRects:ey,measureDroppableContainers:ek,measuringScheduled:ej}=function(e,t){let{dragging:r,dependencies:a,config:n}=t,[l,s]=(0,w.useState)(null),{frequency:i,measure:o,strategy:d}=n,c=(0,w.useRef)(e),u=function(){switch(d){case b.Always:return!1;case b.BeforeDragging:return r;default:return!r}}(),g=Y(u),h=(0,w.useCallback)(function(e){void 0===e&&(e=[]),g.current||s(t=>null===t?e:t.concat(e.filter(e=>!t.includes(e))))},[g]),x=(0,w.useRef)(null),m=X(t=>{if(u&&!r)return eQ;if(!t||t===eQ||c.current!==e||null!=l){let t=new Map;for(let r of e){if(!r)continue;if(l&&l.length>0&&!l.includes(r.id)&&r.rect.current){t.set(r.id,r.rect.current);continue}let e=r.node.current,a=e?new eI(o(e),e):null;r.rect.current=a,a&&t.set(r.id,a)}return t}return t},[e,l,r,u,o]);return(0,w.useEffect)(()=>{c.current=e},[e]),(0,w.useEffect)(()=>{u||h()},[r,u]),(0,w.useEffect)(()=>{l&&l.length>0&&s(null)},[JSON.stringify(l)]),(0,w.useEffect)(()=>{u||"number"!=typeof i||null!==x.current||(x.current=setTimeout(()=>{h(),x.current=null},i))},[i,u,h,...a]),{droppableRects:m,measureDroppableContainers:h,measuringScheduled:null!=l}}(em,{dragging:J,dependencies:[Z.x,Z.y],config:ef.droppable}),eE=X(e=>{var t;return null==q?null:null!=(t=null!=m?m:e)?t:null},[m=(x=null!=q?Q.get(q):void 0)?x.node.current:null,q]),eM=(0,w.useMemo)(()=>ec?ee(ec):null,[ec]),eO=(d=(null==ei?void 0:ei.autoScrollEnabled)===!1,c="object"==typeof S?!1===S.enabled:!1===S,h=J&&!d&&!c,"object"==typeof S?{...S,enabled:h}:{enabled:h}),eP=eZ(eE,ef.draggable.measure);!function(e){let{activeNode:t,measure:r,initialRect:a,config:n=!0}=e,l=(0,w.useRef)(!1),{x:s,y:i}="boolean"==typeof n?{x:n,y:n}:n;H(()=>{if(!s&&!i||!t){l.current=!1;return}if(l.current||!a)return;let e=null==t?void 0:t.node.current;if(!e||!1===e.isConnected)return;let n=eb(r(e),a);if(s||(n.x=0),i||(n.y=0),l.current=!0,Math.abs(n.x)>0||Math.abs(n.y)>0){let t=eC(e);t&&t.scrollBy({top:n.y,left:n.x})}},[t,s,i,a,r])}({activeNode:null!=q?Q.get(q):null,config:eO.layoutShiftCompensation,initialRect:eP,measure:ef.draggable.measure});let eB=e2(eE,ef.draggable.measure,eP),e$=e2(eE?eE.parentElement:null),eW=(0,w.useRef)({activatorEvent:null,active:null,activeNode:eE,collisionRect:null,collisions:null,droppableRects:ey,draggableNodes:Q,draggingNode:null,draggingNodeRect:null,droppableContainers:et,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),ez=et.getNodeFor(null==(t=eW.current.over)?void 0:t.id),eF=function(e){let{measure:t}=e,[r,a]=(0,w.useState)(null),n=e0({callback:(0,w.useCallback)(e=>{for(let{target:r}of e)if(W(r)){a(e=>{let a=t(r);return e?{...e,width:a.width,height:a.height}:a});break}},[t])}),[l,s]=K((0,w.useCallback)(e=>{let r=e6(e);null==n||n.disconnect(),r&&(null==n||n.observe(r)),a(r?t(r):null)},[t,n]));return(0,w.useMemo)(()=>({nodeRef:l,rect:r,setRef:s}),[r,l,s])}({measure:ef.dragOverlay.measure}),eH=null!=(r=eF.nodeRef.current)?r:eE,eU=J?null!=(a=eF.rect)?a:eB:null,eY=!!(eF.nodeRef.current&&eF.rect),eX=(v=eZ(l=eY?null:eB),eb(l,v)),eK=e3(eH?B(eH):null),eV=(s=J?null!=ez?ez:eE:null,k=(0,w.useRef)(s),j=X(e=>s?e&&e!==e5&&s&&k.current&&s.parentNode===k.current.parentNode?e:eN(s):e5,[s]),(0,w.useEffect)(()=>{k.current=s},[s]),j),eJ=function(e,t){void 0===t&&(t=ew);let[r]=e,a=e3(r?B(r):null),[n,l]=(0,w.useState)(e7);function s(){l(()=>e.length?e.map(e=>eT(e)?a:new eI(t(e),e)):e7)}let i=e0({callback:s});return H(()=>{null==i||i.disconnect(),s(),e.forEach(e=>null==i?void 0:i.observe(e))},[e]),n}(eV),e_=td(L,{transform:{x:Z.x-eX.x,y:Z.y-eX.y,scaleX:1,scaleY:1},activatorEvent:ec,active:en,activeNodeRect:eB,containerNodeRect:e$,draggingNodeRect:eU,over:eW.current.over,overlayNodeRect:eF.rect,scrollableAncestors:eV,scrollableAncestorRects:eJ,windowRect:eK}),eq=eM?G(eM,Z):null,e1=function(e){let[t,r]=(0,w.useState)(null),a=(0,w.useRef)(e),n=(0,w.useCallback)(e=>{let t=eS(e.target);t&&r(e=>e?(e.set(t,eD(t)),new Map(e)):null)},[]);return(0,w.useEffect)(()=>{let t=a.current;if(e!==t){l(t);let s=e.map(e=>{let t=eS(e);return t?(t.addEventListener("scroll",n,{passive:!0}),[t,eD(t)]):null}).filter(e=>null!=e);r(s.length?new Map(s):null),a.current=e}return()=>{l(e),l(t)};function l(e){e.forEach(e=>{let t=eS(e);null==t||t.removeEventListener("scroll",n)})}},[n,e]),(0,w.useMemo)(()=>e.length?t?Array.from(t.values()).reduce((e,t)=>G(e,t),eg):eA(e):eg,[e,t])}(eV),tt=e4(e1),tr=e4(e1,[eB]),ta=G(e_,tt),tu=eU?ev(eU,e_):null,tg=en&&tu?D({active:en,collisionRect:tu,droppableRects:ey,droppableContainers:em,pointerCoordinates:eq}):null,th=function(e,t){if(!e||0===e.length)return null;let[r]=e;return r.id}(tg,0),[tx,tm]=(0,w.useState)(null),tf=(i=eY?e_:G(e_,tr),o=null!=(n=null==tx?void 0:tx.rect)?n:null,{...i,scaleX:o&&eB?o.width/eB.width:1,scaleY:o&&eB?o.height/eB.height:1}),tp=(0,w.useRef)(null),tb=(0,w.useCallback)((e,t)=>{let{sensor:r,options:a}=t;if(null==el.current)return;let n=Q.get(el.current);if(!n)return;let l=e.nativeEvent,s=new r({active:el.current,activeNode:n,event:l,options:a,context:eW,onAbort(e){if(!Q.get(e))return;let{onDragAbort:t}=eh.current,r={id:e};null==t||t(r),$({type:"onDragAbort",event:r})},onPending(e,t,r,a){if(!Q.get(e))return;let{onDragPending:n}=eh.current,l={id:e,constraint:t,initialCoordinates:r,offset:a};null==n||n(l),$({type:"onDragPending",event:l})},onStart(e){let t=el.current;if(null==t)return;let r=Q.get(t);if(!r)return;let{onDragStart:a}=eh.current,n={activatorEvent:l,active:{id:t,data:r.data,rect:ea}};(0,A.unstable_batchedUpdates)(()=>{null==a||a(n),U(y.Initializing),I({type:u.DragStart,initialCoordinates:e,active:t}),$({type:"onDragStart",event:n}),eo(tp.current),eu(l)})},onMove(e){I({type:u.DragMove,coordinates:e})},onEnd:i(u.DragEnd),onCancel:i(u.DragCancel)});function i(e){return async function(){let{active:t,collisions:r,over:a,scrollAdjustedTranslate:n}=eW.current,s=null;if(t&&n){let{cancelDrop:i}=eh.current;s={activatorEvent:l,active:t,collisions:r,delta:n,over:a},e===u.DragEnd&&"function"==typeof i&&await Promise.resolve(i(s))&&(e=u.DragCancel)}el.current=null,(0,A.unstable_batchedUpdates)(()=>{I({type:e}),U(y.Uninitialized),tm(null),eo(null),eu(null),tp.current=null;let t=e===u.DragEnd?"onDragEnd":"onDragCancel";if(s){let e=eh.current[t];null==e||e(s),$({type:t,event:s})}})}}tp.current=s},[Q]),tv=(0,w.useCallback)((e,t)=>(r,a)=>{let n=r.nativeEvent,l=Q.get(a);null!==el.current||!l||n.dndKit||n.defaultPrevented||!0===e(r,t.options,{active:l})&&(n.dndKit={capturedBy:t.sensor},el.current=a,tb(r,t))},[Q,tb]),ty=(0,w.useMemo)(()=>M.reduce((e,t)=>{let{sensor:r}=t;return[...e,...r.activators.map(e=>({eventName:e.eventName,handler:tv(e.handler,t)}))]},[]),[M,tv]);(0,w.useEffect)(()=>{if(!O)return;let e=M.map(e=>{let{sensor:t}=e;return null==t.setup?void 0:t.setup()});return()=>{for(let t of e)null==t||t()}},M.map(e=>{let{sensor:t}=e;return t})),H(()=>{eB&&F===y.Initializing&&U(y.Initialized)},[eB,F]),(0,w.useEffect)(()=>{let{onDragMove:e}=eh.current,{active:t,activatorEvent:r,collisions:a,over:n}=eW.current;if(!t||!r)return;let l={active:t,activatorEvent:r,collisions:a,delta:{x:ta.x,y:ta.y},over:n};(0,A.unstable_batchedUpdates)(()=>{null==e||e(l),$({type:"onDragMove",event:l})})},[ta.x,ta.y]),(0,w.useEffect)(()=>{let{active:e,activatorEvent:t,collisions:r,droppableContainers:a,scrollAdjustedTranslate:n}=eW.current;if(!e||null==el.current||!t||!n)return;let{onDragOver:l}=eh.current,s=a.get(th),i=s&&s.rect.current?{id:s.id,rect:s.rect.current,data:s.data,disabled:s.disabled}:null,o={active:e,activatorEvent:t,collisions:r,delta:{x:n.x,y:n.y},over:i};(0,A.unstable_batchedUpdates)(()=>{tm(i),null==l||l(o),$({type:"onDragOver",event:o})})},[th]),H(()=>{eW.current={activatorEvent:ec,active:en,activeNode:eE,collisionRect:tu,collisions:tg,droppableRects:ey,draggableNodes:Q,draggingNode:eH,draggingNodeRect:eU,droppableContainers:et,over:tx,scrollableAncestors:eV,scrollAdjustedTranslate:ta},ea.current={initial:eU,translated:tu}},[en,eE,tg,tu,Q,eH,eU,ey,et,tx,eV,ta]),function(e){let t,{acceleration:r,activator:a=f.Pointer,canScroll:n,draggingRect:l,enabled:s,interval:i=5,order:o=p.TreeOrder,pointerCoordinates:d,scrollableAncestors:c,scrollableAncestorRects:u,delta:h,threshold:x}=e,m=function(e){let{delta:t,disabled:r}=e,a=V(t);return X(e=>{if(r||!a||!e)return eG;let n={x:Math.sign(t.x-a.x),y:Math.sign(t.y-a.y)};return{x:{[g.Backward]:e.x[g.Backward]||-1===n.x,[g.Forward]:e.x[g.Forward]||1===n.x},y:{[g.Backward]:e.y[g.Backward]||-1===n.y,[g.Forward]:e.y[g.Forward]||1===n.y}}},[r,t,a])}({delta:h,disabled:!s}),[b,v]=(t=(0,w.useRef)(null),[(0,w.useCallback)((e,r)=>{t.current=setInterval(e,r)},[]),(0,w.useCallback)(()=>{null!==t.current&&(clearInterval(t.current),t.current=null)},[])]),y=(0,w.useRef)({x:0,y:0}),k=(0,w.useRef)({x:0,y:0}),j=(0,w.useMemo)(()=>{switch(a){case f.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case f.DraggableRect:return l}},[a,l,d]),N=(0,w.useRef)(null),C=(0,w.useCallback)(()=>{let e=N.current;if(!e)return;let t=y.current.x*k.current.x,r=y.current.y*k.current.y;e.scrollBy(t,r)},[]),S=(0,w.useMemo)(()=>o===p.TreeOrder?[...c].reverse():c,[o,c]);(0,w.useEffect)(()=>{if(!s||!c.length||!j)return void v();for(let e of S){if((null==n?void 0:n(e))===!1)continue;let t=u[c.indexOf(e)];if(!t)continue;let{direction:a,speed:l}=function(e,t,r,a,n){let{top:l,left:s,right:i,bottom:o}=r;void 0===a&&(a=10),void 0===n&&(n=eR);let{isTop:d,isBottom:c,isLeft:u,isRight:h}=eL(e),x={x:0,y:0},m={x:0,y:0},f={height:t.height*n.y,width:t.width*n.x};return!d&&l<=t.top+f.height?(x.y=g.Backward,m.y=a*Math.abs((t.top+f.height-l)/f.height)):!c&&o>=t.bottom-f.height&&(x.y=g.Forward,m.y=a*Math.abs((t.bottom-f.height-o)/f.height)),!h&&i>=t.right-f.width?(x.x=g.Forward,m.x=a*Math.abs((t.right-f.width-i)/f.width)):!u&&s<=t.left+f.width&&(x.x=g.Backward,m.x=a*Math.abs((t.left+f.width-s)/f.width)),{direction:x,speed:m}}(e,t,j,r,x);for(let e of["x","y"])m[e][a[e]]||(l[e]=0,a[e]=0);if(l.x>0||l.y>0){v(),N.current=e,b(C,i),y.current=l,k.current=a;return}}y.current={x:0,y:0},k.current={x:0,y:0},v()},[r,C,n,v,s,i,JSON.stringify(j),JSON.stringify(m),b,c,S,u,JSON.stringify(x)])}({...eO,delta:Z,draggingRect:tu,pointerCoordinates:eq,scrollableAncestors:eV,scrollableAncestorRects:eJ});let tk=(0,w.useMemo)(()=>({active:en,activeNode:eE,activeNodeRect:eB,activatorEvent:ec,collisions:tg,containerNodeRect:e$,dragOverlay:eF,draggableNodes:Q,droppableContainers:et,droppableRects:ey,over:tx,measureDroppableContainers:ek,scrollableAncestors:eV,scrollableAncestorRects:eJ,measuringConfiguration:ef,measuringScheduled:ej,windowRect:eK}),[en,eE,eB,ec,tg,e$,eF,Q,et,ey,tx,ek,eV,eJ,ef,ej,eK]),tw=(0,w.useMemo)(()=>({activatorEvent:ec,activators:ty,active:en,activeNodeRect:eB,ariaDescribedById:{draggable:ex},dispatch:I,draggableNodes:Q,over:tx,measureDroppableContainers:ek}),[ec,ty,en,eB,I,ex,Q,tx,ek]);return w.default.createElement(es.Provider,{value:z},w.default.createElement(tn.Provider,{value:tw},w.default.createElement(tl.Provider,{value:tk},w.default.createElement(tc.Provider,{value:tf},E)),w.default.createElement(to,{disabled:(null==C?void 0:C.restoreFocus)===!1})),w.default.createElement(ed,{...C,hiddenTextDescribedById:ex}))}),tg=(0,w.createContext)(null),th="button",tx={timeout:25};function tm(e){let{data:t,disabled:r=!1,id:a,resizeObserverConfig:n}=e,l=_("Droppable"),{active:s,dispatch:i,over:o,measureDroppableContainers:d}=(0,w.useContext)(tn),c=(0,w.useRef)({disabled:r}),g=(0,w.useRef)(!1),h=(0,w.useRef)(null),x=(0,w.useRef)(null),{disabled:m,updateMeasurementsFor:f,timeout:p}={...tx,...n},b=Y(null!=f?f:a),v=e0({callback:(0,w.useCallback)(()=>{if(!g.current){g.current=!0;return}null!=x.current&&clearTimeout(x.current),x.current=setTimeout(()=>{d(Array.isArray(b.current)?b.current:[b.current]),x.current=null},p)},[p]),disabled:m||!s}),[y,k]=K((0,w.useCallback)((e,t)=>{v&&(t&&(v.unobserve(t),g.current=!1),e&&v.observe(e))},[v])),j=Y(t);return(0,w.useEffect)(()=>{v&&y.current&&(v.disconnect(),g.current=!1,v.observe(y.current))},[y,v]),(0,w.useEffect)(()=>(i({type:u.RegisterDroppable,element:{id:a,key:l,disabled:r,node:y,rect:h,data:j}}),()=>i({type:u.UnregisterDroppable,key:l,id:a})),[a]),(0,w.useEffect)(()=>{r!==c.current.disabled&&(i({type:u.SetDroppableDisabled,id:a,key:l,disabled:r}),c.current.disabled=r)},[a,l,r,i]),{active:s,rect:h,isOver:(null==o?void 0:o.id)===a,node:y,over:o,setNodeRef:k}}function tf(e){let{animation:t,children:r}=e,[a,n]=(0,w.useState)(null),[l,s]=(0,w.useState)(null),i=V(r);return r||a||!i||n(i),H(()=>{if(!l)return;let e=null==a?void 0:a.key,r=null==a?void 0:a.props.id;null==e||null==r?n(null):Promise.resolve(t(r,l)).then(()=>{n(null)})},[t,a,l]),w.default.createElement(w.default.Fragment,null,r,a?(0,w.cloneElement)(a,{ref:s}):null)}let tp={x:0,y:0,scaleX:1,scaleY:1};function tb(e){let{children:t}=e;return w.default.createElement(tn.Provider,{value:ta},w.default.createElement(tc.Provider,{value:tp},t))}let tv={position:"fixed",touchAction:"none"},ty=e=>Z(e)?"transform 250ms ease":void 0,tk=(0,w.forwardRef)((e,t)=>{let{as:r,activatorEvent:a,adjustScale:n,children:l,className:s,rect:i,style:o,transform:d,transition:c=ty}=e;if(!i)return null;let u=n?d:{...d,scaleX:1,scaleY:1},g={...tv,width:i.width,height:i.height,top:i.top,left:i.left,transform:et.Transform.toString(u),transformOrigin:n&&a?function(e,t){let r=ee(e);if(!r)return"0 0";let a={x:(r.x-t.left)/t.width*100,y:(r.y-t.top)/t.height*100};return a.x+"% "+a.y+"%"}(a,i):void 0,transition:"function"==typeof c?c(a):c,...o};return w.default.createElement(r,{className:s,style:g,ref:t},l)}),tw={duration:250,easing:"ease",keyframes:e=>{let{transform:{initial:t,final:r}}=e;return[{transform:et.Transform.toString(t)},{transform:et.Transform.toString(r)}]},sideEffects:(t={styles:{active:{opacity:"0"}}},e=>{let{active:r,dragOverlay:a}=e,n={},{styles:l,className:s}=t;if(null!=l&&l.active)for(let[e,t]of Object.entries(l.active))void 0!==t&&(n[e]=r.node.style.getPropertyValue(e),r.node.style.setProperty(e,t));if(null!=l&&l.dragOverlay)for(let[e,t]of Object.entries(l.dragOverlay))void 0!==t&&a.node.style.setProperty(e,t);return null!=s&&s.active&&r.node.classList.add(s.active),null!=s&&s.dragOverlay&&a.node.classList.add(s.dragOverlay),function(){for(let[e,t]of Object.entries(n))r.node.style.setProperty(e,t);null!=s&&s.active&&r.node.classList.remove(s.active)}})},tj=0,tN=w.default.memo(e=>{var t;let{adjustScale:r=!1,children:a,dropAnimation:n,style:l,transition:s,modifiers:i,wrapperElement:o="div",className:d,zIndex:c=999}=e,{activatorEvent:u,active:g,activeNodeRect:h,containerNodeRect:x,draggableNodes:m,droppableContainers:f,dragOverlay:p,over:b,measuringConfiguration:v,scrollableAncestors:y,scrollableAncestorRects:k,windowRect:j}=(0,w.useContext)(tl),N=(0,w.useContext)(tc),C=(t=null==g?void 0:g.id,(0,w.useMemo)(()=>{if(null!=t)return++tj},[t])),S=td(i,{activatorEvent:u,active:g,activeNodeRect:h,containerNodeRect:x,draggingNodeRect:p.rect,over:b,overlayNodeRect:p.rect,scrollableAncestors:y,scrollableAncestorRects:k,transform:N,windowRect:j}),E=eZ(h),M=function(e){let{config:t,draggableNodes:r,droppableContainers:a,measuringConfiguration:n}=e;return U((e,l)=>{if(null===t)return;let s=r.get(e);if(!s)return;let i=s.node.current;if(!i)return;let o=e6(l);if(!o)return;let{transform:d}=B(l).getComputedStyle(l),c=ey(d);if(!c)return;let u="function"==typeof t?t:function(e){let{duration:t,easing:r,sideEffects:a,keyframes:n}={...tw,...e};return e=>{let{active:l,dragOverlay:s,transform:i,...o}=e;if(!t)return;let d={x:s.rect.left-l.rect.left,y:s.rect.top-l.rect.top},c={scaleX:1!==i.scaleX?l.rect.width*i.scaleX/s.rect.width:1,scaleY:1!==i.scaleY?l.rect.height*i.scaleY/s.rect.height:1},u={x:i.x-d.x,y:i.y-d.y,...c},g=n({...o,active:l,dragOverlay:s,transform:{initial:i,final:u}}),[h]=g,x=g[g.length-1];if(JSON.stringify(h)===JSON.stringify(x))return;let m=null==a?void 0:a({active:l,dragOverlay:s,...o}),f=s.node.animate(g,{duration:t,easing:r,fill:"forwards"});return new Promise(e=>{f.onfinish=()=>{null==m||m(),e()}})}}(t);return eO(i,n.draggable.measure),u({active:{id:e,data:s.data,node:i,rect:n.draggable.measure(i)},draggableNodes:r,dragOverlay:{node:l,rect:n.dragOverlay.measure(o)},droppableContainers:a,measuringConfiguration:n,transform:c})})}({config:n,draggableNodes:m,droppableContainers:f,measuringConfiguration:v}),D=E?p.setRef:void 0;return w.default.createElement(tb,null,w.default.createElement(tf,{animation:M},g&&C?w.default.createElement(tk,{key:C,id:g.id,ref:D,as:o,activatorEvent:u,adjustScale:r,className:d,transition:s,rect:E,style:{zIndex:c,...l},transform:S},a):null))});function tC(e,t,r){let a=e.slice();return a.splice(r<0?a.length+r:r,0,a.splice(t,1)[0]),a}function tS(e){return null!==e&&e>=0}let tE=w.default.createContext({activeIndex:-1,containerId:"Sortable",disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:e=>{let{rects:t,activeIndex:r,overIndex:a,index:n}=e,l=tC(t,a,r),s=t[n],i=l[n];return i&&s?{x:i.left-s.left,y:i.top-s.top,scaleX:i.width/s.width,scaleY:i.height/s.height}:null},disabled:{draggable:!1,droppable:!1}}),tM=e=>{let{id:t,items:r,activeIndex:a,overIndex:n}=e;return tC(r,a,n).indexOf(t)},tD=e=>{let{containerId:t,isSorting:r,wasDragging:a,index:n,items:l,newIndex:s,previousItems:i,previousContainerId:o,transition:d}=e;return!!d&&!!a&&(i===l||n!==s)&&(!!r||s!==n&&t===o)},tT={duration:200,easing:"ease"},tL="transform",tR=et.Transition.toString({property:tL,duration:0,easing:"linear"}),tA={roleDescription:"sortable"};function tO(e){var t,r,a,n;let{animateLayoutChanges:l=tD,attributes:s,disabled:i,data:o,getNewIndex:d=tM,id:c,strategy:u,resizeObserverConfig:g,transition:h=tT}=e,{items:x,containerId:m,activeIndex:f,disabled:p,disableTransforms:b,sortedRects:v,overIndex:y,useDragOverlay:k,strategy:j}=(0,w.useContext)(tE),N=(t=i,r=p,"boolean"==typeof t?{draggable:t,droppable:!1}:{draggable:null!=(a=null==t?void 0:t.draggable)?a:r.draggable,droppable:null!=(n=null==t?void 0:t.droppable)?n:r.droppable}),C=x.indexOf(c),S=(0,w.useMemo)(()=>({sortable:{containerId:m,index:C,items:x},...o}),[m,o,C,x]),E=(0,w.useMemo)(()=>x.slice(x.indexOf(c)),[x,c]),{rect:M,node:D,isOver:T,setNodeRef:L}=tm({id:c,data:S,disabled:N.droppable,resizeObserverConfig:{updateMeasurementsFor:E,...g}}),{active:R,activatorEvent:A,activeNodeRect:O,attributes:P,setNodeRef:I,listeners:B,isDragging:$,over:W,setActivatorNodeRef:z,transform:F}=function(e){let{id:t,data:r,disabled:a=!1,attributes:n}=e,l=_("Draggable"),{activators:s,activatorEvent:i,active:o,activeNodeRect:d,ariaDescribedById:c,draggableNodes:u,over:g}=(0,w.useContext)(tn),{role:h=th,roleDescription:x="draggable",tabIndex:m=0}=null!=n?n:{},f=(null==o?void 0:o.id)===t,p=(0,w.useContext)(f?tc:tg),[b,v]=K(),[y,k]=K(),j=(0,w.useMemo)(()=>s.reduce((e,r)=>{let{eventName:a,handler:n}=r;return e[a]=e=>{n(e,t)},e},{}),[s,t]),N=Y(r);return H(()=>(u.set(t,{id:t,key:l,node:b,activatorNode:y,data:N}),()=>{let e=u.get(t);e&&e.key===l&&u.delete(t)}),[u,t]),{active:o,activatorEvent:i,activeNodeRect:d,attributes:(0,w.useMemo)(()=>({role:h,tabIndex:m,"aria-disabled":a,"aria-pressed":!!f&&h===th||void 0,"aria-roledescription":x,"aria-describedby":c.draggable}),[a,h,m,f,x,c.draggable]),isDragging:f,listeners:a?void 0:j,node:b,over:g,setNodeRef:v,setActivatorNodeRef:k,transform:p}}({id:c,data:S,attributes:{...tA,...s},disabled:N.draggable}),U=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,w.useMemo)(()=>e=>{t.forEach(t=>t(e))},t)}(L,I),X=!!R,V=X&&!b&&tS(f)&&tS(y),J=!k&&$,q=J&&V?F:null,G=V?null!=q?q:(null!=u?u:j)({rects:v,activeNodeRect:O,activeIndex:f,overIndex:y,index:C}):null,Q=tS(f)&&tS(y)?d({id:c,items:x,activeIndex:f,overIndex:y}):C,ee=null==R?void 0:R.id,er=(0,w.useRef)({activeId:ee,items:x,newIndex:Q,containerId:m}),ea=x!==er.current.items,en=l({active:R,containerId:m,isDragging:$,isSorting:X,id:c,index:C,items:x,newIndex:er.current.newIndex,previousItems:er.current.items,previousContainerId:er.current.containerId,transition:h,wasDragging:null!=er.current.activeId}),el=function(e){let{disabled:t,index:r,node:a,rect:n}=e,[l,s]=(0,w.useState)(null),i=(0,w.useRef)(r);return H(()=>{if(!t&&r!==i.current&&a.current){let e=n.current;if(e){let t=ew(a.current,{ignoreTransform:!0}),r={x:e.left-t.left,y:e.top-t.top,scaleX:e.width/t.width,scaleY:e.height/t.height};(r.x||r.y)&&s(r)}}r!==i.current&&(i.current=r)},[t,r,a,n]),(0,w.useEffect)(()=>{l&&s(null)},[l]),l}({disabled:!en,index:C,node:D,rect:M});return(0,w.useEffect)(()=>{X&&er.current.newIndex!==Q&&(er.current.newIndex=Q),m!==er.current.containerId&&(er.current.containerId=m),x!==er.current.items&&(er.current.items=x)},[X,Q,m,x]),(0,w.useEffect)(()=>{if(ee===er.current.activeId)return;if(null!=ee&&null==er.current.activeId){er.current.activeId=ee;return}let e=setTimeout(()=>{er.current.activeId=ee},50);return()=>clearTimeout(e)},[ee]),{active:R,activeIndex:f,attributes:P,data:S,rect:M,index:C,newIndex:Q,items:x,isOver:T,isSorting:X,isDragging:$,listeners:B,node:D,overIndex:y,over:W,setNodeRef:U,setActivatorNodeRef:z,setDroppableNodeRef:L,setDraggableNodeRef:I,transform:null!=el?el:G,transition:el||ea&&er.current.newIndex===C?tR:(!J||Z(A))&&h&&(X||en)?et.Transition.toString({...h,property:tL}):void 0}}x.Down,x.Right,x.Up,x.Left;let tP=[{id:"suggested",title:"Suggested",dotColor:"bg-purple-400"},{id:"backlog",title:"Backlog",dotColor:"bg-gray-400"},{id:"in-progress",title:"In Progress",dotColor:"bg-blue-400"},{id:"review",title:"Review",dotColor:"bg-amber-400"},{id:"done",title:"Done",dotColor:"bg-emerald-400"},{id:"archived",title:"Archived",dotColor:"bg-red-400"}],tI={suggested:"#a855f7",backlog:"#9ca3af","in-progress":"#60a5fa",review:"#f59e0b",done:"#34d399",archived:"#f87171"},tB=(0,w.forwardRef)(function({task:e,subTasks:t=[],isSubTask:r,onEdit:a,onArchive:n,onDelete:l,onRestore:s,onAddSubTask:i,onToggleExpand:o,expanded:d,isDragOverlay:c,isDropTarget:u,dragHandleProps:g,style:h,className:x,...m},f){let[p,b]=(0,w.useState)(!1),v="archived"===e.column,y="done"===e.column,j=tI[e.column]||"#9ca3af",N=t.filter(e=>"done"===e.column).length,C=t.length;return(0,k.jsxs)("div",{ref:f,style:{borderLeftColor:j,borderLeftWidth:4,...h},className:`group rounded-xl p-4 transition-all duration-200 border ${r?"ml-4 bg-gray-50 dark:bg-gray-900/40 border-gray-200 dark:border-gray-800/30":"bg-white dark:bg-gray-900/60"} ${v?"border-red-300 dark:border-red-500/20 opacity-50":y?"border-emerald-300 dark:border-emerald-500/20 opacity-70":"border-gray-200 dark:border-gray-800/50 hover:border-amber-400 dark:hover:border-amber-500/30 hover:shadow-lg dark:hover:shadow-[0_0_20px_rgba(245,158,11,0.08)]"} ${c?"shadow-2xl ring-2 ring-amber-400 scale-[1.02] rotate-1":""} ${u?"ring-2 ring-blue-400 bg-blue-50 dark:bg-blue-900/20":""} ${x||""}`,...m,children:[(0,k.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,k.jsxs)("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[!v&&!r&&(0,k.jsx)("div",{className:"opacity-40 group-hover:opacity-60 transition-opacity flex-shrink-0 cursor-grab active:cursor-grabbing p-1 -m-1 select-none",style:{touchAction:"none"},...g||{},children:(0,k.jsxs)("svg",{className:"w-4 h-4 text-gray-400 dark:text-gray-500",fill:"currentColor",viewBox:"0 0 24 24",children:[(0,k.jsx)("circle",{cx:"9",cy:"6",r:"1.5"}),(0,k.jsx)("circle",{cx:"15",cy:"6",r:"1.5"}),(0,k.jsx)("circle",{cx:"9",cy:"12",r:"1.5"}),(0,k.jsx)("circle",{cx:"15",cy:"12",r:"1.5"}),(0,k.jsx)("circle",{cx:"9",cy:"18",r:"1.5"}),(0,k.jsx)("circle",{cx:"15",cy:"18",r:"1.5"})]})}),y&&(0,k.jsx)("svg",{className:"w-4 h-4 text-emerald-500 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12.75l6 6 9-13.5"})}),(0,k.jsx)("h3",{className:`text-sm font-medium leading-snug cursor-pointer ${v||y?"text-gray-400 dark:text-gray-500 line-through":"text-gray-900 dark:text-gray-100"}`,onClick:()=>{C>0&&o?o():b(!p)},children:e.title})]}),(0,k.jsx)("div",{className:"flex items-center gap-1 flex-shrink-0 ml-2",children:v?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("button",{onClick:t=>{t.stopPropagation(),s?.(e.id)},className:"p-1.5 rounded-md hover:bg-emerald-50 dark:hover:bg-emerald-500/10 text-gray-400 dark:text-gray-500 hover:text-emerald-500 dark:hover:text-emerald-400 transition-colors",title:"Restore",children:(0,k.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 15L3 9m0 0l6-6M3 9h12a6 6 0 010 12h-3"})})}),(0,k.jsx)("button",{onClick:t=>{t.stopPropagation(),l(e.id)},className:"p-1.5 rounded-md hover:bg-red-50 dark:hover:bg-red-500/10 text-gray-400 dark:text-gray-500 hover:text-red-500 dark:hover:text-red-400 transition-colors",title:"Delete",children:(0,k.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})})})]}):(0,k.jsxs)(k.Fragment,{children:[!r&&i&&(0,k.jsx)("button",{onClick:t=>{t.stopPropagation(),i(e.id)},className:"p-1.5 rounded-md hover:bg-blue-50 dark:hover:bg-blue-500/10 text-gray-400 dark:text-gray-500 hover:text-blue-500 dark:hover:text-blue-400 transition-colors",title:"Add sub-task",children:(0,k.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})})}),(0,k.jsx)("button",{onClick:t=>{t.stopPropagation(),a(e)},className:"p-1.5 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800/80 text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",title:"Edit",children:(0,k.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931z"})})}),(0,k.jsx)("button",{onClick:t=>{t.stopPropagation(),n(e.id)},className:"p-1.5 rounded-md hover:bg-amber-50 dark:hover:bg-amber-500/10 text-gray-400 dark:text-gray-500 hover:text-amber-500 dark:hover:text-amber-400 transition-colors",title:"Archive",children:(0,k.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z"})})}),(0,k.jsx)("button",{onClick:t=>{t.stopPropagation(),l(e.id)},className:"p-1.5 rounded-md hover:bg-red-50 dark:hover:bg-red-500/10 text-gray-400 dark:text-gray-500 hover:text-red-500 dark:hover:text-red-400 transition-colors",title:"Delete",children:(0,k.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})})})]})})]}),(0,k.jsx)("p",{className:`text-xs text-gray-500 dark:text-gray-500 leading-relaxed mb-3 cursor-pointer ${p?"":"line-clamp-2"}`,onClick:()=>b(!p),children:e.description}),C>0&&(0,k.jsx)("div",{className:"mb-3",children:(0,k.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,k.jsx)("div",{className:"flex-1 bg-gray-200 dark:bg-gray-800 rounded-full h-1.5",children:(0,k.jsx)("div",{className:"bg-emerald-500 h-1.5 rounded-full transition-all",style:{width:`${Math.round(N/C*100)}%`}})}),(0,k.jsxs)("span",{className:"text-[10px] text-gray-400 dark:text-gray-500 font-medium",children:[N,"/",C]})]})}),(0,k.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[(0,k.jsxs)("div",{className:"flex items-center gap-2",children:[(0,k.jsxs)("span",{className:"flex items-center gap-1.5 text-xs text-gray-500 dark:text-gray-400",children:[(0,k.jsx)("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:e.agentColor}}),e.agent]}),(0,k.jsx)("span",{className:"px-2 py-0.5 bg-gray-100 dark:bg-gray-800/80 text-gray-500 dark:text-gray-400 text-[10px] rounded-full font-medium",children:e.project}),C>0&&(0,k.jsxs)("span",{className:"px-2 py-0.5 bg-blue-50 dark:bg-blue-500/10 text-blue-500 dark:text-blue-400 text-[10px] rounded-full font-medium border border-blue-200 dark:border-blue-500/20 cursor-pointer",onClick:e=>{e.stopPropagation(),o?.()},children:[C," sub-task",1!==C?"s":""," ",d?"▾":"▸"]})]}),(0,k.jsx)("span",{className:"text-[10px] text-gray-400 dark:text-gray-600",children:S(e.createdAt)})]})]})});function t$({id:e,children:t}){let{setNodeRef:r,isOver:a}=tm({id:`column:${e}`});return(0,k.jsx)("div",{ref:r,className:`min-h-[100px] transition-colors rounded-lg ${a?"bg-amber-50/50 dark:bg-amber-500/5":""}`,children:t})}function tW({id:e,isActive:t}){let{setNodeRef:r,isOver:a}=tm({id:e}),n=a||t;return(0,k.jsx)("div",{ref:r,className:"relative transition-all duration-150",style:{height:n?8:6,marginTop:-2,marginBottom:-2},children:n&&(0,k.jsxs)("div",{className:"absolute inset-x-2 top-1/2 -translate-y-1/2 h-[3px] bg-amber-500 rounded-full shadow-[0_0_8px_rgba(245,158,11,0.5)]",children:[(0,k.jsx)("div",{className:"absolute -left-1 top-1/2 -translate-y-1/2 w-2.5 h-2.5 bg-amber-500 rounded-full"}),(0,k.jsx)("div",{className:"absolute -right-1 top-1/2 -translate-y-1/2 w-2.5 h-2.5 bg-amber-500 rounded-full"})]})})}function tz({task:e,subTasks:t,isExpanded:r,onToggleExpand:a,dropTargetId:n,...l}){let{attributes:s,listeners:i,setNodeRef:o,transform:d,transition:c,isDragging:u}=tO({id:e.id,data:{type:"task",task:e}}),g={transform:et.Transform.toString(d),transition:c,opacity:u?.3:void 0};return(0,k.jsxs)("div",{children:[(0,k.jsx)(tB,{ref:o,style:g,task:e,subTasks:t,expanded:r,onToggleExpand:a,isDropTarget:n===e.id,dragHandleProps:{...s,...i},...l}),r&&t.map(e=>(0,k.jsx)(tF,{task:e,dropTargetId:n,...l},e.id))]})}function tF({task:e,dropTargetId:t,...r}){let{attributes:a,listeners:n,setNodeRef:l,transform:s,transition:i,isDragging:o}=tO({id:e.id,data:{type:"task",task:e}}),d={transform:et.Transform.toString(s),transition:i,opacity:o?.3:void 0};return(0,k.jsx)(tB,{ref:l,style:d,task:e,isSubTask:!0,isDropTarget:t===e.id,dragHandleProps:{...a,...n},...r})}function tH({tasks:e,onEditTask:t,onArchiveTask:r,onDeleteTask:a,onRestoreTask:n,onMoveTask:l,onReorderTask:s,onAddSubTask:i}){let[o,d]=(0,w.useState)(new Set),[c,u]=(0,w.useState)(null),[g,h]=(0,w.useState)(null),[x,m]=(0,w.useState)(null),f=(0,w.useRef)(null),p=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,w.useMemo)(()=>[...t].filter(e=>null!=e),[...t])}(eu(eJ,{activationConstraint:{distance:8}}),eu(eq,{activationConstraint:{delay:300,tolerance:5}})),b=(0,w.useMemo)(()=>e.filter(e=>!e.parentId),[e]),v=(0,w.useMemo)(()=>{let t=new Map;return e.filter(e=>e.parentId).forEach(e=>{let r=t.get(e.parentId)||[];r.push(e),t.set(e.parentId,r)}),t},[e]),y=c?e.find(e=>e.id===c):null,j=(0,w.useCallback)(e=>{d(t=>{let r=new Set(t);return r.has(e)?r.delete(e):r.add(e),r})},[]),N=(0,w.useCallback)(e=>{u(e.active.id)},[]),C=(0,w.useCallback)(e=>{let{over:t}=e;if(!t){h(null),m(null);return}let r=t.id;r.startsWith("gap:")?(m(r),h(null)):(r.startsWith("column:")?h(null):h(r),m(null))},[]),S=(0,w.useCallback)(t=>{let{active:r,over:a}=t;if(u(null),h(null),m(null),!a)return;let n=r.id,i=a.id,o=e.find(e=>e.id===n);if(o){if(i.startsWith("gap:")){let t=i.split(":"),r=t[1],a=parseInt(t[2]);if(o.parentId){let t=e.find(e=>e.id===o.parentId);if(t?.column==="suggested"&&"suggested"!==r)return}s&&s(n,r,a);return}if(l)if(i.startsWith("column:")){let t=i.replace("column:","");if(o.parentId){let r=e.find(e=>e.id===o.parentId);if(r?.column==="suggested"&&"suggested"!==t)return}o.column!==t&&l(n,t,o.parentId)}else{let t=e.find(e=>e.id===i);if(t&&n!==i){if(t.parentId||o.parentId===i)return;l(n,t.column,i)}}}},[l,s,e]),E=(0,w.useCallback)(()=>{u(null),h(null),m(null)},[]);return(0,k.jsxs)(tu,{sensors:p,collisionDetection:ef,onDragStart:N,onDragOver:C,onDragEnd:S,onDragCancel:E,autoScroll:{enabled:!0,threshold:{x:.05,y:.15},interval:10,acceleration:5},children:[(0,k.jsx)("div",{ref:f,className:"flex gap-4 overflow-x-auto pb-4 lg:grid lg:grid-cols-6 lg:overflow-x-visible",children:tP.map(e=>{let l=b.filter(t=>t.column===e.id);return(0,k.jsxs)("div",{className:"flex-shrink-0 w-[85vw] sm:w-[70vw] lg:w-auto rounded-xl border border-gray-200 dark:border-gray-800/50 bg-gray-50/50 dark:bg-gray-950/30 p-3 flex flex-col",children:[(0,k.jsxs)("div",{className:"flex items-center gap-2 mb-3 px-1",children:[(0,k.jsx)("span",{className:`w-2.5 h-2.5 rounded-full ${e.dotColor}`}),(0,k.jsx)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:e.title}),(0,k.jsx)("span",{className:"text-xs text-gray-400 dark:text-gray-600 ml-1",children:l.length})]}),(0,k.jsx)(t$,{id:e.id,children:0!==l.length||c?(0,k.jsxs)("div",{className:"space-y-1",children:[l.map((l,s)=>{let d=v.get(l.id)||[];return(0,k.jsxs)("div",{children:[c&&(0,k.jsx)(tW,{id:`gap:${e.id}:${s}`,isActive:x===`gap:${e.id}:${s}`}),(0,k.jsx)(tz,{task:l,subTasks:d,isExpanded:o.has(l.id),onToggleExpand:()=>j(l.id),dropTargetId:g,onEdit:t,onArchive:r,onDelete:a,onRestore:n,onAddSubTask:i})]},l.id)}),c&&(0,k.jsx)(tW,{id:`gap:${e.id}:${l.length}`,isActive:x===`gap:${e.id}:${l.length}`})]}):(0,k.jsx)("div",{className:"border-2 border-dashed border-gray-200 dark:border-gray-800/30 rounded-xl p-6 text-center",children:(0,k.jsx)("p",{className:"text-xs text-gray-400 dark:text-gray-600",children:"No tasks"})})})]},e.id)})}),(0,k.jsx)(tN,{children:y?(0,k.jsx)(tB,{task:y,subTasks:v.get(y.id)||[],isDragOverlay:!0,onEdit:()=>{},onArchive:()=>{},onDelete:()=>{}}):null})]})}let tU={Ezra:"bg-amber-400"};function tY({activities:e}){return(0,k.jsxs)("div",{className:"bg-white dark:bg-gray-900/40 backdrop-blur-sm border border-gray-200 dark:border-gray-800/50 rounded-xl p-4",children:[(0,k.jsxs)("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-4 flex items-center gap-2",children:[(0,k.jsx)("span",{className:"w-2 h-2 rounded-full bg-emerald-400 animate-pulse"}),"Activity"]}),(0,k.jsxs)("div",{className:"space-y-4",children:[e.map(e=>(0,k.jsxs)("div",{className:"flex gap-3",children:[(0,k.jsxs)("div",{className:"flex flex-col items-center",children:[(0,k.jsx)("div",{className:`w-2 h-2 rounded-full mt-1.5 flex-shrink-0 ${tU[e.agent]||"bg-gray-400 dark:bg-gray-700"}`}),(0,k.jsx)("div",{className:"w-px flex-1 bg-gray-200 dark:bg-gray-800/50"})]}),(0,k.jsxs)("div",{className:"pb-4",children:[(0,k.jsx)("p",{className:"text-[10px] text-amber-500 dark:text-amber-400/70 font-medium mb-0.5",children:e.agent}),(0,k.jsx)("p",{className:"text-xs text-gray-700 dark:text-gray-300 leading-relaxed",children:e.message}),(0,k.jsx)("p",{className:"text-[10px] text-gray-400 dark:text-gray-600 mt-1",children:S(e.timestamp)})]})]},e.id)),0===e.length&&(0,k.jsx)("p",{className:"text-xs text-gray-400 dark:text-gray-600 text-center py-4",children:"No activity yet"})]})]})}function tX({isOpen:e,onClose:t,onSave:r,editingTask:a,projects:n,tasks:l,preselectedParentId:s}){let[i,o]=(0,w.useState)(""),[d,c]=(0,w.useState)(""),[u,g]=(0,w.useState)("backlog"),[h,x]=(0,w.useState)("Ezra"),[m,f]=(0,w.useState)(""),[p,b]=(0,w.useState)(""),[v,y]=(0,w.useState)(!1),[j,N]=(0,w.useState)(null);if((0,w.useEffect)(()=>{if(a)o(a.title),c(a.description),g(a.column),x(a.agent),f(a.project),b(a.parentId||"");else{o(""),c("");let e=s?l.find(e=>e.id===s):null;g(e?e.column:"backlog"),x("Ezra"),f(e?e.project:n[0]?.id||""),b(s||"")}N(null),y(!1)},[a,e,n]),!e)return null;let C=l.filter(e=>!e.parentId&&e.id!==a?.id),S=!!p,E=p?l.find(e=>e.id===p):null,M=async e=>{if(e.preventDefault(),i.trim()){y(!0),N(null);try{await r({title:i,description:d,column:u,agent:h,agentColor:"#f59e0b",project:m||n[0]?.id||"",parentId:p||null}),t()}catch(e){N(e instanceof Error?e.message:"Failed to save task")}finally{y(!1)}}},D="w-full bg-gray-100 dark:bg-gray-800/60 border border-gray-300 dark:border-gray-700/50 text-gray-900 dark:text-gray-200 text-sm rounded-lg px-3 py-2.5 focus:outline-none focus:border-amber-500/50 transition-colors min-h-[44px]";return(0,k.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,k.jsx)("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:v?void 0:t}),(0,k.jsx)("div",{className:"relative bg-white dark:bg-gray-900/95 backdrop-blur-xl border border-gray-200 dark:border-gray-800/50 rounded-2xl w-full max-w-lg shadow-2xl",children:(0,k.jsxs)("div",{className:"p-6",children:[(0,k.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-6",children:a?"Edit Task":"New Task"}),j&&(0,k.jsx)("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-500/10 border border-red-200 dark:border-red-500/20 rounded-lg text-sm text-red-600 dark:text-red-400",children:j}),(0,k.jsxs)("form",{onSubmit:M,className:"space-y-4",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-xs text-gray-500 mb-1.5",children:"Title"}),(0,k.jsx)("input",{type:"text",value:i,onChange:e=>o(e.target.value),className:D,placeholder:"What needs to be done?",autoFocus:!0,disabled:v})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-xs text-gray-500 mb-1.5",children:"Description"}),(0,k.jsx)("textarea",{value:d,onChange:e=>c(e.target.value),className:`${D} min-h-[88px] resize-none`,placeholder:"Add details...",rows:3,disabled:v})]}),(0,k.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-xs text-gray-500 mb-1.5",children:"Column"}),(0,k.jsx)("select",{value:u,onChange:e=>g(e.target.value),className:D,disabled:v,children:tP.filter(e=>"archived"!==e.id&&(!S||E?.column!=="suggested"||"suggested"===e.id)).map(e=>(0,k.jsx)("option",{value:e.id,children:e.title},e.id))})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-xs text-gray-500 mb-1.5",children:"Project"}),(0,k.jsx)("select",{value:m,onChange:e=>f(e.target.value),className:D,disabled:v,children:n.map(e=>(0,k.jsx)("option",{value:e.id,children:e.name},e.id))})]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-xs text-gray-500 mb-1.5",children:"Parent task (optional)"}),(0,k.jsxs)("select",{value:p,onChange:e=>b(e.target.value),className:D,disabled:v,children:[(0,k.jsx)("option",{value:"",children:"None (top-level task)"}),C.map(e=>(0,k.jsx)("option",{value:e.id,children:e.title},e.id))]})]}),(0,k.jsxs)("div",{className:"flex justify-end gap-3 pt-2",children:[(0,k.jsx)("button",{type:"button",onClick:t,disabled:v,className:"px-4 py-2 text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 transition-colors min-h-[44px] disabled:opacity-50",children:"Cancel"}),(0,k.jsxs)("button",{type:"submit",disabled:v,className:"px-5 py-2 bg-amber-500 hover:bg-amber-400 text-gray-950 font-semibold text-sm rounded-lg transition-colors min-h-[44px] disabled:opacity-70 flex items-center gap-2",children:[v&&(0,k.jsxs)("svg",{className:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[(0,k.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,k.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),a?"Save Changes":"Create Task"]})]})]})]})})]})}let tK=["#f59e0b","#3b82f6","#10b981","#8b5cf6","#6366f1","#ec4899","#ef4444","#14b8a6","#f97316","#84cc16"],tV=[{value:"active",label:"Active"},{value:"suggested",label:"Suggested"},{value:"completed",label:"Completed"},{value:"archived",label:"Archived"}];function tJ({isOpen:e,onClose:t,onSave:r,editingProject:a}){let[n,l]=(0,w.useState)(""),[s,i]=(0,w.useState)(""),[o,d]=(0,w.useState)(tK[0]),[c,u]=(0,w.useState)("active");return((0,w.useEffect)(()=>{a?(l(a.name),i(a.description),d(a.color),u(a.status||"active")):(l(""),i(""),d(tK[Math.floor(Math.random()*tK.length)]),u("active"))},[a,e]),e)?(0,k.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,k.jsx)("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:t}),(0,k.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n.trim()&&(r({name:n.trim(),description:s.trim(),color:o,status:c}),t())},className:"relative bg-white dark:bg-gray-900 rounded-2xl border border-gray-200 dark:border-gray-800/50 shadow-xl w-full max-w-md p-6 space-y-4",children:[(0,k.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:a?"Edit Project":"New Project"}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Name"}),(0,k.jsx)("input",{type:"text",value:n,onChange:e=>l(e.target.value),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-800/60 border border-gray-200 dark:border-gray-700 rounded-lg text-sm text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-amber-500/50",placeholder:"Project name",autoFocus:!0})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Description"}),(0,k.jsx)("textarea",{value:s,onChange:e=>i(e.target.value),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-800/60 border border-gray-200 dark:border-gray-700 rounded-lg text-sm text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-amber-500/50 resize-none",rows:2,placeholder:"Brief description"})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-2",children:"Color"}),(0,k.jsx)("div",{className:"flex gap-2 flex-wrap",children:tK.map(e=>(0,k.jsx)("button",{type:"button",onClick:()=>d(e),className:`w-7 h-7 rounded-full transition-all ${o===e?"ring-2 ring-offset-2 ring-amber-500 dark:ring-offset-gray-900 scale-110":"hover:scale-110"}`,style:{backgroundColor:e}},e))})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Status"}),(0,k.jsx)("select",{value:c,onChange:e=>u(e.target.value),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-800/60 border border-gray-200 dark:border-gray-700 rounded-lg text-sm text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-amber-500/50",children:tV.map(e=>(0,k.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,k.jsxs)("div",{className:"flex justify-end gap-3 pt-2",children:[(0,k.jsx)("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors",children:"Cancel"}),(0,k.jsx)("button",{type:"submit",className:"px-4 py-2 bg-amber-500 hover:bg-amber-600 text-white text-sm font-medium rounded-lg transition-colors",children:a?"Save":"Create"})]})]})]}):null}let t_=[{status:"active",label:"Active Projects",icon:"🚀",emptyText:"No active projects"},{status:"suggested",label:"Suggested",icon:"💡",emptyText:"No suggested projects"},{status:"completed",label:"Completed",icon:"✅",emptyText:"No completed projects"},{status:"archived",label:"Archived",icon:"📦",emptyText:"No archived projects"}];function tq({projects:e,tasks:t,onEditTask:r,onArchiveTask:a,onDeleteTask:n,onRestoreTask:l,onMoveTask:s,onReorderTask:i,onAddSubTask:o,onNewProject:d,onEditProject:c,onUpdateProjectStatus:u}){let[g,h]=(0,w.useState)(null),[x,m]=(0,w.useState)(new Set(["completed","archived"]));if(g){let d=e.find(e=>e.id===g),u=t.filter(e=>e.project===g);return(0,k.jsxs)("div",{className:"space-y-4",children:[(0,k.jsxs)("button",{onClick:()=>h(null),className:"flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 transition-colors min-h-[44px]",children:[(0,k.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})}),"Back to projects"]}),(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[(0,k.jsx)("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:d?.color}}),d?.name,d?.status&&(0,k.jsx)("span",{className:"text-xs font-normal px-2 py-0.5 rounded-full bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400",children:d.status})]}),d&&c&&(0,k.jsx)("button",{onClick:()=>c(d),className:"text-xs text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:"Edit project"})]}),(0,k.jsx)(tH,{tasks:u,onEditTask:r,onArchiveTask:a,onDeleteTask:n,onRestoreTask:l,onMoveTask:s,onReorderTask:i,onAddSubTask:o})]})}return(0,k.jsxs)("div",{className:"space-y-6",children:[(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Projects"}),d&&(0,k.jsxs)("button",{onClick:d,className:"flex items-center gap-2 px-4 py-2 bg-amber-500 hover:bg-amber-600 text-white text-sm font-medium rounded-lg transition-colors",children:[(0,k.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),"New Project"]})]}),t_.map(({status:r,label:a,icon:n,emptyText:l})=>{let s=e.filter(e=>(e.status||"active")===r),i=x.has(r);return(0,k.jsxs)("div",{children:[(0,k.jsxs)("button",{onClick:()=>{m(e=>{let t=new Set(e);return t.has(r)?t.delete(r):t.add(r),t})},className:"flex items-center gap-2 mb-3 text-sm font-medium text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200 transition-colors",children:[(0,k.jsx)("span",{children:n}),(0,k.jsx)("span",{children:a}),(0,k.jsxs)("span",{className:"text-xs text-gray-400 dark:text-gray-600",children:["(",s.length,")"]}),(0,k.jsx)("svg",{className:`w-3.5 h-3.5 transition-transform ${i?"":"rotate-180"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})})]}),!i&&(s.length>0?(0,k.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(e=>{let a=t.filter(t=>t.project===e.id).filter(e=>"archived"!==e.column),n=a.filter(e=>"backlog"===e.column).length,l=a.filter(e=>"in-progress"===e.column||"review"===e.column).length,s=a.filter(e=>"done"===e.column).length,i=a.length,o=i>0?Math.round(s/i*100):0;return(0,k.jsxs)("div",{className:"relative text-left bg-white dark:bg-gray-900/60 border border-gray-200 dark:border-gray-800/50 rounded-xl p-5 hover:border-amber-400 dark:hover:border-amber-500/30 hover:shadow-lg transition-all duration-200",style:{borderLeftColor:e.color,borderLeftWidth:4},children:[(0,k.jsxs)("button",{onClick:()=>h(e.id),className:"block w-full text-left",children:[(0,k.jsx)("h3",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 mb-1",children:e.name}),(0,k.jsx)("p",{className:"text-xs text-gray-500 mb-4 line-clamp-2",children:e.description}),(0,k.jsxs)("div",{className:"flex items-center gap-3 text-[11px]",children:[(0,k.jsxs)("span",{className:"text-gray-400",children:[n," backlog"]}),(0,k.jsxs)("span",{className:"text-blue-500 dark:text-blue-400",children:[l," active"]}),(0,k.jsxs)("span",{className:"text-emerald-500 dark:text-emerald-400",children:[s," done"]})]}),(0,k.jsx)("div",{className:"mt-3 w-full bg-gray-200 dark:bg-gray-800 rounded-full h-1.5",children:(0,k.jsx)("div",{className:"bg-emerald-500 h-1.5 rounded-full transition-all",style:{width:`${o}%`}})}),(0,k.jsxs)("p",{className:"text-[10px] text-gray-400 dark:text-gray-600 mt-1",children:[o,"% complete · ",i," tasks"]})]}),u&&(0,k.jsxs)("div",{className:"absolute top-3 right-3 flex items-center gap-1",children:["active"!==r&&(0,k.jsx)("button",{onClick:()=>u(e.id,"active"),className:"p-1 rounded text-[10px] text-gray-400 hover:text-emerald-500 hover:bg-emerald-50 dark:hover:bg-emerald-500/10 transition-colors",title:"Activate",children:"🚀"}),"completed"!==r&&(0,k.jsx)("button",{onClick:()=>u(e.id,"completed"),className:"p-1 rounded text-[10px] text-gray-400 hover:text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-500/10 transition-colors",title:"Complete",children:"✅"}),"archived"!==r&&(0,k.jsx)("button",{onClick:()=>u(e.id,"archived"),className:"p-1 rounded text-[10px] text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-500/10 transition-colors",title:"Archive",children:"📦"})]})]},e.id)})}):(0,k.jsx)("p",{className:"text-xs text-gray-400 dark:text-gray-600 pl-6",children:l}))]},r)})]})}function tG(){let[e,t]=(0,w.useState)([]),[r,a]=(0,w.useState)({});(0,w.useEffect)(()=>{Promise.resolve([{id:"morning-brief",name:"Morning Brief",description:"Daily briefing at 9am ET",schedule:"0 14 * * *",enabled:!0,lastRun:null,status:"active",nextRun:"",type:"cron"},{id:"work-sprint",name:"Work Sprint",description:"4x daily autonomous work sessions",schedule:"0 15,18,21,0 * * *",enabled:!0,lastRun:null,status:"active",nextRun:"",type:"cron"},{id:"idea-generator",name:"Idea Generator",description:"M/W/F business ideas",schedule:"0 16 * * 1,3,5",enabled:!0,lastRun:null,status:"active",nextRun:"",type:"cron"},{id:"health-check",name:"System Health Check",description:"Every 30min infra check",schedule:"*/30 * * * *",enabled:!0,lastRun:null,status:"active",nextRun:"",type:"cron"},{id:"eod-report",name:"EOD Report",description:"End of day summary",schedule:"0 23 * * 1-5",enabled:!0,lastRun:null,status:"active",nextRun:"",type:"cron"}]).then(e=>{t(e);let r={};e.forEach(e=>{r[e.id]="active"===e.status}),a(r)})},[]);let n=e.length,l=Object.values(r).filter(Boolean).length,s=e.filter(e=>"cron"===e.type).length,i=e.filter(e=>"heartbeat"===e.type).length;return(0,k.jsxs)("div",{className:"space-y-6",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Automations"}),(0,k.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Crons, heartbeats, and scheduled workflows"})]}),(0,k.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[{label:"Total",value:n,color:"text-gray-900 dark:text-gray-100"},{label:"Active",value:l,color:"text-emerald-500 dark:text-emerald-400"},{label:"Cron Jobs",value:s,color:"text-blue-500 dark:text-blue-400"},{label:"Heartbeats",value:i,color:"text-amber-500 dark:text-amber-400"}].map(e=>(0,k.jsxs)("div",{className:"bg-white dark:bg-gray-900/40 backdrop-blur-sm border border-gray-200 dark:border-gray-800/50 rounded-xl p-4",children:[(0,k.jsx)("div",{className:`text-2xl font-bold ${e.color}`,children:e.value}),(0,k.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:e.label})]},e.label))}),(0,k.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:e.map(e=>{let t=r[e.id]??!0;return(0,k.jsxs)("div",{className:"group bg-white dark:bg-gray-900/40 backdrop-blur-sm border border-gray-200 dark:border-gray-800/50 rounded-xl p-5 transition-all duration-200 hover:border-gray-300 dark:hover:border-gray-700/60 hover:shadow-lg dark:hover:shadow-amber-500/5",children:[(0,k.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,k.jsxs)("div",{className:"flex items-center gap-2.5 min-w-0",children:[(0,k.jsx)("span",{className:"relative flex h-2.5 w-2.5 flex-shrink-0",children:t?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"}),(0,k.jsx)("span",{className:"relative inline-flex rounded-full h-2.5 w-2.5 bg-emerald-500"})]}):(0,k.jsx)("span",{className:"relative inline-flex rounded-full h-2.5 w-2.5 bg-gray-400 dark:bg-gray-600"})}),(0,k.jsx)("h3",{className:"font-semibold text-sm text-gray-900 dark:text-gray-100 truncate",children:e.name})]}),(0,k.jsx)("span",{className:`flex-shrink-0 text-[10px] font-medium px-2 py-0.5 rounded-full ${"cron"===e.type?"bg-blue-50 dark:bg-blue-500/15 text-blue-500 dark:text-blue-400 border border-blue-200 dark:border-blue-500/20":"bg-amber-50 dark:bg-amber-500/15 text-amber-500 dark:text-amber-400 border border-amber-200 dark:border-amber-500/20"}`,children:e.type})]}),(0,k.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 line-clamp-2 mb-3 leading-relaxed",children:e.description}),(0,k.jsx)("div",{className:"text-[11px] font-mono text-gray-500 mb-1",children:e.schedule}),(0,k.jsxs)("div",{className:"text-[11px] text-gray-400 dark:text-gray-600 mb-4",children:["Next: ",e.nextRun]}),(0,k.jsxs)("div",{className:"flex items-center justify-between pt-3 border-t border-gray-200 dark:border-gray-800/40",children:[(0,k.jsx)("span",{className:"text-[11px] text-gray-500",children:t?"Enabled":"Disabled"}),(0,k.jsx)("button",{onClick:()=>a(t=>({...t,[e.id]:!t[e.id]})),className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors duration-200 ${t?"bg-emerald-500/80":"bg-gray-300 dark:bg-gray-700"}`,children:(0,k.jsx)("span",{className:`inline-block h-3.5 w-3.5 rounded-full bg-white transition-transform duration-200 ${t?"translate-x-[18px]":"translate-x-[3px]"}`})})]})]},e.id)})})]})}let tQ=["tasks","projects","automations","team"];function tZ(){let e=window.location.hash.replace("#","");return tQ.includes(e)?e:"tasks"}function t0(){let[e,t]=(0,w.useState)("tasks"),[r,a]=(0,w.useState)(!1),[n,l]=(0,w.useState)([]),[s,i]=(0,w.useState)([]),[o,d]=(0,w.useState)([]),[c,u]=(0,w.useState)(!1),[g,h]=(0,w.useState)(null),[x,m]=(0,w.useState)(null),[f,p]=(0,w.useState)(null),[b,v]=(0,w.useState)(null),[y,S]=(0,w.useState)(!1),[E,D]=(0,w.useState)(null);(0,w.useEffect)(()=>{t(tZ());let e=()=>t(tZ());return window.addEventListener("hashchange",e),()=>window.removeEventListener("hashchange",e)},[]);let A=(0,w.useCallback)(e=>{window.location.hash=e},[]),O=(0,w.useCallback)(async()=>{try{let[e,t,r]=await Promise.all([j("/api/tasks"),j("/api/projects"),j("/api/activities")]);l(e),i(t),d(r)}catch(e){console.error("Failed to load data:",e)}},[]);(0,w.useEffect)(()=>{O()},[O]);let P=n.filter(e=>(!f||e.agent===f)&&(!b||e.project===b)),I=(0,w.useCallback)(()=>{h(null),m(null),u(!0)},[]),B=(0,w.useCallback)(e=>{h(null),m(e),u(!0)},[]),$=(0,w.useCallback)(e=>{h(e),u(!0)},[]),W=(0,w.useCallback)(async e=>{try{let t=n.find(t=>t.id===e);await N(e,{column:"archived",previousColumn:t?.column||"backlog"}),await O()}catch(e){console.error("Failed to archive task:",e)}},[O,n]),z=(0,w.useCallback)(async e=>{try{await j(`/api/tasks/?id=${e}`,{method:"DELETE"}),await O()}catch(e){console.error("Failed to delete task:",e)}},[O]),F=(0,w.useCallback)(async e=>{try{let t=n.find(t=>t.id===e),r=t?.previousColumn||"backlog";await N(e,{column:r,previousColumn:null}),await O()}catch(e){console.error("Failed to restore task:",e)}},[O]),[H,U]=(0,w.useState)(!1),Y=(0,w.useCallback)(async(e,t,r)=>{try{let a,l=["suggested","backlog","in-progress","review","done","archived"],s=n.find(t=>t.id===e);if(!s)return;let i={column:t};void 0!==r&&(i.parentId=r);let o=l.indexOf(t)>(a=s.column,l.indexOf(a));if(s.parentId){let a=n.find(e=>e.id===s.parentId);if(a&&"suggested"===a.column&&"suggested"!==t)return;if(r&&r!==s.parentId){let e=n.find(e=>e.id===r);e&&(i.column=e.column)}if(await N(e,i),"done"===t&&s.parentId){let t=n.filter(t=>t.parentId===s.parentId&&t.id!==e).every(e=>"done"===e.column),r=n.find(e=>e.id===s.parentId);t&&r&&"done"!==r.column&&confirm(`All sub-tasks are now done. Mark "${r.title}" as done too?`)&&await N(r.id,{column:"done"})}await O();return}let d=n.filter(t=>t.parentId===e);if("archived"===t){if(d.length>0&&!confirm(`This will also archive ${d.length} sub-task${d.length>1?"s":""}. Continue?`))return;for(let t of(await N(e,i),d))await N(t.id,{column:"archived"})}else if(o){if("done"===t&&d.length>0){let e=d.filter(e=>"done"!==e.column);if(e.length>0){if(!confirm(`${e.length} sub-task${e.length>1?"s are":" is"} not done yet. Mark all as done?`))return;for(let t of e)await N(t.id,{column:"done"})}}else for(let e of d.filter(e=>{let r;return r=e.column,l.indexOf(r)<l.indexOf(t)&&"done"!==e.column}))await N(e.id,{column:t});await N(e,i)}else{let r=d.filter(e=>{let r;return r=e.column,l.indexOf(r)>l.indexOf(t)});if(r.length>0){let e=tP.find(e=>e.id===t)?.title||t;if(!confirm(`Moving backward will also move ${r.length} sub-task${r.length>1?"s":""} back to "${e}". Continue?`))return;for(let e of r)await N(e.id,{column:t})}await N(e,i)}await O()}catch(e){console.error("Failed to move task:",e)}},[O,n]),X=(0,w.useCallback)(async(e,t,r)=>{try{await j("/api/tasks",{method:"PATCH",body:JSON.stringify({id:e,column:t,index:r})}),await O()}catch(e){console.error("Failed to reorder task:",e)}},[O]),K=(0,w.useCallback)(()=>{D(null),S(!0)},[]),V=(0,w.useCallback)(e=>{D(e),S(!0)},[]),J=(0,w.useCallback)(async e=>{try{if(E)await C(E.id,e);else await j("/api/projects",{method:"POST",body:JSON.stringify(e)});await O()}catch(e){console.error("Failed to save project:",e)}},[E,O]),_=(0,w.useCallback)(async(e,t)=>{try{await C(e,{status:t}),await O()}catch(e){console.error("Failed to update project status:",e)}},[O]),q=(0,w.useCallback)(async e=>{g?await N(g.id,e):await j("/api/tasks",{method:"POST",body:JSON.stringify(e)}),await O()},[g,O]);return(0,k.jsxs)("div",{className:"flex h-screen overflow-hidden",children:[(0,k.jsx)(M,{activeTab:e,onTabChange:A}),r&&(0,k.jsxs)("div",{className:"fixed inset-0 z-40 md:hidden",children:[(0,k.jsx)("div",{className:"absolute inset-0 bg-black/50",onClick:()=>a(!1)}),(0,k.jsxs)("aside",{className:"absolute left-0 top-0 bottom-0 w-64 bg-white/95 dark:bg-gray-900/95 backdrop-blur-xl border-r border-gray-200 dark:border-gray-800/50 z-50",children:[(0,k.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-800/50",children:[(0,k.jsxs)("div",{className:"flex items-center gap-2",children:[(0,k.jsx)("span",{className:"text-lg",children:"⚡"}),(0,k.jsx)("span",{className:"font-semibold text-sm text-gray-900 dark:text-gray-100",children:"Mission Control"})]}),(0,k.jsx)("button",{onClick:()=>a(!1),className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800/60 text-gray-500 dark:text-gray-400 min-w-[44px] min-h-[44px] flex items-center justify-center",children:(0,k.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),(0,k.jsx)("nav",{className:"p-3 space-y-1",children:[{id:"tasks",label:"Tasks"},{id:"projects",label:"Projects"},{id:"automations",label:"Automations"},{id:"team",label:"Team"}].map(t=>(0,k.jsx)("a",{href:`#${t.id}`,onClick:e=>{e.preventDefault(),A(t.id),a(!1)},className:`block w-full text-left px-4 py-3 rounded-lg text-sm font-medium transition-all min-h-[44px] ${e===t.id?"bg-amber-500/10 text-amber-500 dark:text-amber-400 border border-amber-500/20":"text-gray-500 dark:text-gray-300 hover:text-gray-700 dark:hover:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-800/40"}`,children:t.label},t.id))})]})]}),(0,k.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,k.jsx)(T,{onMenuToggle:()=>a(!0)}),"tasks"===e?(0,k.jsxs)("main",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,k.jsxs)("div",{className:"flex flex-col lg:flex-row flex-1 min-h-0",children:[(0,k.jsxs)("div",{className:"flex-1 p-4 md:p-6 space-y-5 overflow-y-auto",children:[(0,k.jsx)(L,{tasks:n}),(0,k.jsx)(R,{selectedAgent:f,selectedProject:b,onAgentChange:p,onProjectChange:v,onNewTask:I,projects:s,tasks:n}),(0,k.jsx)(tH,{tasks:P,onEditTask:$,onArchiveTask:W,onDeleteTask:z,onRestoreTask:F,onMoveTask:Y,onReorderTask:X,onAddSubTask:B})]}),(0,k.jsx)("div",{className:"hidden lg:block w-72 xl:w-80 flex-shrink-0 p-6 pl-0",children:(0,k.jsx)(tY,{activities:o})})]}),(0,k.jsxs)("div",{className:"lg:hidden border-t border-gray-200 dark:border-gray-800/50 flex-shrink-0",children:[(0,k.jsxs)("button",{onClick:()=>U(!H),className:"w-full flex items-center justify-between px-4 py-2 text-xs font-medium text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 transition-colors",children:[(0,k.jsxs)("span",{className:"flex items-center gap-2",children:[(0,k.jsx)("span",{className:"w-2 h-2 rounded-full bg-emerald-400 animate-pulse"}),"Activity (",o.length,")"]}),(0,k.jsx)("svg",{className:`w-4 h-4 transition-transform ${H?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 15.75l7.5-7.5 7.5 7.5"})})]}),H&&(0,k.jsx)("div",{className:"max-h-[150px] overflow-y-auto px-4 pb-3",children:(0,k.jsx)(tY,{activities:o})})]})]}):"projects"===e?(0,k.jsx)("main",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:(0,k.jsx)(tq,{projects:s,tasks:n,onEditTask:$,onArchiveTask:W,onDeleteTask:z,onRestoreTask:F,onMoveTask:Y,onReorderTask:X,onAddSubTask:B,onNewProject:K,onEditProject:V,onUpdateProjectStatus:_})}):"automations"===e?(0,k.jsx)("main",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:(0,k.jsx)(tG,{})}):(0,k.jsx)("main",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:(0,k.jsxs)("div",{className:"bg-white dark:bg-gray-900/40 backdrop-blur-sm border border-gray-200 dark:border-gray-800/50 rounded-xl p-8 text-center",children:[(0,k.jsx)("div",{className:"text-4xl mb-4",children:"🤖"}),(0,k.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-200 mb-2",children:"Team"}),(0,k.jsx)("p",{className:"text-sm text-gray-500 max-w-md mx-auto",children:"Your AI sub-agents and team members will appear here. This view is coming soon as your agent team grows."})]})})]}),(0,k.jsx)(tX,{isOpen:c,onClose:()=>{u(!1),h(null),m(null)},onSave:q,editingTask:g,projects:s,tasks:n,preselectedParentId:x}),(0,k.jsx)(tJ,{isOpen:y,onClose:()=>{S(!1),D(null)},onSave:J,editingProject:E})]})}e.s(["default",()=>t0],31713)}]);