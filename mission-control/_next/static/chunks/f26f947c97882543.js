(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31713,e=>{"use strict";let t;var r,a,l,n,s,i,o,d,c,u,g,h,x,m,f,p,b,v,y,k=e.i(43476),w=e.i(71645);async function j(e,t){let r=`https://heather-duplicate-having-domestic.trycloudflare.com${e}${e.includes("?")?"":"/"}`,a=await fetch(r,{...t,headers:{"Content-Type":"application/json",...t?.headers}});if(!a.ok)throw Error(`API error: ${a.status}`);return a.json()}e.i(47167);let N=e=>j("/api/tasks",{method:"POST",body:JSON.stringify(e)}),C=(e,t)=>j("/api/tasks",{method:"PUT",body:JSON.stringify({id:e,...t})}),S=(e,t,r)=>j("/api/tasks",{method:"PATCH",body:JSON.stringify({id:e,column:t,index:r})}),M=(e,t)=>j("/api/projects",{method:"PUT",body:JSON.stringify({id:e,...t})});function E(e){let t=Math.floor((Date.now()-new Date(e).getTime())/1e3);if(t<60)return"just now";let r=Math.floor(t/60);if(r<60)return`${r}m ago`;let a=Math.floor(r/60);if(a<24)return`${a}h ago`;let l=Math.floor(a/24);return`${l}d ago`}let L=[{id:"dashboard",label:"Dashboard",icon:(0,k.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6A2.25 2.25 0 016 3.75h2.25A2.25 2.25 0 0110.5 6v2.25a2.25 2.25 0 01-2.25 2.25H6a2.25 2.25 0 01-2.25-2.25V6zM3.75 15.75A2.25 2.25 0 016 13.5h2.25a2.25 2.25 0 012.25 2.25V18a2.25 2.25 0 01-2.25 2.25H6A2.25 2.25 0 013.75 18v-2.25zM13.5 6a2.25 2.25 0 012.25-2.25H18A2.25 2.25 0 0120.25 6v2.25A2.25 2.25 0 0118 10.5h-2.25a2.25 2.25 0 01-2.25-2.25V6zM13.5 15.75a2.25 2.25 0 012.25-2.25H18a2.25 2.25 0 012.25 2.25V18A2.25 2.25 0 0118 20.25h-2.25A2.25 2.25 0 0113.5 18v-2.25z"})})},{id:"board",label:"Board",icon:(0,k.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})},{id:"workspace",label:"Workspace",icon:(0,k.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12.75V12A2.25 2.25 0 014.5 9.75h15A2.25 2.25 0 0121.75 12v.75m-8.69-6.44l-2.12-2.12a1.5 1.5 0 00-1.061-.44H4.5A2.25 2.25 0 002.25 6v12a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9a2.25 2.25 0 00-2.25-2.25h-5.379a1.5 1.5 0 01-1.06-.44z"})})},{id:"timeline",label:"Timeline",icon:(0,k.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"})})},{id:"projects",label:"Projects",icon:(0,k.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75z"})})},{id:"team",label:"Team",icon:(0,k.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-3.07M12 6.375a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zm8.25 2.25a2.625 2.625 0 11-5.25 0 2.625 2.625 0 015.25 0z"})})}];function D({activeTab:e,onTabChange:t}){let[r,a]=(0,w.useState)(!1);return(0,k.jsxs)("aside",{className:`hidden md:flex flex-col ${r?"w-16":"w-56"} bg-white/80 dark:bg-gray-900/40 backdrop-blur-xl border-r border-gray-200 dark:border-gray-800/50 transition-all duration-300 ease-in-out flex-shrink-0`,children:[(0,k.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-800/50",children:[!r&&(0,k.jsxs)("div",{className:"flex items-center gap-2",children:[(0,k.jsx)("span",{className:"text-lg",children:"⚡"}),(0,k.jsx)("span",{className:"font-semibold text-sm text-gray-900 dark:text-gray-100",children:"Mission Control"})]}),(0,k.jsx)("button",{onClick:()=>a(!r),className:"p-1.5 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800/60 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 transition-colors min-w-[36px] min-h-[36px] flex items-center justify-center",children:(0,k.jsx)("svg",{className:`w-4 h-4 transition-transform duration-300 ${r?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})})})]}),(0,k.jsx)("nav",{className:"flex-1 p-3 space-y-1",children:L.map(a=>(0,k.jsxs)("a",{href:`#${a.id}`,onClick:e=>{e.preventDefault(),t(a.id)},className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200 min-h-[44px] ${e===a.id?"bg-amber-500/10 text-amber-500 dark:text-amber-400 border border-amber-500/20":"text-gray-500 dark:text-gray-300 hover:text-gray-700 dark:hover:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-800/40"}`,title:r?a.label:void 0,children:[a.icon,!r&&(0,k.jsx)("span",{children:a.label})]},a.id))}),!r&&(0,k.jsx)("div",{className:"p-4 border-t border-gray-200 dark:border-gray-800/50",children:(0,k.jsxs)("div",{className:"flex items-center gap-2",children:[(0,k.jsx)("div",{className:"w-7 h-7 rounded-full bg-gradient-to-br from-amber-400 to-orange-500 flex items-center justify-center text-xs font-bold text-gray-950",children:"E"}),(0,k.jsxs)("div",{className:"text-xs",children:[(0,k.jsx)("div",{className:"text-gray-700 dark:text-gray-300 font-medium",children:"Ephraim"}),(0,k.jsx)("div",{className:"text-gray-400 dark:text-gray-500",children:"Owner"})]})]})})]})}var T=e.i(50208);function A({onMenuToggle:e}){let{mode:t,cycle:r}=(0,T.useTheme)(),a=function(){let[e,t]=(0,w.useState)(null);return(0,w.useEffect)(()=>{t(new Date);let e=setInterval(()=>t(new Date),6e4);return()=>clearInterval(e)},[]),e}(),l="dark"===t?(0,k.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z"})}):"light"===t?(0,k.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z"})}):(0,k.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 17.25v1.007a3 3 0 01-.879 2.122L7.5 21h9l-.621-.621A3 3 0 0115 18.257V17.25m6-12V15a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 15V5.25A2.25 2.25 0 015.25 3h13.5A2.25 2.25 0 0121 5.25z"})}),n="dark"===t?"Dark":"light"===t?"Light":"System";return(0,k.jsxs)("header",{className:"flex items-center justify-between px-4 py-3 bg-white/80 dark:bg-gray-900/60 backdrop-blur-xl border-b border-gray-200 dark:border-gray-800/50",children:[(0,k.jsx)("button",{onClick:e,className:"md:hidden p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800/60 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 transition-colors min-w-[44px] min-h-[44px] flex items-center justify-center",children:(0,k.jsx)("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})})}),(0,k.jsxs)("div",{className:"flex items-center gap-2 md:hidden",children:[(0,k.jsx)("span",{className:"text-lg",children:"⚡"}),(0,k.jsx)("span",{className:"font-semibold text-sm text-gray-900 dark:text-gray-100",children:"Mission Control"})]}),a&&(0,k.jsxs)("div",{className:"hidden md:flex items-center gap-3 text-xs text-gray-400 dark:text-gray-500 font-medium tabular-nums",children:[(0,k.jsx)("span",{children:a.toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"})}),(0,k.jsx)("span",{className:"text-gray-300 dark:text-gray-700",children:"·"}),(0,k.jsx)("span",{children:a.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"})})]}),!a&&(0,k.jsx)("div",{className:"hidden md:block"}),(0,k.jsxs)("button",{onClick:r,className:"flex items-center gap-2 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800/60 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 transition-colors min-w-[44px] min-h-[44px] justify-center",title:`Theme: ${n}`,children:[l,(0,k.jsx)("span",{className:"text-xs font-medium hidden sm:inline",children:n})]})]})}function I({tasks:e}){let t=e.filter(e=>"archived"!==e.column&&"suggested"!==e.column),r=e.filter(e=>"suggested"===e.column).length,a=t.filter(e=>"in-progress"===e.column).length,l=t.filter(e=>"done"===e.column).length,n=t.length,s=e.filter(e=>"archived"===e.column).length,i=n>0?Math.round(l/n*100):0,o=[...r>0?[{label:"Suggested",value:r.toString(),color:"text-purple-400"}]:[],{label:"Approved",value:n.toString(),color:"text-gray-900 dark:text-gray-100"},{label:"In progress",value:a.toString(),color:"text-blue-500 dark:text-blue-400"},{label:"Completion",value:`${i}%`,color:"text-emerald-500 dark:text-emerald-400"},...s>0?[{label:"Archived",value:s.toString(),color:"text-red-500 dark:text-red-400"}]:[]];return(0,k.jsx)("div",{className:"flex gap-3 overflow-x-auto pb-1 lg:grid lg:overflow-x-visible scrollbar-hide",style:{gridTemplateColumns:`repeat(${o.length}, minmax(0, 1fr))`},children:o.map(e=>(0,k.jsxs)("div",{className:"flex-shrink-0 min-w-[120px] lg:min-w-0 bg-white dark:bg-gray-900/40 backdrop-blur-sm border border-gray-200 dark:border-gray-800/50 rounded-xl px-4 py-3",children:[(0,k.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:e.label}),(0,k.jsx)("div",{className:`text-xl font-bold ${e.color}`,children:e.value}),"Completion"===e.label&&(0,k.jsx)("div",{className:"mt-2 h-1.5 w-full bg-gray-200 dark:bg-gray-800 rounded-full overflow-hidden",children:(0,k.jsx)("div",{className:"h-full rounded-full transition-all duration-700 ease-out",style:{width:`${i}%`,background:100===i?"linear-gradient(90deg, #10b981, #34d399)":"linear-gradient(90deg, #f59e0b, #10b981)"}})})]},e.label))})}function R({selectedAgent:e,selectedProject:t,onAgentChange:r,onProjectChange:a,onNewTask:l,projects:n,tasks:s}){let i=[...new Set(s.map(e=>e.agent).filter(Boolean))];return(0,k.jsxs)("div",{className:"flex flex-col gap-3 lg:flex-row lg:flex-wrap lg:items-center",children:[(0,k.jsxs)("button",{onClick:l,className:"w-full lg:w-auto flex items-center justify-center gap-1.5 px-4 py-2 bg-amber-500 hover:bg-amber-400 text-gray-950 font-semibold text-sm rounded-lg transition-colors min-h-[44px]",children:[(0,k.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),"New task"]}),(0,k.jsxs)("div",{className:"flex items-center gap-2 overflow-x-auto scrollbar-hide",children:[i.map(t=>(0,k.jsxs)("button",{onClick:()=>r(e===t?null:t),className:`flex-shrink-0 flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-medium transition-all min-h-[36px] ${e===t?"bg-amber-500/20 text-amber-500 dark:text-amber-400 border border-amber-500/30":"bg-gray-100 dark:bg-gray-800/60 text-gray-500 dark:text-gray-400 border border-gray-300 dark:border-gray-700/50 hover:border-gray-400 dark:hover:border-gray-600/50 hover:text-gray-700 dark:hover:text-gray-300"}`,children:[(0,k.jsx)("span",{className:"w-2 h-2 rounded-full bg-amber-400"}),t]},t)),(0,k.jsxs)("select",{value:t||"",onChange:e=>a(e.target.value||null),className:"flex-shrink-0 bg-gray-100 dark:bg-gray-800/60 border border-gray-300 dark:border-gray-700/50 text-gray-700 dark:text-gray-300 text-xs rounded-lg px-3 py-2 min-h-[36px] focus:outline-none focus:border-amber-500/50 transition-colors",children:[(0,k.jsx)("option",{value:"",children:"All projects"}),n.map(e=>(0,k.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]})}var O=e.i(74080);let $="u">typeof window&&void 0!==window.document&&void 0!==window.document.createElement;function P(e){let t=Object.prototype.toString.call(e);return"[object Window]"===t||"[object global]"===t}function B(e){return"nodeType"in e}function z(e){var t,r;return e?P(e)?e:B(e)&&null!=(t=null==(r=e.ownerDocument)?void 0:r.defaultView)?t:window:window}function W(e){let{Document:t}=z(e);return e instanceof t}function F(e){return!P(e)&&e instanceof z(e).HTMLElement}function U(e){return e instanceof z(e).SVGElement}function H(e){return e?P(e)?e.document:B(e)?W(e)?e:F(e)||U(e)?e.ownerDocument:document:document:document}let K=$?w.useLayoutEffect:w.useEffect;function X(e){let t=(0,w.useRef)(e);return K(()=>{t.current=e}),(0,w.useCallback)(function(){for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];return null==t.current?void 0:t.current(...r)},[])}function Y(e,t){void 0===t&&(t=[e]);let r=(0,w.useRef)(e);return K(()=>{r.current!==e&&(r.current=e)},t),r}function V(e,t){let r=(0,w.useRef)();return(0,w.useMemo)(()=>{let t=e(r.current);return r.current=t,t},[...t])}function J(e){let t=X(e),r=(0,w.useRef)(null),a=(0,w.useCallback)(e=>{e!==r.current&&(null==t||t(e,r.current)),r.current=e},[]);return[r,a]}function _(e){let t=(0,w.useRef)();return(0,w.useEffect)(()=>{t.current=e},[e]),t.current}let q={};function G(e,t){return(0,w.useMemo)(()=>{if(t)return t;let r=null==q[e]?0:q[e]+1;return q[e]=r,e+"-"+r},[e,t])}function Q(e){return function(t){for(var r=arguments.length,a=Array(r>1?r-1:0),l=1;l<r;l++)a[l-1]=arguments[l];return a.reduce((t,r)=>{for(let[a,l]of Object.entries(r)){let r=t[a];null!=r&&(t[a]=r+e*l)}return t},{...t})}}let Z=Q(1),ee=Q(-1);function et(e){if(!e)return!1;let{KeyboardEvent:t}=z(e.target);return t&&e instanceof t}function er(e){if(function(e){if(!e)return!1;let{TouchEvent:t}=z(e.target);return t&&e instanceof t}(e)){if(e.touches&&e.touches.length){let{clientX:t,clientY:r}=e.touches[0];return{x:t,y:r}}else if(e.changedTouches&&e.changedTouches.length){let{clientX:t,clientY:r}=e.changedTouches[0];return{x:t,y:r}}}return"clientX"in e&&"clientY"in e?{x:e.clientX,y:e.clientY}:null}let ea=Object.freeze({Translate:{toString(e){if(!e)return;let{x:t,y:r}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;let{scaleX:t,scaleY:r}=e;return"scaleX("+t+") scaleY("+r+")"}},Transform:{toString(e){if(e)return[ea.Translate.toString(e),ea.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:r,easing:a}=e;return t+" "+r+"ms "+a}}}),el="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]",en={display:"none"};function es(e){let{id:t,value:r}=e;return w.default.createElement("div",{id:t,style:en},r)}function ei(e){let{id:t,announcement:r,ariaLiveType:a="assertive"}=e;return w.default.createElement("div",{id:t,style:{position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"},role:"status","aria-live":a,"aria-atomic":!0},r)}let eo=(0,w.createContext)(null),ed={draggable:"\n    To pick up a draggable item, press the space bar.\n    While dragging, use the arrow keys to move the item.\n    Press space again to drop the item in its new position, or press escape to cancel.\n  "},ec={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was moved over droppable area "+r.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was dropped over droppable area "+r.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function eu(e){var t;let r,{announcements:a=ec,container:l,hiddenTextDescribedById:n,screenReaderInstructions:s=ed}=e,{announce:i,announcement:o}=function(){let[e,t]=(0,w.useState)("");return{announce:(0,w.useCallback)(e=>{null!=e&&t(e)},[]),announcement:e}}(),d=G("DndLiveRegion"),[c,u]=(0,w.useState)(!1);if((0,w.useEffect)(()=>{u(!0)},[]),t=(0,w.useMemo)(()=>({onDragStart(e){let{active:t}=e;i(a.onDragStart({active:t}))},onDragMove(e){let{active:t,over:r}=e;a.onDragMove&&i(a.onDragMove({active:t,over:r}))},onDragOver(e){let{active:t,over:r}=e;i(a.onDragOver({active:t,over:r}))},onDragEnd(e){let{active:t,over:r}=e;i(a.onDragEnd({active:t,over:r}))},onDragCancel(e){let{active:t,over:r}=e;i(a.onDragCancel({active:t,over:r}))}}),[i,a]),r=(0,w.useContext)(eo),(0,w.useEffect)(()=>{if(!r)throw Error("useDndMonitor must be used within a children of <DndContext>");return r(t)},[t,r]),!c)return null;let g=w.default.createElement(w.default.Fragment,null,w.default.createElement(es,{id:n,value:s.draggable}),w.default.createElement(ei,{id:d,announcement:o}));return l?(0,O.createPortal)(g,l):g}function eg(){}(r=u||(u={})).DragStart="dragStart",r.DragMove="dragMove",r.DragEnd="dragEnd",r.DragCancel="dragCancel",r.DragOver="dragOver",r.RegisterDroppable="registerDroppable",r.SetDroppableDisabled="setDroppableDisabled",r.UnregisterDroppable="unregisterDroppable";let eh=Object.freeze({x:0,y:0});function ex(e,t){let{data:{value:r}}=e,{data:{value:a}}=t;return r-a}function em(e,t){let{data:{value:r}}=e,{data:{value:a}}=t;return a-r}function ef(e,t,r){return void 0===t&&(t=e.left),void 0===r&&(r=e.top),{x:t+.5*e.width,y:r+.5*e.height}}let ep=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:a}=e,l=ef(t,t.left,t.top),n=[];for(let e of a){let{id:t}=e,a=r.get(t);if(a){var s;let r=(s=ef(a),Math.sqrt(Math.pow(s.x-l.x,2)+Math.pow(s.y-l.y,2)));n.push({id:t,data:{droppableContainer:e,value:r}})}}return n.sort(ex)},eb=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:a}=e,l=[];for(let e of a){let{id:a}=e,n=r.get(a);if(n){let r=function(e,t){let r=Math.max(t.top,e.top),a=Math.max(t.left,e.left),l=Math.min(t.left+t.width,e.left+e.width),n=Math.min(t.top+t.height,e.top+e.height);if(a<l&&r<n){let s=t.width*t.height,i=e.width*e.height,o=(l-a)*(n-r);return Number((o/(s+i-o)).toFixed(4))}return 0}(n,t);r>0&&l.push({id:a,data:{droppableContainer:e,value:r}})}}return l.sort(em)};function ev(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:eh}let ey=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return r.reduce((e,t)=>({...e,top:e.top+ +t.y,bottom:e.bottom+ +t.y,left:e.left+ +t.x,right:e.right+ +t.x}),{...e})};function ek(e){if(e.startsWith("matrix3d(")){let t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}if(e.startsWith("matrix(")){let t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}let ew={ignoreTransform:!1};function ej(e,t){void 0===t&&(t=ew);let r=e.getBoundingClientRect();if(t.ignoreTransform){let{transform:t,transformOrigin:a}=z(e).getComputedStyle(e);t&&(r=function(e,t,r){let a=ek(t);if(!a)return e;let{scaleX:l,scaleY:n,x:s,y:i}=a,o=e.left-s-(1-l)*parseFloat(r),d=e.top-i-(1-n)*parseFloat(r.slice(r.indexOf(" ")+1)),c=l?e.width/l:e.width,u=n?e.height/n:e.height;return{width:c,height:u,top:d,right:o+c,bottom:d+u,left:o}}(r,t,a))}let{top:a,left:l,width:n,height:s,bottom:i,right:o}=r;return{top:a,left:l,width:n,height:s,bottom:i,right:o}}function eN(e){return ej(e,{ignoreTransform:!0})}function eC(e,t){let r=[];return e?function a(l){var n,s;let i;if(null!=t&&r.length>=t||!l)return r;if(W(l)&&null!=l.scrollingElement&&!r.includes(l.scrollingElement))return r.push(l.scrollingElement),r;if(!F(l)||U(l)||r.includes(l))return r;let o=z(e).getComputedStyle(l);return(l!==e&&(void 0===(n=o)&&(n=z(l).getComputedStyle(l)),i=/(auto|scroll|overlay)/,["overflow","overflowX","overflowY"].some(e=>{let t=n[e];return"string"==typeof t&&i.test(t)}))&&r.push(l),void 0===(s=o)&&(s=z(l).getComputedStyle(l)),"fixed"===s.position)?r:a(l.parentNode)}(e):r}function eS(e){let[t]=eC(e,1);return null!=t?t:null}function eM(e){return $&&e?P(e)?e:B(e)?W(e)||e===H(e).scrollingElement?window:F(e)?e:null:null:null}function eE(e){return P(e)?e.scrollX:e.scrollLeft}function eL(e){return P(e)?e.scrollY:e.scrollTop}function eD(e){return{x:eE(e),y:eL(e)}}function eT(e){return!!$&&!!e&&e===document.scrollingElement}function eA(e){let t={x:0,y:0},r=eT(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},a={x:e.scrollWidth-r.width,y:e.scrollHeight-r.height},l=e.scrollTop<=t.y,n=e.scrollLeft<=t.x;return{isTop:l,isLeft:n,isBottom:e.scrollTop>=a.y,isRight:e.scrollLeft>=a.x,maxScroll:a,minScroll:t}}(a=g||(g={}))[a.Forward=1]="Forward",a[a.Backward=-1]="Backward";let eI={x:.2,y:.2};function eR(e){return e.reduce((e,t)=>Z(e,eD(t)),eh)}function eO(e,t){if(void 0===t&&(t=ej),!e)return;let{top:r,left:a,bottom:l,right:n}=t(e);eS(e)&&(l<=0||n<=0||r>=window.innerHeight||a>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}let e$=[["x",["left","right"],function(e){return e.reduce((e,t)=>e+eE(t),0)}],["y",["top","bottom"],function(e){return e.reduce((e,t)=>e+eL(t),0)}]];class eP{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=eC(t),a=eR(r);for(const[t,l,n]of(this.rect={...e},this.width=e.width,this.height=e.height,e$))for(const e of l)Object.defineProperty(this,e,{get:()=>{let l=n(r),s=a[t]-l;return this.rect[e]+s},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class eB{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(e=>{var t;return null==(t=this.target)?void 0:t.removeEventListener(...e)})},this.target=e}add(e,t,r){var a;null==(a=this.target)||a.addEventListener(e,t,r),this.listeners.push([e,t,r])}}function ez(e,t){let r=Math.abs(e.x),a=Math.abs(e.y);return"number"==typeof t?Math.sqrt(r**2+a**2)>t:"x"in t&&"y"in t?r>t.x&&a>t.y:"x"in t?r>t.x:"y"in t&&a>t.y}function eW(e){e.preventDefault()}function eF(e){e.stopPropagation()}(l=h||(h={})).Click="click",l.DragStart="dragstart",l.Keydown="keydown",l.ContextMenu="contextmenu",l.Resize="resize",l.SelectionChange="selectionchange",l.VisibilityChange="visibilitychange",(n=x||(x={})).Space="Space",n.Down="ArrowDown",n.Right="ArrowRight",n.Left="ArrowLeft",n.Up="ArrowUp",n.Esc="Escape",n.Enter="Enter",n.Tab="Tab";let eU={start:[x.Space,x.Enter],cancel:[x.Esc],end:[x.Space,x.Enter,x.Tab]},eH=(e,t)=>{let{currentCoordinates:r}=t;switch(e.code){case x.Right:return{...r,x:r.x+25};case x.Left:return{...r,x:r.x-25};case x.Down:return{...r,y:r.y+25};case x.Up:return{...r,y:r.y-25}}};class eK{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new eB(H(t)),this.windowListeners=new eB(z(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(h.Resize,this.handleCancel),this.windowListeners.add(h.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(h.Keydown,this.handleKeyDown))}handleStart(){let{activeNode:e,onStart:t}=this.props,r=e.node.current;r&&eO(r),t(eh)}handleKeyDown(e){if(et(e)){let{active:t,context:r,options:a}=this.props,{keyboardCodes:l=eU,coordinateGetter:n=eH,scrollBehavior:s="smooth"}=a,{code:i}=e;if(l.end.includes(i))return void this.handleEnd(e);if(l.cancel.includes(i))return void this.handleCancel(e);let{collisionRect:o}=r.current,d=o?{x:o.left,y:o.top}:eh;this.referenceCoordinates||(this.referenceCoordinates=d);let c=n(e,{active:t,context:r.current,currentCoordinates:d});if(c){let t=ee(c,d),a={x:0,y:0},{scrollableAncestors:l}=r.current;for(let r of l){let l=e.code,{isTop:n,isRight:i,isLeft:o,isBottom:d,maxScroll:u,minScroll:g}=eA(r),h=function(e){if(e===document.scrollingElement){let{innerWidth:e,innerHeight:t}=window;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}let{top:t,left:r,right:a,bottom:l}=e.getBoundingClientRect();return{top:t,left:r,right:a,bottom:l,width:e.clientWidth,height:e.clientHeight}}(r),m={x:Math.min(l===x.Right?h.right-h.width/2:h.right,Math.max(l===x.Right?h.left:h.left+h.width/2,c.x)),y:Math.min(l===x.Down?h.bottom-h.height/2:h.bottom,Math.max(l===x.Down?h.top:h.top+h.height/2,c.y))},f=l===x.Right&&!i||l===x.Left&&!o,p=l===x.Down&&!d||l===x.Up&&!n;if(f&&m.x!==c.x){let e=r.scrollLeft+t.x,n=l===x.Right&&e<=u.x||l===x.Left&&e>=g.x;if(n&&!t.y)return void r.scrollTo({left:e,behavior:s});n?a.x=r.scrollLeft-e:a.x=l===x.Right?r.scrollLeft-u.x:r.scrollLeft-g.x,a.x&&r.scrollBy({left:-a.x,behavior:s});break}if(p&&m.y!==c.y){let e=r.scrollTop+t.y,n=l===x.Down&&e<=u.y||l===x.Up&&e>=g.y;if(n&&!t.x)return void r.scrollTo({top:e,behavior:s});n?a.y=r.scrollTop-e:a.y=l===x.Down?r.scrollTop-u.y:r.scrollTop-g.y,a.y&&r.scrollBy({top:-a.y,behavior:s});break}}this.handleMove(e,Z(ee(c,this.referenceCoordinates),a))}}}handleMove(e,t){let{onMove:r}=this.props;e.preventDefault(),r(t)}handleEnd(e){let{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){let{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}function eX(e){return!!(e&&"distance"in e)}function eY(e){return!!(e&&"delay"in e)}eK.activators=[{eventName:"onKeyDown",handler:(e,t,r)=>{let{keyboardCodes:a=eU,onActivation:l}=t,{active:n}=r,{code:s}=e.nativeEvent;if(a.start.includes(s)){let t=n.activatorNode.current;return(!t||e.target===t)&&(e.preventDefault(),null==l||l({event:e.nativeEvent}),!0)}return!1}}];class eV{constructor(e,t,r){var a;void 0===r&&(r=function(e){let{EventTarget:t}=z(e);return e instanceof t?e:H(e)}(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:l}=e,{target:n}=l;this.props=e,this.events=t,this.document=H(n),this.documentListeners=new eB(this.document),this.listeners=new eB(r),this.windowListeners=new eB(z(n)),this.initialCoordinates=null!=(a=er(l))?a:eh,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){let{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(h.Resize,this.handleCancel),this.windowListeners.add(h.DragStart,eW),this.windowListeners.add(h.VisibilityChange,this.handleCancel),this.windowListeners.add(h.ContextMenu,eW),this.documentListeners.add(h.Keydown,this.handleKeydown),t){if(null!=r&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(eY(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(eX(t))return void this.handlePending(t)}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){let{active:r,onPending:a}=this.props;a(r,e,this.initialCoordinates,t)}handleStart(){let{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(h.Click,eF,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(h.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;let{activated:r,initialCoordinates:a,props:l}=this,{onMove:n,options:{activationConstraint:s}}=l;if(!a)return;let i=null!=(t=er(e))?t:eh,o=ee(a,i);if(!r&&s){if(eX(s)){if(null!=s.tolerance&&ez(o,s.tolerance))return this.handleCancel();if(ez(o,s.distance))return this.handleStart()}return eY(s)&&ez(o,s.tolerance)?this.handleCancel():void this.handlePending(s,o)}e.cancelable&&e.preventDefault(),n(i)}handleEnd(){let{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){let{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===x.Esc&&this.handleCancel()}removeTextSelection(){var e;null==(e=this.document.getSelection())||e.removeAllRanges()}}let eJ={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class e_ extends eV{constructor(e){const{event:t}=e;super(e,eJ,H(t.target))}}e_.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:a}=t;return!!r.isPrimary&&0===r.button&&(null==a||a({event:r}),!0)}}];(s=m||(m={}))[s.RightClick=2]="RightClick";(i=f||(f={}))[i.Pointer=0]="Pointer",i[i.DraggableRect=1]="DraggableRect",(o=p||(p={}))[o.TreeOrder=0]="TreeOrder",o[o.ReversedTreeOrder=1]="ReversedTreeOrder";let eq={x:{[g.Backward]:!1,[g.Forward]:!1},y:{[g.Backward]:!1,[g.Forward]:!1}};(d=b||(b={}))[d.Always=0]="Always",d[d.BeforeDragging=1]="BeforeDragging",d[d.WhileDragging=2]="WhileDragging",(v||(v={})).Optimized="optimized";let eG=new Map;function eQ(e,t){return V(r=>e?r||("function"==typeof t?t(e):e):null,[t,e])}function eZ(e){let{callback:t,disabled:r}=e,a=X(t),l=(0,w.useMemo)(()=>{if(r||"u"<typeof window||void 0===window.ResizeObserver)return;let{ResizeObserver:e}=window;return new e(a)},[r]);return(0,w.useEffect)(()=>()=>null==l?void 0:l.disconnect(),[l]),l}function e0(e){return new eP(ej(e),e)}function e2(e,t,r){void 0===t&&(t=e0);let[a,l]=(0,w.useState)(null);function n(){l(a=>{if(!e)return null;if(!1===e.isConnected){var l;return null!=(l=null!=a?a:r)?l:null}let n=t(e);return JSON.stringify(a)===JSON.stringify(n)?a:n})}let s=function(e){let{callback:t,disabled:r}=e,a=X(t),l=(0,w.useMemo)(()=>{if(r||"u"<typeof window||void 0===window.MutationObserver)return;let{MutationObserver:e}=window;return new e(a)},[a,r]);return(0,w.useEffect)(()=>()=>null==l?void 0:l.disconnect(),[l]),l}({callback(t){if(e)for(let r of t){let{type:t,target:a}=r;if("childList"===t&&a instanceof HTMLElement&&a.contains(e)){n();break}}}}),i=eZ({callback:n});return K(()=>{n(),e?(null==i||i.observe(e),null==s||s.observe(document.body,{childList:!0,subtree:!0})):(null==i||i.disconnect(),null==s||s.disconnect())},[e]),a}let e1=[];function e5(e,t){void 0===t&&(t=[]);let r=(0,w.useRef)(null);return(0,w.useEffect)(()=>{r.current=null},t),(0,w.useEffect)(()=>{let t=e!==eh;t&&!r.current&&(r.current=e),!t&&r.current&&(r.current=null)},[e]),r.current?ee(e,r.current):eh}function e4(e){return(0,w.useMemo)(()=>{let t,r;return e?(t=e.innerWidth,{top:0,left:0,right:t,bottom:r=e.innerHeight,width:t,height:r}):null},[e])}let e3=[];function e6(e){if(!e)return null;if(e.children.length>1)return e;let t=e.children[0];return F(t)?t:e}let e7=[{sensor:e_,options:{}},{sensor:eK,options:{}}],e8={current:{}},e9={draggable:{measure:eN},droppable:{measure:eN,strategy:b.WhileDragging,frequency:v.Optimized},dragOverlay:{measure:ej}};class te extends Map{get(e){var t;return null!=e&&null!=(t=super.get(e))?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,r;return null!=(t=null==(r=this.get(e))?void 0:r.node.current)?t:void 0}}let tt={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new te,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:eg},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:e9,measureDroppableContainers:eg,windowRect:null,measuringScheduled:!1},tr={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:eg,draggableNodes:new Map,over:null,measureDroppableContainers:eg},ta=(0,w.createContext)(tr),tl=(0,w.createContext)(tt);function tn(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new te}}}function ts(e,t){switch(t.type){case u.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case u.DragMove:if(null==e.draggable.active)return e;return{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case u.DragEnd:case u.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case u.RegisterDroppable:{let{element:r}=t,{id:a}=r,l=new te(e.droppable.containers);return l.set(a,r),{...e,droppable:{...e.droppable,containers:l}}}case u.SetDroppableDisabled:{let{id:r,key:a,disabled:l}=t,n=e.droppable.containers.get(r);if(!n||a!==n.key)return e;let s=new te(e.droppable.containers);return s.set(r,{...n,disabled:l}),{...e,droppable:{...e.droppable,containers:s}}}case u.UnregisterDroppable:{let{id:r,key:a}=t,l=e.droppable.containers.get(r);if(!l||a!==l.key)return e;let n=new te(e.droppable.containers);return n.delete(r),{...e,droppable:{...e.droppable,containers:n}}}default:return e}}function ti(e){let{disabled:t}=e,{active:r,activatorEvent:a,draggableNodes:l}=(0,w.useContext)(ta),n=_(a),s=_(null==r?void 0:r.id);return(0,w.useEffect)(()=>{if(!t&&!a&&n&&null!=s){if(!et(n)||document.activeElement===n.target)return;let e=l.get(s);if(!e)return;let{activatorNode:t,node:r}=e;(t.current||r.current)&&requestAnimationFrame(()=>{for(let e of[t.current,r.current]){if(!e)continue;let t=e.matches(el)?e:e.querySelector(el);if(t){t.focus();break}}})}},[a,t,l,s,n]),null}function to(e,t){let{transform:r,...a}=t;return null!=e&&e.length?e.reduce((e,t)=>t({transform:e,...a}),r):r}let td=(0,w.createContext)({...eh,scaleX:1,scaleY:1});(c=y||(y={}))[c.Uninitialized=0]="Uninitialized",c[c.Initializing=1]="Initializing",c[c.Initialized=2]="Initialized";let tc=(0,w.memo)(function(e){var t,r,a,l,n,s,i,o;let d,c,h,x,m,v,k,j,{id:N,accessibility:C,autoScroll:S=!0,children:M,sensors:E=e7,collisionDetection:L=eb,measuring:D,modifiers:T,...A}=e,[I,R]=(0,w.useReducer)(ts,void 0,tn),[P,B]=function(){let[e]=(0,w.useState)(()=>new Set),t=(0,w.useCallback)(t=>(e.add(t),()=>e.delete(t)),[e]);return[(0,w.useCallback)(t=>{let{type:r,event:a}=t;e.forEach(e=>{var t;return null==(t=e[r])?void 0:t.call(e,a)})},[e]),t]}(),[W,U]=(0,w.useState)(y.Uninitialized),H=W===y.Initialized,{draggable:{active:X,nodes:q,translate:Q},droppable:{containers:ee}}=I,et=null!=X?q.get(X):null,ea=(0,w.useRef)({initial:null,translated:null}),el=(0,w.useMemo)(()=>{var e;return null!=X?{id:X,data:null!=(e=null==et?void 0:et.data)?e:e8,rect:ea}:null},[X,et]),en=(0,w.useRef)(null),[es,ei]=(0,w.useState)(null),[ed,ec]=(0,w.useState)(null),eg=Y(A,Object.values(A)),ex=G("DndDescribedBy",N),em=(0,w.useMemo)(()=>ee.getEnabled(),[ee]),ef=(0,w.useMemo)(()=>({draggable:{...e9.draggable,...null==D?void 0:D.draggable},droppable:{...e9.droppable,...null==D?void 0:D.droppable},dragOverlay:{...e9.dragOverlay,...null==D?void 0:D.dragOverlay}}),[null==D?void 0:D.draggable,null==D?void 0:D.droppable,null==D?void 0:D.dragOverlay]),{droppableRects:ep,measureDroppableContainers:ek,measuringScheduled:ew}=function(e,t){let{dragging:r,dependencies:a,config:l}=t,[n,s]=(0,w.useState)(null),{frequency:i,measure:o,strategy:d}=l,c=(0,w.useRef)(e),u=function(){switch(d){case b.Always:return!1;case b.BeforeDragging:return r;default:return!r}}(),g=Y(u),h=(0,w.useCallback)(function(e){void 0===e&&(e=[]),g.current||s(t=>null===t?e:t.concat(e.filter(e=>!t.includes(e))))},[g]),x=(0,w.useRef)(null),m=V(t=>{if(u&&!r)return eG;if(!t||t===eG||c.current!==e||null!=n){let t=new Map;for(let r of e){if(!r)continue;if(n&&n.length>0&&!n.includes(r.id)&&r.rect.current){t.set(r.id,r.rect.current);continue}let e=r.node.current,a=e?new eP(o(e),e):null;r.rect.current=a,a&&t.set(r.id,a)}return t}return t},[e,n,r,u,o]);return(0,w.useEffect)(()=>{c.current=e},[e]),(0,w.useEffect)(()=>{u||h()},[r,u]),(0,w.useEffect)(()=>{n&&n.length>0&&s(null)},[JSON.stringify(n)]),(0,w.useEffect)(()=>{u||"number"!=typeof i||null!==x.current||(x.current=setTimeout(()=>{h(),x.current=null},i))},[i,u,h,...a]),{droppableRects:m,measureDroppableContainers:h,measuringScheduled:null!=n}}(em,{dragging:H,dependencies:[Q.x,Q.y],config:ef.droppable}),eN=V(e=>{var t;return null==X?null:null!=(t=null!=m?m:e)?t:null},[m=(x=null!=X?q.get(X):void 0)?x.node.current:null,X]),eE=(0,w.useMemo)(()=>ed?er(ed):null,[ed]),eL=(d=(null==es?void 0:es.autoScrollEnabled)===!1,c="object"==typeof S?!1===S.enabled:!1===S,h=H&&!d&&!c,"object"==typeof S?{...S,enabled:h}:{enabled:h}),eO=eQ(eN,ef.draggable.measure);!function(e){let{activeNode:t,measure:r,initialRect:a,config:l=!0}=e,n=(0,w.useRef)(!1),{x:s,y:i}="boolean"==typeof l?{x:l,y:l}:l;K(()=>{if(!s&&!i||!t){n.current=!1;return}if(n.current||!a)return;let e=null==t?void 0:t.node.current;if(!e||!1===e.isConnected)return;let l=ev(r(e),a);if(s||(l.x=0),i||(l.y=0),n.current=!0,Math.abs(l.x)>0||Math.abs(l.y)>0){let t=eS(e);t&&t.scrollBy({top:l.y,left:l.x})}},[t,s,i,a,r])}({activeNode:null!=X?q.get(X):null,config:eL.layoutShiftCompensation,initialRect:eO,measure:ef.draggable.measure});let e$=e2(eN,ef.draggable.measure,eO),eB=e2(eN?eN.parentElement:null),ez=(0,w.useRef)({activatorEvent:null,active:null,activeNode:eN,collisionRect:null,collisions:null,droppableRects:ep,draggableNodes:q,draggingNode:null,draggingNodeRect:null,droppableContainers:ee,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),eW=ee.getNodeFor(null==(t=ez.current.over)?void 0:t.id),eF=function(e){let{measure:t}=e,[r,a]=(0,w.useState)(null),l=eZ({callback:(0,w.useCallback)(e=>{for(let{target:r}of e)if(F(r)){a(e=>{let a=t(r);return e?{...e,width:a.width,height:a.height}:a});break}},[t])}),[n,s]=J((0,w.useCallback)(e=>{let r=e6(e);null==l||l.disconnect(),r&&(null==l||l.observe(r)),a(r?t(r):null)},[t,l]));return(0,w.useMemo)(()=>({nodeRef:n,rect:r,setRef:s}),[r,n,s])}({measure:ef.dragOverlay.measure}),eU=null!=(r=eF.nodeRef.current)?r:eN,eH=H?null!=(a=eF.rect)?a:e$:null,eK=!!(eF.nodeRef.current&&eF.rect),eX=(v=eQ(n=eK?null:e$),ev(n,v)),eY=e4(eU?z(eU):null),eV=(s=H?null!=eW?eW:eN:null,k=(0,w.useRef)(s),j=V(e=>s?e&&e!==e1&&s&&k.current&&s.parentNode===k.current.parentNode?e:eC(s):e1,[s]),(0,w.useEffect)(()=>{k.current=s},[s]),j),eJ=function(e,t){void 0===t&&(t=ej);let[r]=e,a=e4(r?z(r):null),[l,n]=(0,w.useState)(e3);function s(){n(()=>e.length?e.map(e=>eT(e)?a:new eP(t(e),e)):e3)}let i=eZ({callback:s});return K(()=>{null==i||i.disconnect(),s(),e.forEach(e=>null==i?void 0:i.observe(e))},[e]),l}(eV),e_=to(T,{transform:{x:Q.x-eX.x,y:Q.y-eX.y,scaleX:1,scaleY:1},activatorEvent:ed,active:el,activeNodeRect:e$,containerNodeRect:eB,draggingNodeRect:eH,over:ez.current.over,overlayNodeRect:eF.rect,scrollableAncestors:eV,scrollableAncestorRects:eJ,windowRect:eY}),e0=eE?Z(eE,Q):null,te=function(e){let[t,r]=(0,w.useState)(null),a=(0,w.useRef)(e),l=(0,w.useCallback)(e=>{let t=eM(e.target);t&&r(e=>e?(e.set(t,eD(t)),new Map(e)):null)},[]);return(0,w.useEffect)(()=>{let t=a.current;if(e!==t){n(t);let s=e.map(e=>{let t=eM(e);return t?(t.addEventListener("scroll",l,{passive:!0}),[t,eD(t)]):null}).filter(e=>null!=e);r(s.length?new Map(s):null),a.current=e}return()=>{n(e),n(t)};function n(e){e.forEach(e=>{let t=eM(e);null==t||t.removeEventListener("scroll",l)})}},[l,e]),(0,w.useMemo)(()=>e.length?t?Array.from(t.values()).reduce((e,t)=>Z(e,t),eh):eR(e):eh,[e,t])}(eV),tt=e5(te),tr=e5(te,[e$]),tc=Z(e_,tt),tu=eH?ey(eH,e_):null,tg=el&&tu?L({active:el,collisionRect:tu,droppableRects:ep,droppableContainers:em,pointerCoordinates:e0}):null,th=function(e,t){if(!e||0===e.length)return null;let[r]=e;return r.id}(tg,0),[tx,tm]=(0,w.useState)(null),tf=(i=eK?e_:Z(e_,tr),o=null!=(l=null==tx?void 0:tx.rect)?l:null,{...i,scaleX:o&&e$?o.width/e$.width:1,scaleY:o&&e$?o.height/e$.height:1}),tp=(0,w.useRef)(null),tb=(0,w.useCallback)((e,t)=>{let{sensor:r,options:a}=t;if(null==en.current)return;let l=q.get(en.current);if(!l)return;let n=e.nativeEvent,s=new r({active:en.current,activeNode:l,event:n,options:a,context:ez,onAbort(e){if(!q.get(e))return;let{onDragAbort:t}=eg.current,r={id:e};null==t||t(r),P({type:"onDragAbort",event:r})},onPending(e,t,r,a){if(!q.get(e))return;let{onDragPending:l}=eg.current,n={id:e,constraint:t,initialCoordinates:r,offset:a};null==l||l(n),P({type:"onDragPending",event:n})},onStart(e){let t=en.current;if(null==t)return;let r=q.get(t);if(!r)return;let{onDragStart:a}=eg.current,l={activatorEvent:n,active:{id:t,data:r.data,rect:ea}};(0,O.unstable_batchedUpdates)(()=>{null==a||a(l),U(y.Initializing),R({type:u.DragStart,initialCoordinates:e,active:t}),P({type:"onDragStart",event:l}),ei(tp.current),ec(n)})},onMove(e){R({type:u.DragMove,coordinates:e})},onEnd:i(u.DragEnd),onCancel:i(u.DragCancel)});function i(e){return async function(){let{active:t,collisions:r,over:a,scrollAdjustedTranslate:l}=ez.current,s=null;if(t&&l){let{cancelDrop:i}=eg.current;s={activatorEvent:n,active:t,collisions:r,delta:l,over:a},e===u.DragEnd&&"function"==typeof i&&await Promise.resolve(i(s))&&(e=u.DragCancel)}en.current=null,(0,O.unstable_batchedUpdates)(()=>{R({type:e}),U(y.Uninitialized),tm(null),ei(null),ec(null),tp.current=null;let t=e===u.DragEnd?"onDragEnd":"onDragCancel";if(s){let e=eg.current[t];null==e||e(s),P({type:t,event:s})}})}}tp.current=s},[q]),tv=(0,w.useCallback)((e,t)=>(r,a)=>{let l=r.nativeEvent,n=q.get(a);null!==en.current||!n||l.dndKit||l.defaultPrevented||!0===e(r,t.options,{active:n})&&(l.dndKit={capturedBy:t.sensor},en.current=a,tb(r,t))},[q,tb]),ty=(0,w.useMemo)(()=>E.reduce((e,t)=>{let{sensor:r}=t;return[...e,...r.activators.map(e=>({eventName:e.eventName,handler:tv(e.handler,t)}))]},[]),[E,tv]);(0,w.useEffect)(()=>{if(!$)return;let e=E.map(e=>{let{sensor:t}=e;return null==t.setup?void 0:t.setup()});return()=>{for(let t of e)null==t||t()}},E.map(e=>{let{sensor:t}=e;return t})),K(()=>{e$&&W===y.Initializing&&U(y.Initialized)},[e$,W]),(0,w.useEffect)(()=>{let{onDragMove:e}=eg.current,{active:t,activatorEvent:r,collisions:a,over:l}=ez.current;if(!t||!r)return;let n={active:t,activatorEvent:r,collisions:a,delta:{x:tc.x,y:tc.y},over:l};(0,O.unstable_batchedUpdates)(()=>{null==e||e(n),P({type:"onDragMove",event:n})})},[tc.x,tc.y]),(0,w.useEffect)(()=>{let{active:e,activatorEvent:t,collisions:r,droppableContainers:a,scrollAdjustedTranslate:l}=ez.current;if(!e||null==en.current||!t||!l)return;let{onDragOver:n}=eg.current,s=a.get(th),i=s&&s.rect.current?{id:s.id,rect:s.rect.current,data:s.data,disabled:s.disabled}:null,o={active:e,activatorEvent:t,collisions:r,delta:{x:l.x,y:l.y},over:i};(0,O.unstable_batchedUpdates)(()=>{tm(i),null==n||n(o),P({type:"onDragOver",event:o})})},[th]),K(()=>{ez.current={activatorEvent:ed,active:el,activeNode:eN,collisionRect:tu,collisions:tg,droppableRects:ep,draggableNodes:q,draggingNode:eU,draggingNodeRect:eH,droppableContainers:ee,over:tx,scrollableAncestors:eV,scrollAdjustedTranslate:tc},ea.current={initial:eH,translated:tu}},[el,eN,tg,tu,q,eU,eH,ep,ee,tx,eV,tc]),function(e){let t,{acceleration:r,activator:a=f.Pointer,canScroll:l,draggingRect:n,enabled:s,interval:i=5,order:o=p.TreeOrder,pointerCoordinates:d,scrollableAncestors:c,scrollableAncestorRects:u,delta:h,threshold:x}=e,m=function(e){let{delta:t,disabled:r}=e,a=_(t);return V(e=>{if(r||!a||!e)return eq;let l={x:Math.sign(t.x-a.x),y:Math.sign(t.y-a.y)};return{x:{[g.Backward]:e.x[g.Backward]||-1===l.x,[g.Forward]:e.x[g.Forward]||1===l.x},y:{[g.Backward]:e.y[g.Backward]||-1===l.y,[g.Forward]:e.y[g.Forward]||1===l.y}}},[r,t,a])}({delta:h,disabled:!s}),[b,v]=(t=(0,w.useRef)(null),[(0,w.useCallback)((e,r)=>{t.current=setInterval(e,r)},[]),(0,w.useCallback)(()=>{null!==t.current&&(clearInterval(t.current),t.current=null)},[])]),y=(0,w.useRef)({x:0,y:0}),k=(0,w.useRef)({x:0,y:0}),j=(0,w.useMemo)(()=>{switch(a){case f.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case f.DraggableRect:return n}},[a,n,d]),N=(0,w.useRef)(null),C=(0,w.useCallback)(()=>{let e=N.current;if(!e)return;let t=y.current.x*k.current.x,r=y.current.y*k.current.y;e.scrollBy(t,r)},[]),S=(0,w.useMemo)(()=>o===p.TreeOrder?[...c].reverse():c,[o,c]);(0,w.useEffect)(()=>{if(!s||!c.length||!j)return void v();for(let e of S){if((null==l?void 0:l(e))===!1)continue;let t=u[c.indexOf(e)];if(!t)continue;let{direction:a,speed:n}=function(e,t,r,a,l){let{top:n,left:s,right:i,bottom:o}=r;void 0===a&&(a=10),void 0===l&&(l=eI);let{isTop:d,isBottom:c,isLeft:u,isRight:h}=eA(e),x={x:0,y:0},m={x:0,y:0},f={height:t.height*l.y,width:t.width*l.x};return!d&&n<=t.top+f.height?(x.y=g.Backward,m.y=a*Math.abs((t.top+f.height-n)/f.height)):!c&&o>=t.bottom-f.height&&(x.y=g.Forward,m.y=a*Math.abs((t.bottom-f.height-o)/f.height)),!h&&i>=t.right-f.width?(x.x=g.Forward,m.x=a*Math.abs((t.right-f.width-i)/f.width)):!u&&s<=t.left+f.width&&(x.x=g.Backward,m.x=a*Math.abs((t.left+f.width-s)/f.width)),{direction:x,speed:m}}(e,t,j,r,x);for(let e of["x","y"])m[e][a[e]]||(n[e]=0,a[e]=0);if(n.x>0||n.y>0){v(),N.current=e,b(C,i),y.current=n,k.current=a;return}}y.current={x:0,y:0},k.current={x:0,y:0},v()},[r,C,l,v,s,i,JSON.stringify(j),JSON.stringify(m),b,c,S,u,JSON.stringify(x)])}({...eL,delta:Q,draggingRect:tu,pointerCoordinates:e0,scrollableAncestors:eV,scrollableAncestorRects:eJ});let tk=(0,w.useMemo)(()=>({active:el,activeNode:eN,activeNodeRect:e$,activatorEvent:ed,collisions:tg,containerNodeRect:eB,dragOverlay:eF,draggableNodes:q,droppableContainers:ee,droppableRects:ep,over:tx,measureDroppableContainers:ek,scrollableAncestors:eV,scrollableAncestorRects:eJ,measuringConfiguration:ef,measuringScheduled:ew,windowRect:eY}),[el,eN,e$,ed,tg,eB,eF,q,ee,ep,tx,ek,eV,eJ,ef,ew,eY]),tw=(0,w.useMemo)(()=>({activatorEvent:ed,activators:ty,active:el,activeNodeRect:e$,ariaDescribedById:{draggable:ex},dispatch:R,draggableNodes:q,over:tx,measureDroppableContainers:ek}),[ed,ty,el,e$,R,ex,q,tx,ek]);return w.default.createElement(eo.Provider,{value:B},w.default.createElement(ta.Provider,{value:tw},w.default.createElement(tl.Provider,{value:tk},w.default.createElement(td.Provider,{value:tf},M)),w.default.createElement(ti,{disabled:(null==C?void 0:C.restoreFocus)===!1})),w.default.createElement(eu,{...C,hiddenTextDescribedById:ex}))}),tu=(0,w.createContext)(null),tg="button",th={timeout:25};function tx(e){let{data:t,disabled:r=!1,id:a,resizeObserverConfig:l}=e,n=G("Droppable"),{active:s,dispatch:i,over:o,measureDroppableContainers:d}=(0,w.useContext)(ta),c=(0,w.useRef)({disabled:r}),g=(0,w.useRef)(!1),h=(0,w.useRef)(null),x=(0,w.useRef)(null),{disabled:m,updateMeasurementsFor:f,timeout:p}={...th,...l},b=Y(null!=f?f:a),v=eZ({callback:(0,w.useCallback)(()=>{if(!g.current){g.current=!0;return}null!=x.current&&clearTimeout(x.current),x.current=setTimeout(()=>{d(Array.isArray(b.current)?b.current:[b.current]),x.current=null},p)},[p]),disabled:m||!s}),[y,k]=J((0,w.useCallback)((e,t)=>{v&&(t&&(v.unobserve(t),g.current=!1),e&&v.observe(e))},[v])),j=Y(t);return(0,w.useEffect)(()=>{v&&y.current&&(v.disconnect(),g.current=!1,v.observe(y.current))},[y,v]),(0,w.useEffect)(()=>(i({type:u.RegisterDroppable,element:{id:a,key:n,disabled:r,node:y,rect:h,data:j}}),()=>i({type:u.UnregisterDroppable,key:n,id:a})),[a]),(0,w.useEffect)(()=>{r!==c.current.disabled&&(i({type:u.SetDroppableDisabled,id:a,key:n,disabled:r}),c.current.disabled=r)},[a,n,r,i]),{active:s,rect:h,isOver:(null==o?void 0:o.id)===a,node:y,over:o,setNodeRef:k}}function tm(e){let{animation:t,children:r}=e,[a,l]=(0,w.useState)(null),[n,s]=(0,w.useState)(null),i=_(r);return r||a||!i||l(i),K(()=>{if(!n)return;let e=null==a?void 0:a.key,r=null==a?void 0:a.props.id;null==e||null==r?l(null):Promise.resolve(t(r,n)).then(()=>{l(null)})},[t,a,n]),w.default.createElement(w.default.Fragment,null,r,a?(0,w.cloneElement)(a,{ref:s}):null)}let tf={x:0,y:0,scaleX:1,scaleY:1};function tp(e){let{children:t}=e;return w.default.createElement(ta.Provider,{value:tr},w.default.createElement(td.Provider,{value:tf},t))}let tb={position:"fixed",touchAction:"none"},tv=e=>et(e)?"transform 250ms ease":void 0,ty=(0,w.forwardRef)((e,t)=>{let{as:r,activatorEvent:a,adjustScale:l,children:n,className:s,rect:i,style:o,transform:d,transition:c=tv}=e;if(!i)return null;let u=l?d:{...d,scaleX:1,scaleY:1},g={...tb,width:i.width,height:i.height,top:i.top,left:i.left,transform:ea.Transform.toString(u),transformOrigin:l&&a?function(e,t){let r=er(e);if(!r)return"0 0";let a={x:(r.x-t.left)/t.width*100,y:(r.y-t.top)/t.height*100};return a.x+"% "+a.y+"%"}(a,i):void 0,transition:"function"==typeof c?c(a):c,...o};return w.default.createElement(r,{className:s,style:g,ref:t},n)}),tk={duration:250,easing:"ease",keyframes:e=>{let{transform:{initial:t,final:r}}=e;return[{transform:ea.Transform.toString(t)},{transform:ea.Transform.toString(r)}]},sideEffects:(t={styles:{active:{opacity:"0"}}},e=>{let{active:r,dragOverlay:a}=e,l={},{styles:n,className:s}=t;if(null!=n&&n.active)for(let[e,t]of Object.entries(n.active))void 0!==t&&(l[e]=r.node.style.getPropertyValue(e),r.node.style.setProperty(e,t));if(null!=n&&n.dragOverlay)for(let[e,t]of Object.entries(n.dragOverlay))void 0!==t&&a.node.style.setProperty(e,t);return null!=s&&s.active&&r.node.classList.add(s.active),null!=s&&s.dragOverlay&&a.node.classList.add(s.dragOverlay),function(){for(let[e,t]of Object.entries(l))r.node.style.setProperty(e,t);null!=s&&s.active&&r.node.classList.remove(s.active)}})},tw=0,tj=w.default.memo(e=>{var t;let{adjustScale:r=!1,children:a,dropAnimation:l,style:n,transition:s,modifiers:i,wrapperElement:o="div",className:d,zIndex:c=999}=e,{activatorEvent:u,active:g,activeNodeRect:h,containerNodeRect:x,draggableNodes:m,droppableContainers:f,dragOverlay:p,over:b,measuringConfiguration:v,scrollableAncestors:y,scrollableAncestorRects:k,windowRect:j}=(0,w.useContext)(tl),N=(0,w.useContext)(td),C=(t=null==g?void 0:g.id,(0,w.useMemo)(()=>{if(null!=t)return++tw},[t])),S=to(i,{activatorEvent:u,active:g,activeNodeRect:h,containerNodeRect:x,draggingNodeRect:p.rect,over:b,overlayNodeRect:p.rect,scrollableAncestors:y,scrollableAncestorRects:k,transform:N,windowRect:j}),M=eQ(h),E=function(e){let{config:t,draggableNodes:r,droppableContainers:a,measuringConfiguration:l}=e;return X((e,n)=>{if(null===t)return;let s=r.get(e);if(!s)return;let i=s.node.current;if(!i)return;let o=e6(n);if(!o)return;let{transform:d}=z(n).getComputedStyle(n),c=ek(d);if(!c)return;let u="function"==typeof t?t:function(e){let{duration:t,easing:r,sideEffects:a,keyframes:l}={...tk,...e};return e=>{let{active:n,dragOverlay:s,transform:i,...o}=e;if(!t)return;let d={x:s.rect.left-n.rect.left,y:s.rect.top-n.rect.top},c={scaleX:1!==i.scaleX?n.rect.width*i.scaleX/s.rect.width:1,scaleY:1!==i.scaleY?n.rect.height*i.scaleY/s.rect.height:1},u={x:i.x-d.x,y:i.y-d.y,...c},g=l({...o,active:n,dragOverlay:s,transform:{initial:i,final:u}}),[h]=g,x=g[g.length-1];if(JSON.stringify(h)===JSON.stringify(x))return;let m=null==a?void 0:a({active:n,dragOverlay:s,...o}),f=s.node.animate(g,{duration:t,easing:r,fill:"forwards"});return new Promise(e=>{f.onfinish=()=>{null==m||m(),e()}})}}(t);return eO(i,l.draggable.measure),u({active:{id:e,data:s.data,node:i,rect:l.draggable.measure(i)},draggableNodes:r,dragOverlay:{node:n,rect:l.dragOverlay.measure(o)},droppableContainers:a,measuringConfiguration:l,transform:c})})}({config:l,draggableNodes:m,droppableContainers:f,measuringConfiguration:v}),L=M?p.setRef:void 0;return w.default.createElement(tp,null,w.default.createElement(tm,{animation:E},g&&C?w.default.createElement(ty,{key:C,id:g.id,ref:L,as:o,activatorEvent:u,adjustScale:r,className:d,transition:s,rect:M,style:{zIndex:c,...n},transform:S},a):null))});function tN(e,t,r){let a=e.slice();return a.splice(r<0?a.length+r:r,0,a.splice(t,1)[0]),a}function tC(e){return null!==e&&e>=0}let tS=w.default.createContext({activeIndex:-1,containerId:"Sortable",disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:e=>{let{rects:t,activeIndex:r,overIndex:a,index:l}=e,n=tN(t,a,r),s=t[l],i=n[l];return i&&s?{x:i.left-s.left,y:i.top-s.top,scaleX:i.width/s.width,scaleY:i.height/s.height}:null},disabled:{draggable:!1,droppable:!1}}),tM=e=>{let{id:t,items:r,activeIndex:a,overIndex:l}=e;return tN(r,a,l).indexOf(t)},tE=e=>{let{containerId:t,isSorting:r,wasDragging:a,index:l,items:n,newIndex:s,previousItems:i,previousContainerId:o,transition:d}=e;return!!d&&!!a&&(i===n||l!==s)&&(!!r||s!==l&&t===o)},tL={duration:200,easing:"ease"},tD="transform",tT=ea.Transition.toString({property:tD,duration:0,easing:"linear"}),tA={roleDescription:"sortable"};function tI(e){var t,r,a,l;let{animateLayoutChanges:n=tE,attributes:s,disabled:i,data:o,getNewIndex:d=tM,id:c,strategy:u,resizeObserverConfig:g,transition:h=tL}=e,{items:x,containerId:m,activeIndex:f,disabled:p,disableTransforms:b,sortedRects:v,overIndex:y,useDragOverlay:k,strategy:j}=(0,w.useContext)(tS),N=(t=i,r=p,"boolean"==typeof t?{draggable:t,droppable:!1}:{draggable:null!=(a=null==t?void 0:t.draggable)?a:r.draggable,droppable:null!=(l=null==t?void 0:t.droppable)?l:r.droppable}),C=x.indexOf(c),S=(0,w.useMemo)(()=>({sortable:{containerId:m,index:C,items:x},...o}),[m,o,C,x]),M=(0,w.useMemo)(()=>x.slice(x.indexOf(c)),[x,c]),{rect:E,node:L,isOver:D,setNodeRef:T}=tx({id:c,data:S,disabled:N.droppable,resizeObserverConfig:{updateMeasurementsFor:M,...g}}),{active:A,activatorEvent:I,activeNodeRect:R,attributes:O,setNodeRef:$,listeners:P,isDragging:B,over:z,setActivatorNodeRef:W,transform:F}=function(e){let{id:t,data:r,disabled:a=!1,attributes:l}=e,n=G("Draggable"),{activators:s,activatorEvent:i,active:o,activeNodeRect:d,ariaDescribedById:c,draggableNodes:u,over:g}=(0,w.useContext)(ta),{role:h=tg,roleDescription:x="draggable",tabIndex:m=0}=null!=l?l:{},f=(null==o?void 0:o.id)===t,p=(0,w.useContext)(f?td:tu),[b,v]=J(),[y,k]=J(),j=(0,w.useMemo)(()=>s.reduce((e,r)=>{let{eventName:a,handler:l}=r;return e[a]=e=>{l(e,t)},e},{}),[s,t]),N=Y(r);return K(()=>(u.set(t,{id:t,key:n,node:b,activatorNode:y,data:N}),()=>{let e=u.get(t);e&&e.key===n&&u.delete(t)}),[u,t]),{active:o,activatorEvent:i,activeNodeRect:d,attributes:(0,w.useMemo)(()=>({role:h,tabIndex:m,"aria-disabled":a,"aria-pressed":!!f&&h===tg||void 0,"aria-roledescription":x,"aria-describedby":c.draggable}),[a,h,m,f,x,c.draggable]),isDragging:f,listeners:a?void 0:j,node:b,over:g,setNodeRef:v,setActivatorNodeRef:k,transform:p}}({id:c,data:S,attributes:{...tA,...s},disabled:N.draggable}),U=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,w.useMemo)(()=>e=>{t.forEach(t=>t(e))},t)}(T,$),H=!!A,X=H&&!b&&tC(f)&&tC(y),V=!k&&B,_=V&&X?F:null,q=X?null!=_?_:(null!=u?u:j)({rects:v,activeNodeRect:R,activeIndex:f,overIndex:y,index:C}):null,Q=tC(f)&&tC(y)?d({id:c,items:x,activeIndex:f,overIndex:y}):C,Z=null==A?void 0:A.id,ee=(0,w.useRef)({activeId:Z,items:x,newIndex:Q,containerId:m}),er=x!==ee.current.items,el=n({active:A,containerId:m,isDragging:B,isSorting:H,id:c,index:C,items:x,newIndex:ee.current.newIndex,previousItems:ee.current.items,previousContainerId:ee.current.containerId,transition:h,wasDragging:null!=ee.current.activeId}),en=function(e){let{disabled:t,index:r,node:a,rect:l}=e,[n,s]=(0,w.useState)(null),i=(0,w.useRef)(r);return K(()=>{if(!t&&r!==i.current&&a.current){let e=l.current;if(e){let t=ej(a.current,{ignoreTransform:!0}),r={x:e.left-t.left,y:e.top-t.top,scaleX:e.width/t.width,scaleY:e.height/t.height};(r.x||r.y)&&s(r)}}r!==i.current&&(i.current=r)},[t,r,a,l]),(0,w.useEffect)(()=>{n&&s(null)},[n]),n}({disabled:!el,index:C,node:L,rect:E});return(0,w.useEffect)(()=>{H&&ee.current.newIndex!==Q&&(ee.current.newIndex=Q),m!==ee.current.containerId&&(ee.current.containerId=m),x!==ee.current.items&&(ee.current.items=x)},[H,Q,m,x]),(0,w.useEffect)(()=>{if(Z===ee.current.activeId)return;if(null!=Z&&null==ee.current.activeId){ee.current.activeId=Z;return}let e=setTimeout(()=>{ee.current.activeId=Z},50);return()=>clearTimeout(e)},[Z]),{active:A,activeIndex:f,attributes:O,data:S,rect:E,index:C,newIndex:Q,items:x,isOver:D,isSorting:H,isDragging:B,listeners:P,node:L,overIndex:y,over:z,setNodeRef:U,setActivatorNodeRef:W,setDroppableNodeRef:T,setDraggableNodeRef:$,transform:null!=en?en:q,transition:en||er&&ee.current.newIndex===C?tT:(!V||et(I))&&h&&(H||el)?ea.Transition.toString({...h,property:tD}):void 0}}x.Down,x.Right,x.Up,x.Left;let tR=[{id:"suggested",title:"Suggested",dotColor:"bg-purple-400"},{id:"backlog",title:"Backlog",dotColor:"bg-gray-400"},{id:"in-progress",title:"In Progress",dotColor:"bg-blue-400"},{id:"review",title:"Review",dotColor:"bg-amber-400"},{id:"done",title:"Done",dotColor:"bg-emerald-400"},{id:"archived",title:"Archived",dotColor:"bg-red-400"}],tO={suggested:"#a855f7",backlog:"#9ca3af","in-progress":"#60a5fa",review:"#f59e0b",done:"#34d399",archived:"#f87171"},t$=[{id:"suggested",label:"Suggested",color:"#a855f7"},{id:"backlog",label:"Backlog",color:"#9ca3af"},{id:"in-progress",label:"In Progress",color:"#60a5fa"},{id:"review",label:"Review",color:"#f59e0b"},{id:"done",label:"Done",color:"#34d399"},{id:"archived",label:"Archived",color:"#f87171"}];function tP({children:e,visible:t}){return t?(0,k.jsx)("div",{className:"absolute right-1 top-1 z-20 flex items-center gap-0.5 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg px-1 py-0.5",onClick:e=>e.stopPropagation(),children:e}):null}let tB=(0,w.forwardRef)(function({task:e,subTasks:t=[],isSubTask:r,onEdit:a,onArchive:l,onDelete:n,onRestore:s,onAddSubTask:i,onMoveToColumn:o,animateIn:d,fadeOut:c,onToggleExpand:u,expanded:g,isDragOverlay:h,isDropTarget:x,dragHandleProps:m,style:f,className:p,...b},v){let y,[j,N]=(0,w.useState)(!1),[C,S]=(0,w.useState)(!1),[M,L]=(0,w.useState)(!1),[D,T]=(0,w.useState)(!d),A=(0,w.useRef)(null);(0,w.useEffect)(()=>{d&&(T(!1),requestAnimationFrame(()=>{requestAnimationFrame(()=>{T(!0)})}))},[d]),(0,w.useEffect)(()=>{if(!C)return;let e=e=>{A.current&&!A.current.contains(e.target)&&S(!1)};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}},[C]);let I="archived"===e.column,R="done"===e.column,O=tO[e.column]||"#9ca3af",$=t.filter(e=>"done"===e.column).length,P=t.length,B=e.description&&e.description.trim().length>0,z="p-1 rounded-md transition-colors";return(0,k.jsxs)("div",{ref:v,style:{...f,borderLeftColor:O,borderLeftWidth:3,...d?{opacity:D?1:.3,transition:`opacity 1.2s ease-out${f?.transition?", "+f.transition:""}`}:{}},className:`group relative rounded-lg px-3 py-2.5 transition-all duration-200 border ${r?"ml-4 bg-gray-50 dark:bg-gray-900/40 border-gray-200 dark:border-gray-800/30":"bg-white dark:bg-gray-900/60"} ${I?"border-red-300 dark:border-red-500/20 opacity-50":R?"border-emerald-300 dark:border-emerald-500/20 opacity-70":"border-gray-200 dark:border-gray-800/50 hover:border-amber-400 dark:hover:border-amber-500/30 hover:shadow-md dark:hover:shadow-[0_0_20px_rgba(245,158,11,0.08)]"} ${h?"shadow-2xl ring-2 ring-amber-400 scale-[1.02] rotate-1":""} ${x?"ring-2 ring-blue-400 bg-blue-50 dark:bg-blue-900/20":""} ${p||""}`,...b,children:[(0,k.jsxs)("div",{className:"flex items-start gap-1.5",children:[!I&&!r&&(0,k.jsx)("div",{className:"hidden sm:block opacity-30 group-hover:opacity-60 transition-opacity flex-shrink-0 cursor-grab active:cursor-grabbing select-none rounded",...m||{},style:{touchAction:"none"},children:(0,k.jsxs)("svg",{className:"w-3.5 h-3.5 text-gray-400",fill:"currentColor",viewBox:"0 0 24 24",children:[(0,k.jsx)("circle",{cx:"9",cy:"6",r:"1.5"}),(0,k.jsx)("circle",{cx:"15",cy:"6",r:"1.5"}),(0,k.jsx)("circle",{cx:"9",cy:"12",r:"1.5"}),(0,k.jsx)("circle",{cx:"15",cy:"12",r:"1.5"}),(0,k.jsx)("circle",{cx:"9",cy:"18",r:"1.5"}),(0,k.jsx)("circle",{cx:"15",cy:"18",r:"1.5"})]})}),R&&(0,k.jsx)("svg",{className:"w-3.5 h-3.5 text-emerald-500 flex-shrink-0 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12.75l6 6 9-13.5"})}),(0,k.jsx)("h3",{className:`text-[13px] font-medium leading-tight flex-1 min-w-0 cursor-pointer ${I||R?"text-gray-400 dark:text-gray-500 line-through":"text-gray-900 dark:text-gray-100"}`,onClick:()=>{P>0&&u?u():B&&N(!j)},children:e.title}),(0,k.jsxs)("div",{ref:A,className:"flex-shrink-0 relative",children:[(0,k.jsx)("button",{onClick:e=>{e.stopPropagation(),S(!C)},className:"p-1 rounded-md text-gray-300 dark:text-gray-600 hover:text-gray-500 dark:hover:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:(0,k.jsxs)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:[(0,k.jsx)("circle",{cx:"12",cy:"6",r:"1.5"}),(0,k.jsx)("circle",{cx:"12",cy:"12",r:"1.5"}),(0,k.jsx)("circle",{cx:"12",cy:"18",r:"1.5"})]})}),(0,k.jsx)(tP,{visible:C,children:I?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("button",{onClick:()=>{S(!1),s?.(e.id)},className:`${z} hover:bg-emerald-50 dark:hover:bg-emerald-500/10 text-gray-400 hover:text-emerald-500`,title:"Restore",children:(0,k.jsx)("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 15L3 9m0 0l6-6M3 9h12a6 6 0 010 12h-3"})})}),(0,k.jsx)("button",{onClick:()=>{S(!1),n(e.id)},className:`${z} hover:bg-red-50 dark:hover:bg-red-500/10 text-gray-400 hover:text-red-500`,title:"Delete",children:(0,k.jsx)("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})})})]}):(0,k.jsxs)(k.Fragment,{children:[!r&&i&&(0,k.jsx)("button",{onClick:()=>{S(!1),i(e.id)},className:`${z} hover:bg-blue-50 dark:hover:bg-blue-500/10 text-gray-400 hover:text-blue-500`,title:"Add sub-task",children:(0,k.jsx)("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})})}),o&&(0,k.jsxs)("div",{className:"relative",children:[(0,k.jsx)("button",{onClick:()=>L(!M),className:`${z} hover:bg-indigo-50 dark:hover:bg-indigo-500/10 text-gray-400 hover:text-indigo-500`,title:"Move to",children:(0,k.jsx)("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.5 21L3 16.5m0 0L7.5 12M3 16.5h13.5m0-13.5L21 7.5m0 0L16.5 12M21 7.5H7.5"})})}),M&&(0,k.jsx)("div",{className:"absolute right-0 top-full mt-1 z-30 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg shadow-xl py-1 min-w-[130px]",children:t$.filter(t=>t.id!==e.column).map(t=>(0,k.jsxs)("button",{onClick:()=>{L(!1),S(!1),o(e.id,t.id)},className:"w-full text-left px-3 py-1.5 text-xs text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 flex items-center gap-2",children:[(0,k.jsx)("span",{className:"w-2 h-2 rounded-full flex-shrink-0",style:{backgroundColor:t.color}}),t.label]},t.id))})]}),(0,k.jsx)("button",{onClick:()=>{S(!1),a(e)},className:`${z} hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-400 hover:text-gray-600`,title:"Edit",children:(0,k.jsx)("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931z"})})}),(0,k.jsx)("button",{onClick:()=>{S(!1),l(e.id)},className:`${z} hover:bg-amber-50 dark:hover:bg-amber-500/10 text-gray-400 hover:text-amber-500`,title:"Archive",children:(0,k.jsx)("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z"})})}),(0,k.jsx)("button",{onClick:()=>{S(!1),n(e.id)},className:`${z} hover:bg-red-50 dark:hover:bg-red-500/10 text-gray-400 hover:text-red-500`,title:"Delete",children:(0,k.jsx)("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})})})]})})]})]}),B&&j&&(0,k.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-500 leading-relaxed mt-1.5 cursor-pointer",onClick:()=>N(!1),children:e.description}),"number"==typeof e.progress&&e.progress>0&&(0,k.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,k.jsx)("div",{className:"flex-1 bg-gray-200 dark:bg-gray-800 rounded-full h-1.5",children:(0,k.jsx)("div",{className:`h-1.5 rounded-full transition-all ${e.progress>=100?"bg-emerald-500":e.progress>=50?"bg-amber-500":"bg-blue-500"}`,style:{width:`${Math.min(e.progress,100)}%`}})}),(0,k.jsxs)("span",{className:"text-[10px] text-gray-400 dark:text-gray-500 font-medium tabular-nums",children:[e.progress,"%"]})]}),e.activityLog&&e.activityLog.length>0&&(0,k.jsx)("p",{className:"text-[11px] text-gray-400 dark:text-gray-500 leading-snug mt-1.5 line-clamp-2",children:e.activityLog[e.activityLog.length-1].note}),P>0&&(0,k.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,k.jsx)("div",{className:"flex-1 bg-gray-200 dark:bg-gray-800 rounded-full h-1",children:(y=Math.round(t.reduce((e,t)=>e+("done"===t.column?100:t.progress||0),0)/P),(0,k.jsx)("div",{className:`h-1 rounded-full transition-all ${y>=100?"bg-emerald-500":y>=50?"bg-amber-500":"bg-blue-500"}`,style:{width:`${y}%`}}))}),(0,k.jsxs)("span",{className:"text-[10px] text-gray-400 dark:text-gray-500 font-medium",children:[$,"/",P]})]}),(0,k.jsxs)("div",{className:"flex items-center gap-1.5 mt-2 flex-wrap",children:[(0,k.jsx)("span",{className:"w-1.5 h-1.5 rounded-full flex-shrink-0",style:{backgroundColor:e.agentColor}}),(0,k.jsx)("span",{className:"text-[10px] text-gray-400 dark:text-gray-500",children:e.agent}),(0,k.jsx)("span",{className:"px-1.5 py-px bg-gray-100 dark:bg-gray-800/80 text-gray-400 dark:text-gray-500 text-[10px] rounded-full",children:e.project}),P>0&&(0,k.jsxs)("span",{className:"px-1.5 py-px bg-blue-50 dark:bg-blue-500/10 text-blue-500 dark:text-blue-400 text-[10px] rounded-full border border-blue-200 dark:border-blue-500/20 cursor-pointer",onClick:e=>{e.stopPropagation(),u?.()},children:[P," sub",1!==P?"s":""," ",g?"▾":"▸"]}),(0,k.jsx)("span",{className:"text-[10px] text-gray-300 dark:text-gray-700 ml-auto",children:E(e.createdAt)})]})]})});var tz=e.i(93610);function tW({id:e,children:t}){let{setNodeRef:r,isOver:a}=tx({id:`column:${e}`});return(0,k.jsx)("div",{ref:r,className:`min-h-[100px] transition-colors rounded-lg ${a?"bg-amber-50/50 dark:bg-amber-500/5":""}`,children:t})}function tF({id:e,isActive:t}){let{setNodeRef:r,isOver:a}=tx({id:e}),l=a||t;return(0,k.jsx)("div",{ref:r,className:"relative transition-all duration-150",style:{height:l?8:6,marginTop:-2,marginBottom:-2},children:l&&(0,k.jsxs)("div",{className:"absolute inset-x-2 top-1/2 -translate-y-1/2 h-[3px] bg-amber-500 rounded-full shadow-[0_0_8px_rgba(245,158,11,0.5)]",children:[(0,k.jsx)("div",{className:"absolute -left-1 top-1/2 -translate-y-1/2 w-2.5 h-2.5 bg-amber-500 rounded-full"}),(0,k.jsx)("div",{className:"absolute -right-1 top-1/2 -translate-y-1/2 w-2.5 h-2.5 bg-amber-500 rounded-full"})]})})}function tU({task:e,subTasks:t,isExpanded:r,onToggleExpand:a,dropTargetId:l,...n}){let{attributes:s,listeners:i,setNodeRef:o,transform:d,transition:c,isDragging:u}=tI({id:e.id,data:{type:"task",task:e}}),g={transform:ea.Transform.toString(d),transition:c,opacity:u?.3:void 0};return(0,k.jsxs)("div",{children:[(0,k.jsx)(tB,{ref:o,style:g,task:e,subTasks:t,expanded:r,onToggleExpand:a,isDropTarget:l===e.id,dragHandleProps:{...s,...i},...n}),r&&t.map(e=>(0,k.jsx)(tH,{task:e,dropTargetId:l,...n},e.id))]})}function tH({task:e,dropTargetId:t,...r}){let{attributes:a,listeners:l,setNodeRef:n,transform:s,transition:i,isDragging:o}=tI({id:e.id,data:{type:"task",task:e}}),d={transform:ea.Transform.toString(s),transition:i,opacity:o?.3:void 0};return(0,k.jsx)(tB,{ref:n,style:d,task:e,isSubTask:!0,isDropTarget:t===e.id,dragHandleProps:{...a,...l},...r})}let tK="drag-preview";function tX({tasks:e,onEditTask:t,onArchiveTask:r,onDeleteTask:a,onRestoreTask:l,onMoveTask:n,onReorderTask:s,onAddSubTask:i,animateTaskIds:o,fadeOutIds:d}){var c;let{toast:u,dismiss:g}=(0,tz.useToast)(),[h,x]=(0,w.useState)(new Set),[m,f]=(0,w.useState)(null),[p,b]=(0,w.useState)(null),[v,y]=(0,w.useState)(null),j=(0,w.useRef)(null),[N,C]=(0,w.useState)(!1);(0,w.useEffect)(()=>{C("ontouchstart"in window||navigator.maxTouchPoints>0)},[]);let S=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,w.useMemo)(()=>[...t].filter(e=>null!=e),[...t])}((c={activationConstraint:{distance:8}},(0,w.useMemo)(()=>({sensor:e_,options:null!=c?c:{}}),[e_,c]))),M=(0,w.useMemo)(()=>e.filter(e=>!e.parentId),[e]),E=(0,w.useMemo)(()=>{let t=new Map;return e.filter(e=>e.parentId).forEach(e=>{let r=t.get(e.parentId)||[];r.push(e),t.set(e.parentId,r)}),t},[e]),L=m?e.find(e=>e.id===m):null,D=(0,w.useCallback)(e=>{x(t=>{let r=new Set(t);return r.has(e)?r.delete(e):r.add(e),r})},[]),T=(0,w.useCallback)(e=>{f(e.active.id)},[]),A=(0,w.useCallback)(t=>{let{over:r,active:a}=t;if(!r){b(null),y(null),g(tK);return}let l=r.id,n=e.find(e=>e.id===a.id),s=null,i=!1;if(l.startsWith("gap:"))y(l),b(null),s=l.split(":")[1];else if(l.startsWith("column:"))b(null),y(null),s=l.replace("column:","");else{b(l),y(null);let t=e.find(e=>e.id===l);t&&!t.parentId&&(i=!0),s=t?.column||null}if(n&&s)if(i){let t=e.find(e=>e.id===l);u(`→ Sub-task of "${t?.title}"`,{type:"preview",id:tK})}else if(s!==n.column){let e;u(`→ ${(e=s,tR.find(t=>t.id===e)?.title||e)}`,{type:"preview",id:tK})}else g(tK)},[e,u,g]),I=(0,w.useCallback)(t=>{let{active:r,over:a}=t;if(f(null),b(null),y(null),g(tK),!a)return;let l=r.id,i=a.id,o=e.find(e=>e.id===l);if(o){if(i.startsWith("gap:")){let t=i.split(":"),r=t[1],a=parseInt(t[2]);if(o.parentId){let t=e.find(e=>e.id===o.parentId);if(t?.column==="suggested"&&"suggested"!==r)return}s&&s(l,r,a);return}if(n)if(i.startsWith("column:")){let t=i.replace("column:","");if(o.parentId){let r=e.find(e=>e.id===o.parentId);if(r?.column==="suggested"&&"suggested"!==t)return}o.column!==t&&n(l,t,o.parentId)}else{let t=e.find(e=>e.id===i);if(t&&l!==i){if(t.parentId||o.parentId===i)return;n(l,t.column,i)}}}},[n,s,e]),R=(0,w.useCallback)((t,r)=>{let a=e.find(e=>e.id===t);a&&n&&a.column!==r&&n(t,r,a.parentId)},[e,n]),O=(0,w.useCallback)(()=>{f(null),b(null),y(null),g(tK)},[g]);return(0,k.jsxs)(tc,{sensors:S,collisionDetection:ep,onDragStart:T,onDragOver:A,onDragEnd:I,onDragCancel:O,autoScroll:{enabled:!0,threshold:{x:.05,y:.15},interval:10,acceleration:5},children:[(0,k.jsx)("div",{ref:j,className:"flex gap-4 overflow-x-auto pb-4 lg:grid lg:grid-cols-6 lg:overflow-x-visible",children:tR.map(e=>{let n=M.filter(t=>t.column===e.id);return(0,k.jsxs)("div",{className:"flex-shrink-0 w-[85vw] sm:w-[70vw] lg:w-auto rounded-xl border border-gray-200 dark:border-gray-800/50 bg-gray-50/50 dark:bg-gray-950/30 p-3 flex flex-col",children:[(0,k.jsxs)("div",{className:"flex items-center gap-2 mb-3 px-1 sticky top-0 z-10 bg-gray-50/95 dark:bg-gray-950/95 backdrop-blur-sm py-2 -mt-1 rounded-lg",children:[(0,k.jsx)("span",{className:`w-2.5 h-2.5 rounded-full ${e.dotColor}`}),(0,k.jsx)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:e.title}),(0,k.jsx)("span",{className:"text-xs text-gray-400 dark:text-gray-600 ml-1",children:n.length})]}),(0,k.jsx)(tW,{id:e.id,children:0!==n.length||m?(0,k.jsxs)("div",{className:"space-y-1",children:[n.map((n,s)=>{let c=E.get(n.id)||[],u=d?.has(n.id)||!1;return(0,k.jsx)("div",{style:{display:"grid",gridTemplateRows:u?"0fr":"1fr",opacity:+!u,transition:"grid-template-rows 400ms ease-out, opacity 350ms ease-out"},children:(0,k.jsxs)("div",{style:{overflow:"hidden"},children:[m&&(0,k.jsx)(tF,{id:`gap:${e.id}:${s}`,isActive:v===`gap:${e.id}:${s}`}),(0,k.jsx)(tU,{task:n,subTasks:c,isExpanded:h.has(n.id),onToggleExpand:()=>D(n.id),dropTargetId:p,onEdit:t,onArchive:r,onDelete:a,onRestore:l,onAddSubTask:i,onMoveToColumn:R,animateIn:o?.has(n.id)||!1,fadeOut:u})]})},n.id)}),m&&(0,k.jsx)(tF,{id:`gap:${e.id}:${n.length}`,isActive:v===`gap:${e.id}:${n.length}`})]}):(0,k.jsx)("div",{className:"border-2 border-dashed border-gray-200 dark:border-gray-800/30 rounded-xl p-6 text-center",children:(0,k.jsx)("p",{className:"text-xs text-gray-400 dark:text-gray-600",children:"No tasks"})})})]},e.id)})}),(0,k.jsx)(tj,{children:L?(0,k.jsx)(tB,{task:L,subTasks:E.get(L.id)||[],isDragOverlay:!0,onEdit:()=>{},onArchive:()=>{},onDelete:()=>{}}):null})]})}let tY={Ezra:"bg-amber-400"};function tV({activities:e}){return(0,k.jsxs)("div",{className:"bg-white dark:bg-gray-900/40 backdrop-blur-sm border border-gray-200 dark:border-gray-800/50 rounded-xl p-4",children:[(0,k.jsxs)("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-4 flex items-center gap-2",children:[(0,k.jsx)("span",{className:"w-2 h-2 rounded-full bg-emerald-400 animate-pulse"}),"Activity"]}),(0,k.jsxs)("div",{className:"space-y-4",children:[e.map(e=>(0,k.jsxs)("div",{className:"flex gap-3",children:[(0,k.jsxs)("div",{className:"flex flex-col items-center",children:[(0,k.jsx)("div",{className:`w-2 h-2 rounded-full mt-1.5 flex-shrink-0 ${tY[e.agent]||"bg-gray-400 dark:bg-gray-700"}`}),(0,k.jsx)("div",{className:"w-px flex-1 bg-gray-200 dark:bg-gray-800/50"})]}),(0,k.jsxs)("div",{className:"pb-4",children:[(0,k.jsx)("p",{className:"text-[10px] text-amber-500 dark:text-amber-400/70 font-medium mb-0.5",children:e.agent}),(0,k.jsx)("p",{className:"text-xs text-gray-700 dark:text-gray-300 leading-relaxed",children:e.message}),(0,k.jsx)("p",{className:"text-[10px] text-gray-400 dark:text-gray-600 mt-1",children:E(e.timestamp)})]})]},e.id)),0===e.length&&(0,k.jsx)("p",{className:"text-xs text-gray-400 dark:text-gray-600 text-center py-4",children:"No activity yet"})]})]})}function tJ({isOpen:e,onClose:t,onSave:r,editingTask:a,projects:l,tasks:n,preselectedParentId:s}){let[i,o]=(0,w.useState)(""),[d,c]=(0,w.useState)(""),[u,g]=(0,w.useState)("backlog"),[h,x]=(0,w.useState)("Ezra"),[m,f]=(0,w.useState)(""),[p,b]=(0,w.useState)(""),[v,y]=(0,w.useState)(!1),[j,N]=(0,w.useState)(null);if((0,w.useEffect)(()=>{if(a)o(a.title),c(a.description),g(a.column),x(a.agent),f(a.project),b(a.parentId||"");else{o(""),c("");let e=s?n.find(e=>e.id===s):null;g(e?e.column:"backlog"),x("Ezra"),f(e?e.project:l[0]?.id||""),b(s||"")}N(null),y(!1)},[a,e,l]),!e)return null;let C=n.filter(e=>!e.parentId&&e.id!==a?.id),S=!!p,M=p?n.find(e=>e.id===p):null,E=async e=>{if(e.preventDefault(),i.trim()){y(!0),N(null);try{await r({title:i,description:d,column:u,agent:h,agentColor:"#f59e0b",project:m||l[0]?.id||"",parentId:p||null}),t()}catch(e){N(e instanceof Error?e.message:"Failed to save task")}finally{y(!1)}}},L="w-full bg-gray-100 dark:bg-gray-800/60 border border-gray-300 dark:border-gray-700/50 text-gray-900 dark:text-gray-200 text-sm rounded-lg px-3 py-2.5 focus:outline-none focus:border-amber-500/50 transition-colors min-h-[44px]";return(0,k.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,k.jsx)("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:v?void 0:t}),(0,k.jsx)("div",{className:"relative bg-white dark:bg-gray-900/95 backdrop-blur-xl border border-gray-200 dark:border-gray-800/50 rounded-2xl w-full max-w-lg shadow-2xl",children:(0,k.jsxs)("div",{className:"p-6",children:[(0,k.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-6",children:a?"Edit Task":"New Task"}),j&&(0,k.jsx)("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-500/10 border border-red-200 dark:border-red-500/20 rounded-lg text-sm text-red-600 dark:text-red-400",children:j}),(0,k.jsxs)("form",{onSubmit:E,className:"space-y-4",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-xs text-gray-500 mb-1.5",children:"Title"}),(0,k.jsx)("input",{type:"text",value:i,onChange:e=>o(e.target.value),className:L,placeholder:"What needs to be done?",autoFocus:!0,disabled:v})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-xs text-gray-500 mb-1.5",children:"Description"}),(0,k.jsx)("textarea",{value:d,onChange:e=>c(e.target.value),className:`${L} min-h-[88px] resize-none`,placeholder:"Add details...",rows:3,disabled:v})]}),(0,k.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-xs text-gray-500 mb-1.5",children:"Column"}),(0,k.jsx)("select",{value:u,onChange:e=>g(e.target.value),className:L,disabled:v,children:tR.filter(e=>"archived"!==e.id&&(!S||M?.column!=="suggested"||"suggested"===e.id)).map(e=>(0,k.jsx)("option",{value:e.id,children:e.title},e.id))})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-xs text-gray-500 mb-1.5",children:"Project"}),(0,k.jsx)("select",{value:m,onChange:e=>f(e.target.value),className:L,disabled:v,children:l.map(e=>(0,k.jsx)("option",{value:e.id,children:e.name},e.id))})]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-xs text-gray-500 mb-1.5",children:"Parent task (optional)"}),(0,k.jsxs)("select",{value:p,onChange:e=>b(e.target.value),className:L,disabled:v,children:[(0,k.jsx)("option",{value:"",children:"None (top-level task)"}),C.map(e=>(0,k.jsx)("option",{value:e.id,children:e.title},e.id))]})]}),(0,k.jsxs)("div",{className:"flex justify-end gap-3 pt-2",children:[(0,k.jsx)("button",{type:"button",onClick:t,disabled:v,className:"px-4 py-2 text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 transition-colors min-h-[44px] disabled:opacity-50",children:"Cancel"}),(0,k.jsxs)("button",{type:"submit",disabled:v,className:"px-5 py-2 bg-amber-500 hover:bg-amber-400 text-gray-950 font-semibold text-sm rounded-lg transition-colors min-h-[44px] disabled:opacity-70 flex items-center gap-2",children:[v&&(0,k.jsxs)("svg",{className:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[(0,k.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,k.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),a?"Save Changes":"Create Task"]})]})]})]})})]})}let t_=["#f59e0b","#3b82f6","#10b981","#8b5cf6","#6366f1","#ec4899","#ef4444","#14b8a6","#f97316","#84cc16"],tq=[{value:"active",label:"Active"},{value:"suggested",label:"Suggested"},{value:"completed",label:"Completed"},{value:"archived",label:"Archived"}];function tG({isOpen:e,onClose:t,onSave:r,editingProject:a}){let[l,n]=(0,w.useState)(""),[s,i]=(0,w.useState)(""),[o,d]=(0,w.useState)(t_[0]),[c,u]=(0,w.useState)("active");return((0,w.useEffect)(()=>{a?(n(a.name),i(a.description),d(a.color),u(a.status||"active")):(n(""),i(""),d(t_[Math.floor(Math.random()*t_.length)]),u("active"))},[a,e]),e)?(0,k.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,k.jsx)("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:t}),(0,k.jsxs)("form",{onSubmit:e=>{e.preventDefault(),l.trim()&&(r({name:l.trim(),description:s.trim(),color:o,status:c}),t())},className:"relative bg-white dark:bg-gray-900 rounded-2xl border border-gray-200 dark:border-gray-800/50 shadow-xl w-full max-w-md p-6 space-y-4",children:[(0,k.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:a?"Edit Project":"New Project"}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Name"}),(0,k.jsx)("input",{type:"text",value:l,onChange:e=>n(e.target.value),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-800/60 border border-gray-200 dark:border-gray-700 rounded-lg text-sm text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-amber-500/50",placeholder:"Project name",autoFocus:!0})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Description"}),(0,k.jsx)("textarea",{value:s,onChange:e=>i(e.target.value),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-800/60 border border-gray-200 dark:border-gray-700 rounded-lg text-sm text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-amber-500/50 resize-none",rows:2,placeholder:"Brief description"})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-2",children:"Color"}),(0,k.jsx)("div",{className:"flex gap-2 flex-wrap",children:t_.map(e=>(0,k.jsx)("button",{type:"button",onClick:()=>d(e),className:`w-7 h-7 rounded-full transition-all ${o===e?"ring-2 ring-offset-2 ring-amber-500 dark:ring-offset-gray-900 scale-110":"hover:scale-110"}`,style:{backgroundColor:e}},e))})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Status"}),(0,k.jsx)("select",{value:c,onChange:e=>u(e.target.value),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-800/60 border border-gray-200 dark:border-gray-700 rounded-lg text-sm text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-amber-500/50",children:tq.map(e=>(0,k.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,k.jsxs)("div",{className:"flex justify-end gap-3 pt-2",children:[(0,k.jsx)("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors",children:"Cancel"}),(0,k.jsx)("button",{type:"submit",className:"px-4 py-2 bg-amber-500 hover:bg-amber-600 text-white text-sm font-medium rounded-lg transition-colors",children:a?"Save":"Create"})]})]})]}):null}let tQ=[{status:"active",label:"Active Projects",icon:"🚀",emptyText:"No active projects"},{status:"suggested",label:"Suggested",icon:"💡",emptyText:"No suggested projects"},{status:"completed",label:"Completed",icon:"✅",emptyText:"No completed projects"},{status:"archived",label:"Archived",icon:"📦",emptyText:"No archived projects"}];function tZ({projects:e,tasks:t,onEditTask:r,onArchiveTask:a,onDeleteTask:l,onRestoreTask:n,onMoveTask:s,onReorderTask:i,onAddSubTask:o,animateTaskIds:d,fadeOutIds:c,onNewProject:u,onEditProject:g,onUpdateProjectStatus:h}){let[x,m]=(0,w.useState)(null),[f,p]=(0,w.useState)(new Set(["completed","archived"]));if(x){let u=e.find(e=>e.id===x),h=t.filter(e=>e.project===x);return(0,k.jsxs)("div",{className:"space-y-4",children:[(0,k.jsxs)("button",{onClick:()=>m(null),className:"flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 transition-colors min-h-[44px]",children:[(0,k.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})}),"Back to projects"]}),(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[(0,k.jsx)("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:u?.color}}),u?.name,u?.status&&(0,k.jsx)("span",{className:"text-xs font-normal px-2 py-0.5 rounded-full bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400",children:u.status})]}),u&&g&&(0,k.jsx)("button",{onClick:()=>g(u),className:"text-xs text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:"Edit project"})]}),(0,k.jsx)(tX,{tasks:h,onEditTask:r,onArchiveTask:a,onDeleteTask:l,onRestoreTask:n,onMoveTask:s,onReorderTask:i,onAddSubTask:o,animateTaskIds:d,fadeOutIds:c})]})}return(0,k.jsxs)("div",{className:"space-y-6",children:[(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Projects"}),u&&(0,k.jsxs)("button",{onClick:u,className:"flex items-center gap-2 px-4 py-2 bg-amber-500 hover:bg-amber-600 text-white text-sm font-medium rounded-lg transition-colors",children:[(0,k.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),"New Project"]})]}),tQ.map(({status:r,label:a,icon:l,emptyText:n})=>{let s=e.filter(e=>(e.status||"active")===r),i=f.has(r);return(0,k.jsxs)("div",{children:[(0,k.jsxs)("button",{onClick:()=>{p(e=>{let t=new Set(e);return t.has(r)?t.delete(r):t.add(r),t})},className:"flex items-center gap-2 mb-3 text-sm font-medium text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200 transition-colors",children:[(0,k.jsx)("span",{children:l}),(0,k.jsx)("span",{children:a}),(0,k.jsxs)("span",{className:"text-xs text-gray-400 dark:text-gray-600",children:["(",s.length,")"]}),(0,k.jsx)("svg",{className:`w-3.5 h-3.5 transition-transform ${i?"":"rotate-180"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})})]}),!i&&(s.length>0?(0,k.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(e=>{let a=t.filter(t=>t.project===e.id).filter(e=>"archived"!==e.column),l=a.filter(e=>"backlog"===e.column).length,n=a.filter(e=>"in-progress"===e.column||"review"===e.column).length,s=a.filter(e=>"done"===e.column).length,i=a.length,o=i>0?Math.round(s/i*100):0;return(0,k.jsxs)("div",{className:"relative text-left bg-white dark:bg-gray-900/60 border border-gray-200 dark:border-gray-800/50 rounded-xl p-5 hover:border-amber-400 dark:hover:border-amber-500/30 hover:shadow-lg transition-all duration-200",style:{borderLeftColor:e.color,borderLeftWidth:4},children:[(0,k.jsxs)("button",{onClick:()=>m(e.id),className:"block w-full text-left",children:[(0,k.jsx)("h3",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 mb-1",children:e.name}),(0,k.jsx)("p",{className:"text-xs text-gray-500 mb-4 line-clamp-2",children:e.description}),(0,k.jsxs)("div",{className:"flex items-center gap-3 text-[11px]",children:[(0,k.jsxs)("span",{className:"text-gray-400",children:[l," backlog"]}),(0,k.jsxs)("span",{className:"text-blue-500 dark:text-blue-400",children:[n," active"]}),(0,k.jsxs)("span",{className:"text-emerald-500 dark:text-emerald-400",children:[s," done"]})]}),(0,k.jsx)("div",{className:"mt-3 w-full bg-gray-200 dark:bg-gray-800 rounded-full h-1.5",children:(0,k.jsx)("div",{className:"bg-emerald-500 h-1.5 rounded-full transition-all",style:{width:`${o}%`}})}),(0,k.jsxs)("p",{className:"text-[10px] text-gray-400 dark:text-gray-600 mt-1",children:[o,"% complete · ",i," tasks"]})]}),h&&(0,k.jsxs)("div",{className:"absolute top-3 right-3 flex items-center gap-1",children:["active"!==r&&(0,k.jsx)("button",{onClick:()=>h(e.id,"active"),className:"p-1 rounded text-[10px] text-gray-400 hover:text-emerald-500 hover:bg-emerald-50 dark:hover:bg-emerald-500/10 transition-colors",title:"Activate",children:"🚀"}),"completed"!==r&&(0,k.jsx)("button",{onClick:()=>h(e.id,"completed"),className:"p-1 rounded text-[10px] text-gray-400 hover:text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-500/10 transition-colors",title:"Complete",children:"✅"}),"archived"!==r&&(0,k.jsx)("button",{onClick:()=>h(e.id,"archived"),className:"p-1 rounded text-[10px] text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-500/10 transition-colors",title:"Archive",children:"📦"})]})]},e.id)})}):(0,k.jsx)("p",{className:"text-xs text-gray-400 dark:text-gray-600 pl-6",children:n}))]},r)})]})}function t0({tasks:e,projects:t}){let r=e.filter(e=>"archived"!==e.column),a=r.filter(e=>"in-progress"===e.column),l=r.filter(e=>"done"===e.column),n=r.filter(e=>"review"===e.column);r.filter(e=>"suggested"===e.column),r.filter(e=>"backlog"===e.column);let s=new Date(Date.now()-6048e5).toISOString(),i=l.filter(e=>(e.updatedAt||e.createdAt)>=s),o=[...l].sort((e,t)=>(t.updatedAt||t.createdAt).localeCompare(e.updatedAt||e.createdAt)).slice(0,5),d=t.filter(e=>"active"===e.status),c=e=>t.find(t=>t.id===e)?.name||e,u=e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"});return(0,k.jsxs)("div",{className:"space-y-6 max-w-5xl mx-auto",children:[(0,k.jsx)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3",children:[{label:"Total Tasks",value:r.length,icon:"📋"},{label:"In Progress",value:a.length,icon:"🔥"},{label:"Done This Week",value:i.length,icon:"✅"},{label:"In Review",value:n.length,icon:"👀"}].map(e=>(0,k.jsxs)("div",{className:"bg-white dark:bg-gray-900/40 backdrop-blur-sm border border-gray-200 dark:border-gray-800/50 rounded-xl p-4",children:[(0,k.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,k.jsx)("span",{className:"text-lg",children:e.icon}),(0,k.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:e.label})]}),(0,k.jsx)("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:e.value})]},e.label))}),a.length>0&&(0,k.jsxs)("section",{children:[(0,k.jsxs)("h2",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 mb-3 flex items-center gap-2",children:[(0,k.jsx)("span",{className:"w-2 h-2 rounded-full bg-amber-500 animate-pulse"}),"Active Now"]}),(0,k.jsx)("div",{className:"grid gap-3 sm:grid-cols-2",children:a.map(e=>{let r,a=e.activityLog&&e.activityLog.length>0?e.activityLog[e.activityLog.length-1]:null,l="number"==typeof e.progress?e.progress:0,n=l>=75?"bg-emerald-500":l>=40?"bg-amber-500":"bg-blue-500";return(0,k.jsxs)("div",{className:"bg-white dark:bg-gray-900/40 backdrop-blur-sm border border-gray-200 dark:border-gray-800/50 rounded-xl p-4",children:[(0,k.jsx)("h3",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:e.title}),(0,k.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,k.jsx)("span",{className:"inline-block w-2 h-2 rounded-full flex-shrink-0",style:{backgroundColor:(r=e.project,t.find(e=>e.id===r)?.color||"#6b7280")}}),(0,k.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:c(e.project)})]}),(0,k.jsxs)("div",{className:"flex items-center gap-2 mt-3",children:[(0,k.jsx)("div",{className:"flex-1 bg-gray-200 dark:bg-gray-800 rounded-full h-2",children:(0,k.jsx)("div",{className:`${n} h-2 rounded-full transition-all duration-500`,style:{width:`${l}%`}})}),(0,k.jsxs)("span",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300 tabular-nums w-10 text-right",children:[l,"%"]})]}),a&&(0,k.jsxs)("div",{className:"mt-3 bg-gray-50 dark:bg-gray-800/40 rounded-lg px-3 py-2 border border-gray-100 dark:border-gray-800/30",children:[(0,k.jsxs)("div",{className:"flex items-center gap-1.5 mb-1",children:[(0,k.jsx)("span",{className:"w-1.5 h-1.5 rounded-full bg-amber-500 animate-pulse flex-shrink-0"}),(0,k.jsx)("span",{className:"text-[10px] font-medium text-gray-400 dark:text-gray-500 uppercase tracking-wide",children:"Current Status"}),(0,k.jsx)("span",{className:"text-[10px] text-gray-300 dark:text-gray-600 ml-auto",children:u(a.timestamp)})]}),(0,k.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400 leading-relaxed",children:a.note})]}),e.activityLog&&e.activityLog.length>1&&(0,k.jsx)("div",{className:"mt-2 space-y-1",children:e.activityLog.slice(-4,-1).reverse().map((e,t)=>(0,k.jsxs)("div",{className:"flex items-start gap-2 text-[11px] text-gray-400 dark:text-gray-500",children:[(0,k.jsx)("span",{className:"w-1 h-1 rounded-full bg-gray-300 dark:bg-gray-700 mt-1.5 flex-shrink-0"}),(0,k.jsx)("span",{className:"line-clamp-1",children:e.note})]},t))})]},e.id)})})]}),(0,k.jsxs)("section",{children:[(0,k.jsx)("h2",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Project Health"}),(0,k.jsx)("div",{className:"space-y-2",children:d.map(e=>{let t=r.filter(t=>t.project===e.id&&!t.parentId),a=t.filter(e=>"done"===e.column).length,l=t.length,n=l>0?Math.round(a/l*100):0,s={suggested:t.filter(e=>"suggested"===e.column).length,backlog:t.filter(e=>"backlog"===e.column).length,"in-progress":t.filter(e=>"in-progress"===e.column).length,review:t.filter(e=>"review"===e.column).length,done:a};return(0,k.jsxs)("div",{className:"bg-white dark:bg-gray-900/40 backdrop-blur-sm border border-gray-200 dark:border-gray-800/50 rounded-xl p-4",children:[(0,k.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,k.jsxs)("div",{className:"flex items-center gap-2",children:[(0,k.jsx)("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.color}}),(0,k.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:e.name})]}),(0,k.jsxs)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[a,"/",l," done"]})]}),(0,k.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-800 rounded-full h-2 mb-2",children:(0,k.jsx)("div",{className:"h-2 rounded-full transition-all",style:{width:`${n}%`,backgroundColor:e.color}})}),(0,k.jsxs)("div",{className:"flex gap-3 text-[11px] text-gray-400 dark:text-gray-500",children:[s.suggested>0&&(0,k.jsxs)("span",{children:["💡 ",s.suggested]}),s.backlog>0&&(0,k.jsxs)("span",{children:["📥 ",s.backlog]}),s["in-progress"]>0&&(0,k.jsxs)("span",{children:["🔥 ",s["in-progress"]]}),s.review>0&&(0,k.jsxs)("span",{children:["👀 ",s.review]}),s.done>0&&(0,k.jsxs)("span",{children:["✅ ",s.done]})]})]},e.id)})})]}),o.length>0&&(0,k.jsxs)("section",{children:[(0,k.jsx)("h2",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Recently Completed"}),(0,k.jsx)("div",{className:"space-y-2",children:o.map(e=>(0,k.jsxs)("div",{className:"bg-white dark:bg-gray-900/40 backdrop-blur-sm border border-gray-200 dark:border-gray-800/50 rounded-xl p-3 flex items-center gap-3",children:[(0,k.jsx)("span",{className:"text-green-500 flex-shrink-0",children:"✓"}),(0,k.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,k.jsx)("span",{className:"text-sm text-gray-900 dark:text-gray-100 truncate block",children:e.title}),(0,k.jsxs)("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:[c(e.project)," · ",u(e.updatedAt||e.createdAt)]})]})]},e.id))})]})]})}let t2={".md":"📄",".json":"📊",".pdf":"📕",".csv":"📊",".html":"🌐",".txt":"📝"};function t1({node:e,depth:t=0}){let[r,a]=(0,w.useState)(t<1);if("file"===e.type){var l;let r=t2["."+e.name.split(".").pop()?.toLowerCase()]||"📎";return(0,k.jsxs)("div",{className:"flex items-center gap-2 py-1.5 px-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800/40 transition-colors",style:{paddingLeft:`${16*t+8}px`},children:[(0,k.jsx)("span",{className:"text-sm",children:r}),(0,k.jsx)("span",{className:"text-sm text-gray-700 dark:text-gray-300 truncate",children:e.name}),void 0!==e.size&&(0,k.jsx)("span",{className:"text-[10px] text-gray-400 dark:text-gray-500 ml-auto flex-shrink-0",children:(l=e.size)?l<1024?`${l}B`:l<1048576?`${(l/1024).toFixed(1)}KB`:`${(l/1048576).toFixed(1)}MB`:""})]})}let n=e.children&&e.children.length>0;return(0,k.jsxs)("div",{children:[(0,k.jsxs)("button",{onClick:()=>a(!r),className:"flex items-center gap-2 py-1.5 px-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800/40 transition-colors w-full text-left",style:{paddingLeft:`${16*t+8}px`},children:[(0,k.jsx)("svg",{className:`w-3 h-3 text-gray-400 transition-transform ${r?"rotate-90":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})}),(0,k.jsx)("span",{className:"text-sm",children:"📁"}),(0,k.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:e.name}),n&&(0,k.jsx)("span",{className:"text-[10px] text-gray-400 dark:text-gray-500 ml-auto",children:e.children.length})]}),r&&n&&(0,k.jsx)("div",{children:e.children.map(e=>(0,k.jsx)(t1,{node:e,depth:t+1},e.path))})]})}function t5(){let[e,t]=(0,w.useState)([]),[r,a]=(0,w.useState)(!0);return((0,w.useEffect)(()=>{j("/api/workspace").then(t).catch(console.error).finally(()=>a(!1))},[]),r)?(0,k.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,k.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400 animate-pulse",children:"Loading workspace..."})}):(0,k.jsxs)("div",{className:"max-w-3xl mx-auto space-y-4",children:[(0,k.jsx)("h1",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Workspace"}),(0,k.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Project files, deliverables, and outputs."}),(0,k.jsxs)("div",{className:"bg-white dark:bg-gray-900/40 backdrop-blur-sm border border-gray-200 dark:border-gray-800/50 rounded-xl p-2",children:[e.map(e=>(0,k.jsx)(t1,{node:e},e.path)),0===e.length&&(0,k.jsx)("div",{className:"p-8 text-center text-sm text-gray-500",children:"No files found."})]})]})}let t4={deploy:"🚀",build:"🔨",research:"🔍",decision:"⚡",fix:"🔧"},t3={deploy:"bg-green-500/10 text-green-500 border-green-500/20",build:"bg-amber-500/10 text-amber-500 border-amber-500/20",research:"bg-blue-500/10 text-blue-500 border-blue-500/20",decision:"bg-purple-500/10 text-purple-500 border-purple-500/20",fix:"bg-red-500/10 text-red-500 border-red-500/20"};function t6({projects:e}){let[t,r]=(0,w.useState)([]),[a,l]=(0,w.useState)(null);(0,w.useEffect)(()=>{j("/api/milestones").then(r).catch(console.error)},[]);let n=[...a?t.filter(e=>e.project===a):t].sort((e,t)=>t.timestamp.localeCompare(e.timestamp)),s={};for(let e of n){let t=new Date(e.timestamp).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"});s[t]||(s[t]=[]),s[t].push(e)}return(0,k.jsxs)("div",{className:"max-w-3xl mx-auto space-y-6",children:[(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsx)("h1",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Timeline"}),(0,k.jsxs)("select",{value:a||"",onChange:e=>l(e.target.value||null),className:"text-xs bg-white dark:bg-gray-900/40 border border-gray-200 dark:border-gray-800/50 rounded-lg px-3 py-2 text-gray-700 dark:text-gray-300 min-h-[36px]",children:[(0,k.jsx)("option",{value:"",children:"All Projects"}),e.filter(e=>"active"===e.status).map(e=>(0,k.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),Object.entries(s).map(([t,r])=>(0,k.jsxs)("div",{children:[(0,k.jsx)("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-3 sticky top-0 bg-gray-50/80 dark:bg-gray-950/80 backdrop-blur-sm py-1 z-10",children:t}),(0,k.jsx)("div",{className:"space-y-3 relative pl-6 before:absolute before:left-[11px] before:top-2 before:bottom-2 before:w-px before:bg-gray-200 dark:before:bg-gray-800",children:r.map(t=>{let r,a;return(0,k.jsxs)("div",{className:"relative",children:[(0,k.jsx)("div",{className:"absolute -left-6 top-3 w-[22px] h-[22px] rounded-full bg-white dark:bg-gray-950 border-2 border-gray-200 dark:border-gray-800 flex items-center justify-center text-xs z-10",children:t4[t.type]||"📌"}),(0,k.jsxs)("div",{className:"bg-white dark:bg-gray-900/40 backdrop-blur-sm border border-gray-200 dark:border-gray-800/50 rounded-xl p-4",children:[(0,k.jsxs)("div",{className:"flex items-start justify-between gap-2 mb-1",children:[(0,k.jsx)("h3",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:t.title}),(0,k.jsx)("span",{className:`text-[10px] font-medium px-2 py-0.5 rounded-full border flex-shrink-0 ${t3[t.type]||""}`,children:t.type})]}),(0,k.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:t.description}),(0,k.jsxs)("div",{className:"flex items-center gap-2 text-[11px] text-gray-400 dark:text-gray-500",children:[(0,k.jsx)("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:(r=t.project,e.find(e=>e.id===r)?.color||"#6b7280")}}),(0,k.jsx)("span",{children:(a=t.project,e.find(e=>e.id===a)?.name||a)}),(0,k.jsx)("span",{children:"·"}),(0,k.jsx)("span",{children:new Date(t.timestamp).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]})]})]},t.id)})})]},t)),0===n.length&&(0,k.jsxs)("div",{className:"bg-white dark:bg-gray-900/40 backdrop-blur-sm border border-gray-200 dark:border-gray-800/50 rounded-xl p-8 text-center",children:[(0,k.jsx)("div",{className:"text-4xl mb-4",children:"📅"}),(0,k.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-200 mb-2",children:"No milestones yet"}),(0,k.jsx)("p",{className:"text-sm text-gray-500",children:"Milestones will appear here as work gets done."})]})]})}let t7=["dashboard","board","workspace","timeline","projects","team"];function t8(){let e=window.location.hash.replace("#","");return"tasks"===e?"board":t7.includes(e)?e:"dashboard"}let t9=e=>tR.find(t=>t.id===e)?.title||e;function re(){let{toast:e}=(0,tz.useToast)(),[t,r]=(0,w.useState)("dashboard"),[a,l]=(0,w.useState)(!1),[n,s]=(0,w.useState)([]),[i,o]=(0,w.useState)([]),[d,c]=(0,w.useState)([]),[u,g]=(0,w.useState)(!1),[h,x]=(0,w.useState)(null),[m,f]=(0,w.useState)(null),[p,b]=(0,w.useState)(null),[v,y]=(0,w.useState)(null),[E,L]=(0,w.useState)(!1),[T,O]=(0,w.useState)(null),[$,P]=(0,w.useState)(new Set),[B,z]=(0,w.useState)(new Set),W=(0,w.useCallback)((...e)=>{P(new Set(e)),setTimeout(()=>P(new Set),1500)},[]),F=(0,w.useCallback)(e=>new Promise(t=>{z(new Set(e)),setTimeout(t,450)}),[]);(0,w.useEffect)(()=>{r(t8());let e=()=>r(t8());return window.addEventListener("hashchange",e),()=>window.removeEventListener("hashchange",e)},[]);let U=(0,w.useCallback)(e=>{window.location.hash=e},[]),H=(0,w.useCallback)(async()=>{try{let[e,t,r]=await Promise.all([j("/api/tasks"),j("/api/projects"),j("/api/activities")]);s(e),o(t),c(r)}catch(e){console.error("Failed to load data:",e)}},[]);(0,w.useEffect)(()=>{H()},[H]),(0,w.useEffect)(()=>{let e=setInterval(H,5e3),t=()=>H();return window.addEventListener("focus",t),()=>{clearInterval(e),window.removeEventListener("focus",t)}},[H]);let[K,X]=(0,w.useState)(!1),Y=n.filter(e=>(!p||e.agent===p)&&(!v||e.project===v)),V=(0,w.useCallback)(()=>{x(null),f(null),g(!0)},[]);(0,w.useEffect)(()=>{let e=e=>{let r=e.target?.tagName;if("INPUT"===r||"TEXTAREA"===r||"SELECT"===r||u||E)return;let a=e.key.toLowerCase();if(a>="1"&&a<="5"&&!e.metaKey&&!e.ctrlKey&&!e.altKey){let t=parseInt(a)-1;t<t7.length&&(e.preventDefault(),U(t7[t]))}"n"!==a||e.metaKey||e.ctrlKey||e.altKey||"board"!==t||(e.preventDefault(),V()),("?"===a||"/"===a&&e.shiftKey)&&(e.preventDefault(),X(e=>!e))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[U,t,V,u,E]);let J=(0,w.useCallback)(e=>{x(null),f(e),g(!0)},[]),_=(0,w.useCallback)(e=>{x(e),g(!0)},[]),q=(0,w.useCallback)(async t=>{try{let r=n.find(e=>e.id===t);if(!r)return;let a="archived"!==r.column?r.column:"backlog",l=n.filter(e=>e.column===r.column&&!e.parentId).findIndex(e=>e.id===t),s=n.filter(e=>e.parentId===t).map(e=>e.id);for(let e of(await F([t,...s]),await C(t,{column:"archived",previousColumn:a,previousIndex:l>=0?l:null}),n.filter(e=>e.parentId===t))){let t="archived"!==e.column?e.column:"backlog";await C(e.id,{column:"archived",previousColumn:t})}await H(),z(new Set),e("Archived",{type:"warning",action:{label:"Undo",onClick:async()=>{try{await C(t,{column:a,previousColumn:null,previousIndex:null}),l>=0&&await S(t,a,l);let r=await j("/api/tasks"),n=[];for(let e of r.filter(e=>e.parentId===t&&"archived"===e.column))await C(e.id,{column:e.previousColumn||a,previousColumn:null}),n.push(e.id);await H(),W(t,...n),e("Restored",{type:"success"})}catch{e("Failed",{type:"error"})}}}})}catch(e){console.error("Failed to archive task:",e)}},[H,n,e]),G=(0,w.useCallback)(async t=>{try{let r=n.find(e=>e.id===t);if(!r)return;let a=[...n.filter(e=>e.parentId===t)],l=n.filter(e=>e.column===r.column&&!e.parentId).findIndex(e=>e.id===t);await F([t,...a.map(e=>e.id)]),await j(`/api/tasks/?id=${t}`,{method:"DELETE"}),await H(),z(new Set),e("Deleted",{type:"error",durationMs:8e3,action:{label:"Undo",onClick:async()=>{try{let t=await N({title:r.title,description:r.description,column:r.column,agent:r.agent,agentColor:r.agentColor,project:r.project,parentId:r.parentId});l>=0&&await S(t.id,r.column,l);let n=[t.id];for(let e of a){let r=await N({title:e.title,description:e.description,column:e.column,agent:e.agent,agentColor:e.agentColor,project:e.project,parentId:t.id});n.push(r.id)}await H(),W(...n),e("Restored",{type:"success"})}catch{e("Restore failed",{type:"error"})}}}})}catch(e){console.error("Failed to delete task:",e)}},[H,n,e]),Q=(0,w.useCallback)(async t=>{try{let r=await j("/api/tasks"),a=r.find(e=>e.id===t);if(!a)return;let l=a.previousColumn||"backlog",n=a.previousIndex,s=r.filter(e=>e.parentId===t&&"archived"===e.column);await F([t,...s.map(e=>e.id)]),await C(t,{column:l,previousColumn:null,previousIndex:null}),null!=n&&n>=0&&await S(t,l,n);let i=[];for(let e of s){let t=e.previousColumn||l;await C(e.id,{column:t,previousColumn:null,previousIndex:null}),i.push(e.id)}await H(),z(new Set),W(t,...i),e(`Restored → ${t9(l)}`,{type:"success"})}catch(e){console.error("Failed to restore task:",e)}},[H,e]),[Z,ee]=(0,w.useState)(!1),et=(0,w.useCallback)(async(t,r,a)=>{try{let l,s=["suggested","backlog","in-progress","review","done","archived"],i=n.find(e=>e.id===t);if(!i)return;let o={column:r};void 0!==a&&(o.parentId=a);let d=s.indexOf(r)>(l=i.column,s.indexOf(l));if(i.parentId){let l=n.find(e=>e.id===i.parentId);if(l&&"suggested"===l.column&&"suggested"!==r)return;if(a&&a!==i.parentId){let e=n.find(e=>e.id===a);e&&(o.column=e.column)}let s=i.column,d=o.column||r;if(s!==d&&await F([t]),await C(t,o),a&&a!==i.parentId?(n.find(e=>e.id===a),e("Added as sub-task",{type:"info"})):s!==d&&e(`Moved → ${t9(d)}`,{type:"info"}),"done"===r&&i.parentId){let r=n.filter(e=>e.parentId===i.parentId&&e.id!==t).every(e=>"done"===e.column),a=n.find(e=>e.id===i.parentId);r&&a&&"done"!==a.column&&confirm(`All sub-tasks are now done. Mark "${a.title}" as done too?`)&&(await C(a.id,{column:"done"}),e(`Parent completed ✓`,{type:"success"}))}await H(),z(new Set),W(t);return}let c=n.filter(e=>e.parentId===t);if(i.column!==r&&await F([t,...c.map(e=>e.id)]),"archived"===r){if(c.length>0&&!confirm(`This will also archive ${c.length} sub-task${c.length>1?"s":""}. Continue?`))return;for(let e of(await C(t,o),c))await C(e.id,{column:"archived"})}else if(d){if("done"===r&&c.length>0){let e=c.filter(e=>"done"!==e.column);if(e.length>0){if(!confirm(`${e.length} sub-task${e.length>1?"s are":" is"} not done yet. Mark all as done?`))return;for(let t of e)await C(t.id,{column:"done"})}}else for(let e of c.filter(e=>{let t;return t=e.column,s.indexOf(t)<s.indexOf(r)&&"done"!==e.column}))await C(e.id,{column:r});await C(t,o)}else{let e=c.filter(e=>{let t;return t=e.column,s.indexOf(t)>s.indexOf(r)});if(e.length>0){let t=t9(r);if(!confirm(`Moving backward will also move ${e.length} sub-task${e.length>1?"s":""} back to "${t}". Continue?`))return;for(let t of e)await C(t.id,{column:r})}await C(t,o)}i.column!==r&&e(`Moved → ${t9(r)}`,{type:"done"===r?"success":"info"}),await H(),z(new Set),i.column!==r&&W(t)}catch(e){console.error("Failed to move task:",e)}},[H,n,e]),er=(0,w.useCallback)(async(t,r,a)=>{try{let l=n.find(e=>e.id===t);l&&l.column!==r&&await F([t]),await S(t,r,a),await H(),z(new Set),W(t),l&&l.column!==r&&e(`Moved → ${t9(r)}`,{type:"info"})}catch(e){console.error("Failed to reorder task:",e)}},[H,n,e]),ea=(0,w.useCallback)(()=>{O(null),L(!0)},[]),el=(0,w.useCallback)(e=>{O(e),L(!0)},[]),en=(0,w.useCallback)(async e=>{try{if(T)await M(T.id,e);else await j("/api/projects",{method:"POST",body:JSON.stringify(e)});await H()}catch(e){console.error("Failed to save project:",e)}},[T,H]),es=(0,w.useCallback)(async(e,t)=>{try{await M(e,{status:t}),await H()}catch(e){console.error("Failed to update project status:",e)}},[H]),ei=(0,w.useCallback)(async e=>{h?await C(h.id,e):await N(e),await H()},[h,H]);return(0,k.jsxs)("div",{className:"flex h-screen overflow-hidden",children:[(0,k.jsx)(D,{activeTab:t,onTabChange:U}),a&&(0,k.jsxs)("div",{className:"fixed inset-0 z-40 md:hidden",children:[(0,k.jsx)("div",{className:"absolute inset-0 bg-black/50",onClick:()=>l(!1)}),(0,k.jsxs)("aside",{className:"absolute left-0 top-0 bottom-0 w-64 bg-white/95 dark:bg-gray-900/95 backdrop-blur-xl border-r border-gray-200 dark:border-gray-800/50 z-50",children:[(0,k.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-800/50",children:[(0,k.jsxs)("div",{className:"flex items-center gap-2",children:[(0,k.jsx)("span",{className:"text-lg",children:"⚡"}),(0,k.jsx)("span",{className:"font-semibold text-sm text-gray-900 dark:text-gray-100",children:"Mission Control"})]}),(0,k.jsx)("button",{onClick:()=>l(!1),className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800/60 text-gray-500 dark:text-gray-400 min-w-[44px] min-h-[44px] flex items-center justify-center",children:(0,k.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),(0,k.jsx)("nav",{className:"p-3 space-y-1",children:[{id:"dashboard",label:"Dashboard"},{id:"board",label:"Board"},{id:"workspace",label:"Workspace"},{id:"timeline",label:"Timeline"},{id:"projects",label:"Projects"},{id:"team",label:"Team"}].map(e=>(0,k.jsx)("a",{href:`#${e.id}`,onClick:t=>{t.preventDefault(),U(e.id),l(!1)},className:`block w-full text-left px-4 py-3 rounded-lg text-sm font-medium transition-all min-h-[44px] ${t===e.id?"bg-amber-500/10 text-amber-500 dark:text-amber-400 border border-amber-500/20":"text-gray-500 dark:text-gray-300 hover:text-gray-700 dark:hover:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-800/40"}`,children:e.label},e.id))})]})]}),(0,k.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,k.jsx)(A,{onMenuToggle:()=>l(!0)}),"dashboard"===t?(0,k.jsx)("main",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:(0,k.jsx)(t0,{tasks:n,projects:i})}):"board"===t?(0,k.jsxs)("main",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,k.jsxs)("div",{className:"flex flex-col lg:flex-row flex-1 min-h-0",children:[(0,k.jsxs)("div",{className:"flex-1 p-4 md:p-6 space-y-5 overflow-y-auto",children:[(0,k.jsx)(I,{tasks:n}),(0,k.jsx)(R,{selectedAgent:p,selectedProject:v,onAgentChange:b,onProjectChange:y,onNewTask:V,projects:i,tasks:n}),(0,k.jsx)(tX,{tasks:Y,onEditTask:_,onArchiveTask:q,onDeleteTask:G,onRestoreTask:Q,onMoveTask:et,onReorderTask:er,onAddSubTask:J,animateTaskIds:$,fadeOutIds:B})]}),(0,k.jsx)("div",{className:"hidden lg:block w-72 xl:w-80 flex-shrink-0 p-6 pl-0",children:(0,k.jsx)(tV,{activities:d})})]}),(0,k.jsxs)("div",{className:"lg:hidden border-t border-gray-200 dark:border-gray-800/50 flex-shrink-0",children:[(0,k.jsxs)("button",{onClick:()=>ee(!Z),className:"w-full flex items-center justify-between px-4 py-2 text-xs font-medium text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 transition-colors",children:[(0,k.jsxs)("span",{className:"flex items-center gap-2",children:[(0,k.jsx)("span",{className:"w-2 h-2 rounded-full bg-emerald-400 animate-pulse"}),"Activity (",d.length,")"]}),(0,k.jsx)("svg",{className:`w-4 h-4 transition-transform ${Z?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 15.75l7.5-7.5 7.5 7.5"})})]}),Z&&(0,k.jsx)("div",{className:"max-h-[150px] overflow-y-auto px-4 pb-3",children:(0,k.jsx)(tV,{activities:d})})]})]}):"projects"===t?(0,k.jsx)("main",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:(0,k.jsx)(tZ,{projects:i,tasks:n,onEditTask:_,onArchiveTask:q,onDeleteTask:G,onRestoreTask:Q,onMoveTask:et,onReorderTask:er,onAddSubTask:J,animateTaskIds:$,fadeOutIds:B,onNewProject:ea,onEditProject:el,onUpdateProjectStatus:es})}):"workspace"===t?(0,k.jsx)("main",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:(0,k.jsx)(t5,{})}):"timeline"===t?(0,k.jsx)("main",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:(0,k.jsx)(t6,{projects:i})}):(0,k.jsx)("main",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:(0,k.jsxs)("div",{className:"bg-white dark:bg-gray-900/40 backdrop-blur-sm border border-gray-200 dark:border-gray-800/50 rounded-xl p-8 text-center",children:[(0,k.jsx)("div",{className:"text-4xl mb-4",children:"🤖"}),(0,k.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-200 mb-2",children:"Team"}),(0,k.jsx)("p",{className:"text-sm text-gray-500 max-w-md mx-auto",children:"Your AI sub-agents and team members will appear here. This view is coming soon as your agent team grows."})]})})]}),(0,k.jsx)(tJ,{isOpen:u,onClose:()=>{g(!1),x(null),f(null)},onSave:ei,editingTask:h,projects:i,tasks:n,preselectedParentId:m}),(0,k.jsx)(tG,{isOpen:E,onClose:()=>{L(!1),O(null)},onSave:en,editingProject:T}),K&&(0,k.jsxs)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center",onClick:()=>X(!1),children:[(0,k.jsx)("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm"}),(0,k.jsxs)("div",{className:"relative bg-white dark:bg-gray-900 rounded-2xl shadow-2xl border border-gray-200 dark:border-gray-800 p-6 w-80 max-w-[90vw]",onClick:e=>e.stopPropagation(),children:[(0,k.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,k.jsx)("h3",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:"Keyboard Shortcuts"}),(0,k.jsx)("button",{onClick:()=>X(!1),className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-400",children:(0,k.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),(0,k.jsx)("div",{className:"space-y-2.5 text-xs",children:[["1-5","Switch tabs"],["N","New task (tasks tab)"],["?","Toggle this help"]].map(([e,t])=>(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:t}),(0,k.jsx)("kbd",{className:"px-2 py-0.5 bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-300 rounded-md font-mono text-[11px] border border-gray-200 dark:border-gray-700",children:e})]},e))})]})]})]})}e.s(["default",()=>re],31713)}]);