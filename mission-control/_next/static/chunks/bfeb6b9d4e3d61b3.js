(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31713,e=>{"use strict";let t;var r,a,n,l,i,s,o,d,c,u,g,h,m,x,f,p,b,v,y,k=e.i(43476),w=e.i(71645);async function j(e,t){let r=`https://heather-duplicate-having-domestic.trycloudflare.com${e}${e.includes("?")?"":"/"}`,a=await fetch(r,{...t,headers:{"Content-Type":"application/json",...t?.headers}});if(!a.ok)throw Error(`API error: ${a.status}`);return a.json()}e.i(47167);let N=e=>j("/api/tasks",{method:"POST",body:JSON.stringify(e)}),C=(e,t)=>j("/api/tasks",{method:"PUT",body:JSON.stringify({id:e,...t})}),S=(e,t,r)=>j("/api/tasks",{method:"PATCH",body:JSON.stringify({id:e,column:t,index:r})}),E=(e,t)=>j("/api/projects",{method:"PUT",body:JSON.stringify({id:e,...t})});function M(e){let t=Math.floor((Date.now()-new Date(e).getTime())/1e3);if(t<60)return"just now";let r=Math.floor(t/60);if(r<60)return`${r}m ago`;let a=Math.floor(r/60);if(a<24)return`${a}h ago`;let n=Math.floor(a/24);return`${n}d ago`}let D=[{id:"tasks",label:"Tasks",icon:(0,k.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})},{id:"projects",label:"Projects",icon:(0,k.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12.75V12A2.25 2.25 0 014.5 9.75h15A2.25 2.25 0 0121.75 12v.75m-8.69-6.44l-2.12-2.12a1.5 1.5 0 00-1.061-.44H4.5A2.25 2.25 0 002.25 6v12a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9a2.25 2.25 0 00-2.25-2.25h-5.379a1.5 1.5 0 01-1.06-.44z"})})},{id:"automations",label:"Automations",icon:(0,k.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75z"})})},{id:"team",label:"Team",icon:(0,k.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-3.07M12 6.375a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zm8.25 2.25a2.625 2.625 0 11-5.25 0 2.625 2.625 0 015.25 0z"})})}];function T({activeTab:e,onTabChange:t}){let[r,a]=(0,w.useState)(!1);return(0,k.jsxs)("aside",{className:`hidden md:flex flex-col ${r?"w-16":"w-56"} bg-white/80 dark:bg-gray-900/40 backdrop-blur-xl border-r border-gray-200 dark:border-gray-800/50 transition-all duration-300 ease-in-out flex-shrink-0`,children:[(0,k.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-800/50",children:[!r&&(0,k.jsxs)("div",{className:"flex items-center gap-2",children:[(0,k.jsx)("span",{className:"text-lg",children:"⚡"}),(0,k.jsx)("span",{className:"font-semibold text-sm text-gray-900 dark:text-gray-100",children:"Mission Control"})]}),(0,k.jsx)("button",{onClick:()=>a(!r),className:"p-1.5 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800/60 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 transition-colors min-w-[36px] min-h-[36px] flex items-center justify-center",children:(0,k.jsx)("svg",{className:`w-4 h-4 transition-transform duration-300 ${r?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})})})]}),(0,k.jsx)("nav",{className:"flex-1 p-3 space-y-1",children:D.map(a=>(0,k.jsxs)("a",{href:`#${a.id}`,onClick:e=>{e.preventDefault(),t(a.id)},className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200 min-h-[44px] ${e===a.id?"bg-amber-500/10 text-amber-500 dark:text-amber-400 border border-amber-500/20":"text-gray-500 dark:text-gray-300 hover:text-gray-700 dark:hover:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-800/40"}`,title:r?a.label:void 0,children:[a.icon,!r&&(0,k.jsx)("span",{children:a.label})]},a.id))}),!r&&(0,k.jsx)("div",{className:"p-4 border-t border-gray-200 dark:border-gray-800/50",children:(0,k.jsxs)("div",{className:"flex items-center gap-2",children:[(0,k.jsx)("div",{className:"w-7 h-7 rounded-full bg-gradient-to-br from-amber-400 to-orange-500 flex items-center justify-center text-xs font-bold text-gray-950",children:"E"}),(0,k.jsxs)("div",{className:"text-xs",children:[(0,k.jsx)("div",{className:"text-gray-700 dark:text-gray-300 font-medium",children:"Ephraim"}),(0,k.jsx)("div",{className:"text-gray-400 dark:text-gray-500",children:"Owner"})]})]})})]})}var L=e.i(50208);function R({onMenuToggle:e}){let{mode:t,cycle:r}=(0,L.useTheme)(),a="dark"===t?(0,k.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z"})}):"light"===t?(0,k.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z"})}):(0,k.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 17.25v1.007a3 3 0 01-.879 2.122L7.5 21h9l-.621-.621A3 3 0 0115 18.257V17.25m6-12V15a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 15V5.25A2.25 2.25 0 015.25 3h13.5A2.25 2.25 0 0121 5.25z"})}),n="dark"===t?"Dark":"light"===t?"Light":"System";return(0,k.jsxs)("header",{className:"flex items-center justify-between px-4 py-3 bg-white/80 dark:bg-gray-900/60 backdrop-blur-xl border-b border-gray-200 dark:border-gray-800/50",children:[(0,k.jsx)("button",{onClick:e,className:"md:hidden p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800/60 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 transition-colors min-w-[44px] min-h-[44px] flex items-center justify-center",children:(0,k.jsx)("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})})}),(0,k.jsxs)("div",{className:"flex items-center gap-2 md:hidden",children:[(0,k.jsx)("span",{className:"text-lg",children:"⚡"}),(0,k.jsx)("span",{className:"font-semibold text-sm text-gray-900 dark:text-gray-100",children:"Mission Control"})]}),(0,k.jsx)("div",{className:"hidden md:block"}),(0,k.jsxs)("button",{onClick:r,className:"flex items-center gap-2 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800/60 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 transition-colors min-w-[44px] min-h-[44px] justify-center",title:`Theme: ${n}`,children:[a,(0,k.jsx)("span",{className:"text-xs font-medium hidden sm:inline",children:n})]})]})}function I({tasks:e}){let t=e.filter(e=>"archived"!==e.column&&"suggested"!==e.column),r=e.filter(e=>"suggested"===e.column).length,a=t.filter(e=>"in-progress"===e.column).length,n=t.filter(e=>"done"===e.column).length,l=t.length,i=e.filter(e=>"archived"===e.column).length,s=l>0?Math.round(n/l*100):0,o=[...r>0?[{label:"Suggested",value:r.toString(),color:"text-purple-400"}]:[],{label:"Approved",value:l.toString(),color:"text-gray-900 dark:text-gray-100"},{label:"In progress",value:a.toString(),color:"text-blue-500 dark:text-blue-400"},{label:"Completion",value:`${s}%`,color:"text-emerald-500 dark:text-emerald-400"},...i>0?[{label:"Archived",value:i.toString(),color:"text-red-500 dark:text-red-400"}]:[]];return(0,k.jsx)("div",{className:"flex gap-3 overflow-x-auto pb-1 lg:grid lg:overflow-x-visible scrollbar-hide",style:{gridTemplateColumns:`repeat(${o.length}, minmax(0, 1fr))`},children:o.map(e=>(0,k.jsxs)("div",{className:"flex-shrink-0 min-w-[120px] lg:min-w-0 bg-white dark:bg-gray-900/40 backdrop-blur-sm border border-gray-200 dark:border-gray-800/50 rounded-xl px-4 py-3",children:[(0,k.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:e.label}),(0,k.jsx)("div",{className:`text-xl font-bold ${e.color}`,children:e.value})]},e.label))})}function A({selectedAgent:e,selectedProject:t,onAgentChange:r,onProjectChange:a,onNewTask:n,projects:l,tasks:i}){let s=[...new Set(i.map(e=>e.agent).filter(Boolean))];return(0,k.jsxs)("div",{className:"flex flex-col gap-3 lg:flex-row lg:flex-wrap lg:items-center",children:[(0,k.jsxs)("button",{onClick:n,className:"w-full lg:w-auto flex items-center justify-center gap-1.5 px-4 py-2 bg-amber-500 hover:bg-amber-400 text-gray-950 font-semibold text-sm rounded-lg transition-colors min-h-[44px]",children:[(0,k.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),"New task"]}),(0,k.jsxs)("div",{className:"flex items-center gap-2 overflow-x-auto scrollbar-hide",children:[s.map(t=>(0,k.jsxs)("button",{onClick:()=>r(e===t?null:t),className:`flex-shrink-0 flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-medium transition-all min-h-[36px] ${e===t?"bg-amber-500/20 text-amber-500 dark:text-amber-400 border border-amber-500/30":"bg-gray-100 dark:bg-gray-800/60 text-gray-500 dark:text-gray-400 border border-gray-300 dark:border-gray-700/50 hover:border-gray-400 dark:hover:border-gray-600/50 hover:text-gray-700 dark:hover:text-gray-300"}`,children:[(0,k.jsx)("span",{className:"w-2 h-2 rounded-full bg-amber-400"}),t]},t)),(0,k.jsxs)("select",{value:t||"",onChange:e=>a(e.target.value||null),className:"flex-shrink-0 bg-gray-100 dark:bg-gray-800/60 border border-gray-300 dark:border-gray-700/50 text-gray-700 dark:text-gray-300 text-xs rounded-lg px-3 py-2 min-h-[36px] focus:outline-none focus:border-amber-500/50 transition-colors",children:[(0,k.jsx)("option",{value:"",children:"All projects"}),l.map(e=>(0,k.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]})}var O=e.i(74080);let P="u">typeof window&&void 0!==window.document&&void 0!==window.document.createElement;function $(e){let t=Object.prototype.toString.call(e);return"[object Window]"===t||"[object global]"===t}function B(e){return"nodeType"in e}function W(e){var t,r;return e?$(e)?e:B(e)&&null!=(t=null==(r=e.ownerDocument)?void 0:r.defaultView)?t:window:window}function z(e){let{Document:t}=W(e);return e instanceof t}function F(e){return!$(e)&&e instanceof W(e).HTMLElement}function U(e){return e instanceof W(e).SVGElement}function H(e){return e?$(e)?e.document:B(e)?z(e)?e:F(e)||U(e)?e.ownerDocument:document:document:document}let Y=P?w.useLayoutEffect:w.useEffect;function X(e){let t=(0,w.useRef)(e);return Y(()=>{t.current=e}),(0,w.useCallback)(function(){for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];return null==t.current?void 0:t.current(...r)},[])}function K(e,t){void 0===t&&(t=[e]);let r=(0,w.useRef)(e);return Y(()=>{r.current!==e&&(r.current=e)},t),r}function V(e,t){let r=(0,w.useRef)();return(0,w.useMemo)(()=>{let t=e(r.current);return r.current=t,t},[...t])}function J(e){let t=X(e),r=(0,w.useRef)(null),a=(0,w.useCallback)(e=>{e!==r.current&&(null==t||t(e,r.current)),r.current=e},[]);return[r,a]}function _(e){let t=(0,w.useRef)();return(0,w.useEffect)(()=>{t.current=e},[e]),t.current}let q={};function G(e,t){return(0,w.useMemo)(()=>{if(t)return t;let r=null==q[e]?0:q[e]+1;return q[e]=r,e+"-"+r},[e,t])}function Q(e){return function(t){for(var r=arguments.length,a=Array(r>1?r-1:0),n=1;n<r;n++)a[n-1]=arguments[n];return a.reduce((t,r)=>{for(let[a,n]of Object.entries(r)){let r=t[a];null!=r&&(t[a]=r+e*n)}return t},{...t})}}let Z=Q(1),ee=Q(-1);function et(e){if(!e)return!1;let{KeyboardEvent:t}=W(e.target);return t&&e instanceof t}function er(e){if(function(e){if(!e)return!1;let{TouchEvent:t}=W(e.target);return t&&e instanceof t}(e)){if(e.touches&&e.touches.length){let{clientX:t,clientY:r}=e.touches[0];return{x:t,y:r}}else if(e.changedTouches&&e.changedTouches.length){let{clientX:t,clientY:r}=e.changedTouches[0];return{x:t,y:r}}}return"clientX"in e&&"clientY"in e?{x:e.clientX,y:e.clientY}:null}let ea=Object.freeze({Translate:{toString(e){if(!e)return;let{x:t,y:r}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;let{scaleX:t,scaleY:r}=e;return"scaleX("+t+") scaleY("+r+")"}},Transform:{toString(e){if(e)return[ea.Translate.toString(e),ea.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:r,easing:a}=e;return t+" "+r+"ms "+a}}}),en="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]",el={display:"none"};function ei(e){let{id:t,value:r}=e;return w.default.createElement("div",{id:t,style:el},r)}function es(e){let{id:t,announcement:r,ariaLiveType:a="assertive"}=e;return w.default.createElement("div",{id:t,style:{position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"},role:"status","aria-live":a,"aria-atomic":!0},r)}let eo=(0,w.createContext)(null),ed={draggable:"\n    To pick up a draggable item, press the space bar.\n    While dragging, use the arrow keys to move the item.\n    Press space again to drop the item in its new position, or press escape to cancel.\n  "},ec={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was moved over droppable area "+r.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was dropped over droppable area "+r.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function eu(e){var t;let r,{announcements:a=ec,container:n,hiddenTextDescribedById:l,screenReaderInstructions:i=ed}=e,{announce:s,announcement:o}=function(){let[e,t]=(0,w.useState)("");return{announce:(0,w.useCallback)(e=>{null!=e&&t(e)},[]),announcement:e}}(),d=G("DndLiveRegion"),[c,u]=(0,w.useState)(!1);if((0,w.useEffect)(()=>{u(!0)},[]),t=(0,w.useMemo)(()=>({onDragStart(e){let{active:t}=e;s(a.onDragStart({active:t}))},onDragMove(e){let{active:t,over:r}=e;a.onDragMove&&s(a.onDragMove({active:t,over:r}))},onDragOver(e){let{active:t,over:r}=e;s(a.onDragOver({active:t,over:r}))},onDragEnd(e){let{active:t,over:r}=e;s(a.onDragEnd({active:t,over:r}))},onDragCancel(e){let{active:t,over:r}=e;s(a.onDragCancel({active:t,over:r}))}}),[s,a]),r=(0,w.useContext)(eo),(0,w.useEffect)(()=>{if(!r)throw Error("useDndMonitor must be used within a children of <DndContext>");return r(t)},[t,r]),!c)return null;let g=w.default.createElement(w.default.Fragment,null,w.default.createElement(ei,{id:l,value:i.draggable}),w.default.createElement(es,{id:d,announcement:o}));return n?(0,O.createPortal)(g,n):g}function eg(){}function eh(e,t){return(0,w.useMemo)(()=>({sensor:e,options:null!=t?t:{}}),[e,t])}(r=u||(u={})).DragStart="dragStart",r.DragMove="dragMove",r.DragEnd="dragEnd",r.DragCancel="dragCancel",r.DragOver="dragOver",r.RegisterDroppable="registerDroppable",r.SetDroppableDisabled="setDroppableDisabled",r.UnregisterDroppable="unregisterDroppable";let em=Object.freeze({x:0,y:0});function ex(e,t){let{data:{value:r}}=e,{data:{value:a}}=t;return r-a}function ef(e,t){let{data:{value:r}}=e,{data:{value:a}}=t;return a-r}function ep(e,t,r){return void 0===t&&(t=e.left),void 0===r&&(r=e.top),{x:t+.5*e.width,y:r+.5*e.height}}let eb=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:a}=e,n=ep(t,t.left,t.top),l=[];for(let e of a){let{id:t}=e,a=r.get(t);if(a){var i;let r=(i=ep(a),Math.sqrt(Math.pow(i.x-n.x,2)+Math.pow(i.y-n.y,2)));l.push({id:t,data:{droppableContainer:e,value:r}})}}return l.sort(ex)},ev=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:a}=e,n=[];for(let e of a){let{id:a}=e,l=r.get(a);if(l){let r=function(e,t){let r=Math.max(t.top,e.top),a=Math.max(t.left,e.left),n=Math.min(t.left+t.width,e.left+e.width),l=Math.min(t.top+t.height,e.top+e.height);if(a<n&&r<l){let i=t.width*t.height,s=e.width*e.height,o=(n-a)*(l-r);return Number((o/(i+s-o)).toFixed(4))}return 0}(l,t);r>0&&n.push({id:a,data:{droppableContainer:e,value:r}})}}return n.sort(ef)};function ey(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:em}let ek=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return r.reduce((e,t)=>({...e,top:e.top+ +t.y,bottom:e.bottom+ +t.y,left:e.left+ +t.x,right:e.right+ +t.x}),{...e})};function ew(e){if(e.startsWith("matrix3d(")){let t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}if(e.startsWith("matrix(")){let t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}let ej={ignoreTransform:!1};function eN(e,t){void 0===t&&(t=ej);let r=e.getBoundingClientRect();if(t.ignoreTransform){let{transform:t,transformOrigin:a}=W(e).getComputedStyle(e);t&&(r=function(e,t,r){let a=ew(t);if(!a)return e;let{scaleX:n,scaleY:l,x:i,y:s}=a,o=e.left-i-(1-n)*parseFloat(r),d=e.top-s-(1-l)*parseFloat(r.slice(r.indexOf(" ")+1)),c=n?e.width/n:e.width,u=l?e.height/l:e.height;return{width:c,height:u,top:d,right:o+c,bottom:d+u,left:o}}(r,t,a))}let{top:a,left:n,width:l,height:i,bottom:s,right:o}=r;return{top:a,left:n,width:l,height:i,bottom:s,right:o}}function eC(e){return eN(e,{ignoreTransform:!0})}function eS(e,t){let r=[];return e?function a(n){var l,i;let s;if(null!=t&&r.length>=t||!n)return r;if(z(n)&&null!=n.scrollingElement&&!r.includes(n.scrollingElement))return r.push(n.scrollingElement),r;if(!F(n)||U(n)||r.includes(n))return r;let o=W(e).getComputedStyle(n);return(n!==e&&(void 0===(l=o)&&(l=W(n).getComputedStyle(n)),s=/(auto|scroll|overlay)/,["overflow","overflowX","overflowY"].some(e=>{let t=l[e];return"string"==typeof t&&s.test(t)}))&&r.push(n),void 0===(i=o)&&(i=W(n).getComputedStyle(n)),"fixed"===i.position)?r:a(n.parentNode)}(e):r}function eE(e){let[t]=eS(e,1);return null!=t?t:null}function eM(e){return P&&e?$(e)?e:B(e)?z(e)||e===H(e).scrollingElement?window:F(e)?e:null:null:null}function eD(e){return $(e)?e.scrollX:e.scrollLeft}function eT(e){return $(e)?e.scrollY:e.scrollTop}function eL(e){return{x:eD(e),y:eT(e)}}function eR(e){return!!P&&!!e&&e===document.scrollingElement}function eI(e){let t={x:0,y:0},r=eR(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},a={x:e.scrollWidth-r.width,y:e.scrollHeight-r.height},n=e.scrollTop<=t.y,l=e.scrollLeft<=t.x;return{isTop:n,isLeft:l,isBottom:e.scrollTop>=a.y,isRight:e.scrollLeft>=a.x,maxScroll:a,minScroll:t}}(a=g||(g={}))[a.Forward=1]="Forward",a[a.Backward=-1]="Backward";let eA={x:.2,y:.2};function eO(e){return e.reduce((e,t)=>Z(e,eL(t)),em)}function eP(e,t){if(void 0===t&&(t=eN),!e)return;let{top:r,left:a,bottom:n,right:l}=t(e);eE(e)&&(n<=0||l<=0||r>=window.innerHeight||a>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}let e$=[["x",["left","right"],function(e){return e.reduce((e,t)=>e+eD(t),0)}],["y",["top","bottom"],function(e){return e.reduce((e,t)=>e+eT(t),0)}]];class eB{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=eS(t),a=eO(r);for(const[t,n,l]of(this.rect={...e},this.width=e.width,this.height=e.height,e$))for(const e of n)Object.defineProperty(this,e,{get:()=>{let n=l(r),i=a[t]-n;return this.rect[e]+i},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class eW{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(e=>{var t;return null==(t=this.target)?void 0:t.removeEventListener(...e)})},this.target=e}add(e,t,r){var a;null==(a=this.target)||a.addEventListener(e,t,r),this.listeners.push([e,t,r])}}function ez(e,t){let r=Math.abs(e.x),a=Math.abs(e.y);return"number"==typeof t?Math.sqrt(r**2+a**2)>t:"x"in t&&"y"in t?r>t.x&&a>t.y:"x"in t?r>t.x:"y"in t&&a>t.y}function eF(e){e.preventDefault()}function eU(e){e.stopPropagation()}(n=h||(h={})).Click="click",n.DragStart="dragstart",n.Keydown="keydown",n.ContextMenu="contextmenu",n.Resize="resize",n.SelectionChange="selectionchange",n.VisibilityChange="visibilitychange",(l=m||(m={})).Space="Space",l.Down="ArrowDown",l.Right="ArrowRight",l.Left="ArrowLeft",l.Up="ArrowUp",l.Esc="Escape",l.Enter="Enter",l.Tab="Tab";let eH={start:[m.Space,m.Enter],cancel:[m.Esc],end:[m.Space,m.Enter,m.Tab]},eY=(e,t)=>{let{currentCoordinates:r}=t;switch(e.code){case m.Right:return{...r,x:r.x+25};case m.Left:return{...r,x:r.x-25};case m.Down:return{...r,y:r.y+25};case m.Up:return{...r,y:r.y-25}}};class eX{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new eW(H(t)),this.windowListeners=new eW(W(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(h.Resize,this.handleCancel),this.windowListeners.add(h.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(h.Keydown,this.handleKeyDown))}handleStart(){let{activeNode:e,onStart:t}=this.props,r=e.node.current;r&&eP(r),t(em)}handleKeyDown(e){if(et(e)){let{active:t,context:r,options:a}=this.props,{keyboardCodes:n=eH,coordinateGetter:l=eY,scrollBehavior:i="smooth"}=a,{code:s}=e;if(n.end.includes(s))return void this.handleEnd(e);if(n.cancel.includes(s))return void this.handleCancel(e);let{collisionRect:o}=r.current,d=o?{x:o.left,y:o.top}:em;this.referenceCoordinates||(this.referenceCoordinates=d);let c=l(e,{active:t,context:r.current,currentCoordinates:d});if(c){let t=ee(c,d),a={x:0,y:0},{scrollableAncestors:n}=r.current;for(let r of n){let n=e.code,{isTop:l,isRight:s,isLeft:o,isBottom:d,maxScroll:u,minScroll:g}=eI(r),h=function(e){if(e===document.scrollingElement){let{innerWidth:e,innerHeight:t}=window;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}let{top:t,left:r,right:a,bottom:n}=e.getBoundingClientRect();return{top:t,left:r,right:a,bottom:n,width:e.clientWidth,height:e.clientHeight}}(r),x={x:Math.min(n===m.Right?h.right-h.width/2:h.right,Math.max(n===m.Right?h.left:h.left+h.width/2,c.x)),y:Math.min(n===m.Down?h.bottom-h.height/2:h.bottom,Math.max(n===m.Down?h.top:h.top+h.height/2,c.y))},f=n===m.Right&&!s||n===m.Left&&!o,p=n===m.Down&&!d||n===m.Up&&!l;if(f&&x.x!==c.x){let e=r.scrollLeft+t.x,l=n===m.Right&&e<=u.x||n===m.Left&&e>=g.x;if(l&&!t.y)return void r.scrollTo({left:e,behavior:i});l?a.x=r.scrollLeft-e:a.x=n===m.Right?r.scrollLeft-u.x:r.scrollLeft-g.x,a.x&&r.scrollBy({left:-a.x,behavior:i});break}if(p&&x.y!==c.y){let e=r.scrollTop+t.y,l=n===m.Down&&e<=u.y||n===m.Up&&e>=g.y;if(l&&!t.x)return void r.scrollTo({top:e,behavior:i});l?a.y=r.scrollTop-e:a.y=n===m.Down?r.scrollTop-u.y:r.scrollTop-g.y,a.y&&r.scrollBy({top:-a.y,behavior:i});break}}this.handleMove(e,Z(ee(c,this.referenceCoordinates),a))}}}handleMove(e,t){let{onMove:r}=this.props;e.preventDefault(),r(t)}handleEnd(e){let{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){let{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}function eK(e){return!!(e&&"distance"in e)}function eV(e){return!!(e&&"delay"in e)}eX.activators=[{eventName:"onKeyDown",handler:(e,t,r)=>{let{keyboardCodes:a=eH,onActivation:n}=t,{active:l}=r,{code:i}=e.nativeEvent;if(a.start.includes(i)){let t=l.activatorNode.current;return(!t||e.target===t)&&(e.preventDefault(),null==n||n({event:e.nativeEvent}),!0)}return!1}}];class eJ{constructor(e,t,r){var a;void 0===r&&(r=function(e){let{EventTarget:t}=W(e);return e instanceof t?e:H(e)}(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:n}=e,{target:l}=n;this.props=e,this.events=t,this.document=H(l),this.documentListeners=new eW(this.document),this.listeners=new eW(r),this.windowListeners=new eW(W(l)),this.initialCoordinates=null!=(a=er(n))?a:em,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){let{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(h.Resize,this.handleCancel),this.windowListeners.add(h.DragStart,eF),this.windowListeners.add(h.VisibilityChange,this.handleCancel),this.windowListeners.add(h.ContextMenu,eF),this.documentListeners.add(h.Keydown,this.handleKeydown),t){if(null!=r&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(eV(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(eK(t))return void this.handlePending(t)}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){let{active:r,onPending:a}=this.props;a(r,e,this.initialCoordinates,t)}handleStart(){let{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(h.Click,eU,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(h.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;let{activated:r,initialCoordinates:a,props:n}=this,{onMove:l,options:{activationConstraint:i}}=n;if(!a)return;let s=null!=(t=er(e))?t:em,o=ee(a,s);if(!r&&i){if(eK(i)){if(null!=i.tolerance&&ez(o,i.tolerance))return this.handleCancel();if(ez(o,i.distance))return this.handleStart()}return eV(i)&&ez(o,i.tolerance)?this.handleCancel():void this.handlePending(i,o)}e.cancelable&&e.preventDefault(),l(s)}handleEnd(){let{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){let{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===m.Esc&&this.handleCancel()}removeTextSelection(){var e;null==(e=this.document.getSelection())||e.removeAllRanges()}}let e_={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class eq extends eJ{constructor(e){const{event:t}=e;super(e,e_,H(t.target))}}eq.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:a}=t;return!!r.isPrimary&&0===r.button&&(null==a||a({event:r}),!0)}}];(i=x||(x={}))[i.RightClick=2]="RightClick";let eG={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class eQ extends eJ{constructor(e){super(e,eG)}static setup(){return window.addEventListener(eG.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(eG.move.name,e)};function e(){}}}eQ.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:a}=t,{touches:n}=r;return!(n.length>1)&&(null==a||a({event:r}),!0)}}],(s=f||(f={}))[s.Pointer=0]="Pointer",s[s.DraggableRect=1]="DraggableRect",(o=p||(p={}))[o.TreeOrder=0]="TreeOrder",o[o.ReversedTreeOrder=1]="ReversedTreeOrder";let eZ={x:{[g.Backward]:!1,[g.Forward]:!1},y:{[g.Backward]:!1,[g.Forward]:!1}};(d=b||(b={}))[d.Always=0]="Always",d[d.BeforeDragging=1]="BeforeDragging",d[d.WhileDragging=2]="WhileDragging",(v||(v={})).Optimized="optimized";let e0=new Map;function e1(e,t){return V(r=>e?r||("function"==typeof t?t(e):e):null,[t,e])}function e2(e){let{callback:t,disabled:r}=e,a=X(t),n=(0,w.useMemo)(()=>{if(r||"u"<typeof window||void 0===window.ResizeObserver)return;let{ResizeObserver:e}=window;return new e(a)},[r]);return(0,w.useEffect)(()=>()=>null==n?void 0:n.disconnect(),[n]),n}function e5(e){return new eB(eN(e),e)}function e4(e,t,r){void 0===t&&(t=e5);let[a,n]=(0,w.useState)(null);function l(){n(a=>{if(!e)return null;if(!1===e.isConnected){var n;return null!=(n=null!=a?a:r)?n:null}let l=t(e);return JSON.stringify(a)===JSON.stringify(l)?a:l})}let i=function(e){let{callback:t,disabled:r}=e,a=X(t),n=(0,w.useMemo)(()=>{if(r||"u"<typeof window||void 0===window.MutationObserver)return;let{MutationObserver:e}=window;return new e(a)},[a,r]);return(0,w.useEffect)(()=>()=>null==n?void 0:n.disconnect(),[n]),n}({callback(t){if(e)for(let r of t){let{type:t,target:a}=r;if("childList"===t&&a instanceof HTMLElement&&a.contains(e)){l();break}}}}),s=e2({callback:l});return Y(()=>{l(),e?(null==s||s.observe(e),null==i||i.observe(document.body,{childList:!0,subtree:!0})):(null==s||s.disconnect(),null==i||i.disconnect())},[e]),a}let e3=[];function e7(e,t){void 0===t&&(t=[]);let r=(0,w.useRef)(null);return(0,w.useEffect)(()=>{r.current=null},t),(0,w.useEffect)(()=>{let t=e!==em;t&&!r.current&&(r.current=e),!t&&r.current&&(r.current=null)},[e]),r.current?ee(e,r.current):em}function e6(e){return(0,w.useMemo)(()=>{let t,r;return e?(t=e.innerWidth,{top:0,left:0,right:t,bottom:r=e.innerHeight,width:t,height:r}):null},[e])}let e8=[];function e9(e){if(!e)return null;if(e.children.length>1)return e;let t=e.children[0];return F(t)?t:e}let te=[{sensor:eq,options:{}},{sensor:eX,options:{}}],tt={current:{}},tr={draggable:{measure:eC},droppable:{measure:eC,strategy:b.WhileDragging,frequency:v.Optimized},dragOverlay:{measure:eN}};class ta extends Map{get(e){var t;return null!=e&&null!=(t=super.get(e))?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,r;return null!=(t=null==(r=this.get(e))?void 0:r.node.current)?t:void 0}}let tn={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new ta,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:eg},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:tr,measureDroppableContainers:eg,windowRect:null,measuringScheduled:!1},tl={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:eg,draggableNodes:new Map,over:null,measureDroppableContainers:eg},ti=(0,w.createContext)(tl),ts=(0,w.createContext)(tn);function to(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new ta}}}function td(e,t){switch(t.type){case u.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case u.DragMove:if(null==e.draggable.active)return e;return{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case u.DragEnd:case u.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case u.RegisterDroppable:{let{element:r}=t,{id:a}=r,n=new ta(e.droppable.containers);return n.set(a,r),{...e,droppable:{...e.droppable,containers:n}}}case u.SetDroppableDisabled:{let{id:r,key:a,disabled:n}=t,l=e.droppable.containers.get(r);if(!l||a!==l.key)return e;let i=new ta(e.droppable.containers);return i.set(r,{...l,disabled:n}),{...e,droppable:{...e.droppable,containers:i}}}case u.UnregisterDroppable:{let{id:r,key:a}=t,n=e.droppable.containers.get(r);if(!n||a!==n.key)return e;let l=new ta(e.droppable.containers);return l.delete(r),{...e,droppable:{...e.droppable,containers:l}}}default:return e}}function tc(e){let{disabled:t}=e,{active:r,activatorEvent:a,draggableNodes:n}=(0,w.useContext)(ti),l=_(a),i=_(null==r?void 0:r.id);return(0,w.useEffect)(()=>{if(!t&&!a&&l&&null!=i){if(!et(l)||document.activeElement===l.target)return;let e=n.get(i);if(!e)return;let{activatorNode:t,node:r}=e;(t.current||r.current)&&requestAnimationFrame(()=>{for(let e of[t.current,r.current]){if(!e)continue;let t=e.matches(en)?e:e.querySelector(en);if(t){t.focus();break}}})}},[a,t,n,i,l]),null}function tu(e,t){let{transform:r,...a}=t;return null!=e&&e.length?e.reduce((e,t)=>t({transform:e,...a}),r):r}let tg=(0,w.createContext)({...em,scaleX:1,scaleY:1});(c=y||(y={}))[c.Uninitialized=0]="Uninitialized",c[c.Initializing=1]="Initializing",c[c.Initialized=2]="Initialized";let th=(0,w.memo)(function(e){var t,r,a,n,l,i,s,o;let d,c,h,m,x,v,k,j,{id:N,accessibility:C,autoScroll:S=!0,children:E,sensors:M=te,collisionDetection:D=ev,measuring:T,modifiers:L,...R}=e,[I,A]=(0,w.useReducer)(td,void 0,to),[$,B]=function(){let[e]=(0,w.useState)(()=>new Set),t=(0,w.useCallback)(t=>(e.add(t),()=>e.delete(t)),[e]);return[(0,w.useCallback)(t=>{let{type:r,event:a}=t;e.forEach(e=>{var t;return null==(t=e[r])?void 0:t.call(e,a)})},[e]),t]}(),[z,U]=(0,w.useState)(y.Uninitialized),H=z===y.Initialized,{draggable:{active:X,nodes:q,translate:Q},droppable:{containers:ee}}=I,et=null!=X?q.get(X):null,ea=(0,w.useRef)({initial:null,translated:null}),en=(0,w.useMemo)(()=>{var e;return null!=X?{id:X,data:null!=(e=null==et?void 0:et.data)?e:tt,rect:ea}:null},[X,et]),el=(0,w.useRef)(null),[ei,es]=(0,w.useState)(null),[ed,ec]=(0,w.useState)(null),eg=K(R,Object.values(R)),eh=G("DndDescribedBy",N),ex=(0,w.useMemo)(()=>ee.getEnabled(),[ee]),ef=(0,w.useMemo)(()=>({draggable:{...tr.draggable,...null==T?void 0:T.draggable},droppable:{...tr.droppable,...null==T?void 0:T.droppable},dragOverlay:{...tr.dragOverlay,...null==T?void 0:T.dragOverlay}}),[null==T?void 0:T.draggable,null==T?void 0:T.droppable,null==T?void 0:T.dragOverlay]),{droppableRects:ep,measureDroppableContainers:eb,measuringScheduled:ew}=function(e,t){let{dragging:r,dependencies:a,config:n}=t,[l,i]=(0,w.useState)(null),{frequency:s,measure:o,strategy:d}=n,c=(0,w.useRef)(e),u=function(){switch(d){case b.Always:return!1;case b.BeforeDragging:return r;default:return!r}}(),g=K(u),h=(0,w.useCallback)(function(e){void 0===e&&(e=[]),g.current||i(t=>null===t?e:t.concat(e.filter(e=>!t.includes(e))))},[g]),m=(0,w.useRef)(null),x=V(t=>{if(u&&!r)return e0;if(!t||t===e0||c.current!==e||null!=l){let t=new Map;for(let r of e){if(!r)continue;if(l&&l.length>0&&!l.includes(r.id)&&r.rect.current){t.set(r.id,r.rect.current);continue}let e=r.node.current,a=e?new eB(o(e),e):null;r.rect.current=a,a&&t.set(r.id,a)}return t}return t},[e,l,r,u,o]);return(0,w.useEffect)(()=>{c.current=e},[e]),(0,w.useEffect)(()=>{u||h()},[r,u]),(0,w.useEffect)(()=>{l&&l.length>0&&i(null)},[JSON.stringify(l)]),(0,w.useEffect)(()=>{u||"number"!=typeof s||null!==m.current||(m.current=setTimeout(()=>{h(),m.current=null},s))},[s,u,h,...a]),{droppableRects:x,measureDroppableContainers:h,measuringScheduled:null!=l}}(ex,{dragging:H,dependencies:[Q.x,Q.y],config:ef.droppable}),ej=V(e=>{var t;return null==X?null:null!=(t=null!=x?x:e)?t:null},[x=(m=null!=X?q.get(X):void 0)?m.node.current:null,X]),eC=(0,w.useMemo)(()=>ed?er(ed):null,[ed]),eD=(d=(null==ei?void 0:ei.autoScrollEnabled)===!1,c="object"==typeof S?!1===S.enabled:!1===S,h=H&&!d&&!c,"object"==typeof S?{...S,enabled:h}:{enabled:h}),eT=e1(ej,ef.draggable.measure);!function(e){let{activeNode:t,measure:r,initialRect:a,config:n=!0}=e,l=(0,w.useRef)(!1),{x:i,y:s}="boolean"==typeof n?{x:n,y:n}:n;Y(()=>{if(!i&&!s||!t){l.current=!1;return}if(l.current||!a)return;let e=null==t?void 0:t.node.current;if(!e||!1===e.isConnected)return;let n=ey(r(e),a);if(i||(n.x=0),s||(n.y=0),l.current=!0,Math.abs(n.x)>0||Math.abs(n.y)>0){let t=eE(e);t&&t.scrollBy({top:n.y,left:n.x})}},[t,i,s,a,r])}({activeNode:null!=X?q.get(X):null,config:eD.layoutShiftCompensation,initialRect:eT,measure:ef.draggable.measure});let eP=e4(ej,ef.draggable.measure,eT),e$=e4(ej?ej.parentElement:null),eW=(0,w.useRef)({activatorEvent:null,active:null,activeNode:ej,collisionRect:null,collisions:null,droppableRects:ep,draggableNodes:q,draggingNode:null,draggingNodeRect:null,droppableContainers:ee,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),ez=ee.getNodeFor(null==(t=eW.current.over)?void 0:t.id),eF=function(e){let{measure:t}=e,[r,a]=(0,w.useState)(null),n=e2({callback:(0,w.useCallback)(e=>{for(let{target:r}of e)if(F(r)){a(e=>{let a=t(r);return e?{...e,width:a.width,height:a.height}:a});break}},[t])}),[l,i]=J((0,w.useCallback)(e=>{let r=e9(e);null==n||n.disconnect(),r&&(null==n||n.observe(r)),a(r?t(r):null)},[t,n]));return(0,w.useMemo)(()=>({nodeRef:l,rect:r,setRef:i}),[r,l,i])}({measure:ef.dragOverlay.measure}),eU=null!=(r=eF.nodeRef.current)?r:ej,eH=H?null!=(a=eF.rect)?a:eP:null,eY=!!(eF.nodeRef.current&&eF.rect),eX=(v=e1(l=eY?null:eP),ey(l,v)),eK=e6(eU?W(eU):null),eV=(i=H?null!=ez?ez:ej:null,k=(0,w.useRef)(i),j=V(e=>i?e&&e!==e3&&i&&k.current&&i.parentNode===k.current.parentNode?e:eS(i):e3,[i]),(0,w.useEffect)(()=>{k.current=i},[i]),j),eJ=function(e,t){void 0===t&&(t=eN);let[r]=e,a=e6(r?W(r):null),[n,l]=(0,w.useState)(e8);function i(){l(()=>e.length?e.map(e=>eR(e)?a:new eB(t(e),e)):e8)}let s=e2({callback:i});return Y(()=>{null==s||s.disconnect(),i(),e.forEach(e=>null==s?void 0:s.observe(e))},[e]),n}(eV),e_=tu(L,{transform:{x:Q.x-eX.x,y:Q.y-eX.y,scaleX:1,scaleY:1},activatorEvent:ed,active:en,activeNodeRect:eP,containerNodeRect:e$,draggingNodeRect:eH,over:eW.current.over,overlayNodeRect:eF.rect,scrollableAncestors:eV,scrollableAncestorRects:eJ,windowRect:eK}),eq=eC?Z(eC,Q):null,eG=function(e){let[t,r]=(0,w.useState)(null),a=(0,w.useRef)(e),n=(0,w.useCallback)(e=>{let t=eM(e.target);t&&r(e=>e?(e.set(t,eL(t)),new Map(e)):null)},[]);return(0,w.useEffect)(()=>{let t=a.current;if(e!==t){l(t);let i=e.map(e=>{let t=eM(e);return t?(t.addEventListener("scroll",n,{passive:!0}),[t,eL(t)]):null}).filter(e=>null!=e);r(i.length?new Map(i):null),a.current=e}return()=>{l(e),l(t)};function l(e){e.forEach(e=>{let t=eM(e);null==t||t.removeEventListener("scroll",n)})}},[n,e]),(0,w.useMemo)(()=>e.length?t?Array.from(t.values()).reduce((e,t)=>Z(e,t),em):eO(e):em,[e,t])}(eV),eQ=e7(eG),e5=e7(eG,[eP]),ta=Z(e_,eQ),tn=eH?ek(eH,e_):null,tl=en&&tn?D({active:en,collisionRect:tn,droppableRects:ep,droppableContainers:ex,pointerCoordinates:eq}):null,th=function(e,t){if(!e||0===e.length)return null;let[r]=e;return r.id}(tl,0),[tm,tx]=(0,w.useState)(null),tf=(s=eY?e_:Z(e_,e5),o=null!=(n=null==tm?void 0:tm.rect)?n:null,{...s,scaleX:o&&eP?o.width/eP.width:1,scaleY:o&&eP?o.height/eP.height:1}),tp=(0,w.useRef)(null),tb=(0,w.useCallback)((e,t)=>{let{sensor:r,options:a}=t;if(null==el.current)return;let n=q.get(el.current);if(!n)return;let l=e.nativeEvent,i=new r({active:el.current,activeNode:n,event:l,options:a,context:eW,onAbort(e){if(!q.get(e))return;let{onDragAbort:t}=eg.current,r={id:e};null==t||t(r),$({type:"onDragAbort",event:r})},onPending(e,t,r,a){if(!q.get(e))return;let{onDragPending:n}=eg.current,l={id:e,constraint:t,initialCoordinates:r,offset:a};null==n||n(l),$({type:"onDragPending",event:l})},onStart(e){let t=el.current;if(null==t)return;let r=q.get(t);if(!r)return;let{onDragStart:a}=eg.current,n={activatorEvent:l,active:{id:t,data:r.data,rect:ea}};(0,O.unstable_batchedUpdates)(()=>{null==a||a(n),U(y.Initializing),A({type:u.DragStart,initialCoordinates:e,active:t}),$({type:"onDragStart",event:n}),es(tp.current),ec(l)})},onMove(e){A({type:u.DragMove,coordinates:e})},onEnd:s(u.DragEnd),onCancel:s(u.DragCancel)});function s(e){return async function(){let{active:t,collisions:r,over:a,scrollAdjustedTranslate:n}=eW.current,i=null;if(t&&n){let{cancelDrop:s}=eg.current;i={activatorEvent:l,active:t,collisions:r,delta:n,over:a},e===u.DragEnd&&"function"==typeof s&&await Promise.resolve(s(i))&&(e=u.DragCancel)}el.current=null,(0,O.unstable_batchedUpdates)(()=>{A({type:e}),U(y.Uninitialized),tx(null),es(null),ec(null),tp.current=null;let t=e===u.DragEnd?"onDragEnd":"onDragCancel";if(i){let e=eg.current[t];null==e||e(i),$({type:t,event:i})}})}}tp.current=i},[q]),tv=(0,w.useCallback)((e,t)=>(r,a)=>{let n=r.nativeEvent,l=q.get(a);null!==el.current||!l||n.dndKit||n.defaultPrevented||!0===e(r,t.options,{active:l})&&(n.dndKit={capturedBy:t.sensor},el.current=a,tb(r,t))},[q,tb]),ty=(0,w.useMemo)(()=>M.reduce((e,t)=>{let{sensor:r}=t;return[...e,...r.activators.map(e=>({eventName:e.eventName,handler:tv(e.handler,t)}))]},[]),[M,tv]);(0,w.useEffect)(()=>{if(!P)return;let e=M.map(e=>{let{sensor:t}=e;return null==t.setup?void 0:t.setup()});return()=>{for(let t of e)null==t||t()}},M.map(e=>{let{sensor:t}=e;return t})),Y(()=>{eP&&z===y.Initializing&&U(y.Initialized)},[eP,z]),(0,w.useEffect)(()=>{let{onDragMove:e}=eg.current,{active:t,activatorEvent:r,collisions:a,over:n}=eW.current;if(!t||!r)return;let l={active:t,activatorEvent:r,collisions:a,delta:{x:ta.x,y:ta.y},over:n};(0,O.unstable_batchedUpdates)(()=>{null==e||e(l),$({type:"onDragMove",event:l})})},[ta.x,ta.y]),(0,w.useEffect)(()=>{let{active:e,activatorEvent:t,collisions:r,droppableContainers:a,scrollAdjustedTranslate:n}=eW.current;if(!e||null==el.current||!t||!n)return;let{onDragOver:l}=eg.current,i=a.get(th),s=i&&i.rect.current?{id:i.id,rect:i.rect.current,data:i.data,disabled:i.disabled}:null,o={active:e,activatorEvent:t,collisions:r,delta:{x:n.x,y:n.y},over:s};(0,O.unstable_batchedUpdates)(()=>{tx(s),null==l||l(o),$({type:"onDragOver",event:o})})},[th]),Y(()=>{eW.current={activatorEvent:ed,active:en,activeNode:ej,collisionRect:tn,collisions:tl,droppableRects:ep,draggableNodes:q,draggingNode:eU,draggingNodeRect:eH,droppableContainers:ee,over:tm,scrollableAncestors:eV,scrollAdjustedTranslate:ta},ea.current={initial:eH,translated:tn}},[en,ej,tl,tn,q,eU,eH,ep,ee,tm,eV,ta]),function(e){let t,{acceleration:r,activator:a=f.Pointer,canScroll:n,draggingRect:l,enabled:i,interval:s=5,order:o=p.TreeOrder,pointerCoordinates:d,scrollableAncestors:c,scrollableAncestorRects:u,delta:h,threshold:m}=e,x=function(e){let{delta:t,disabled:r}=e,a=_(t);return V(e=>{if(r||!a||!e)return eZ;let n={x:Math.sign(t.x-a.x),y:Math.sign(t.y-a.y)};return{x:{[g.Backward]:e.x[g.Backward]||-1===n.x,[g.Forward]:e.x[g.Forward]||1===n.x},y:{[g.Backward]:e.y[g.Backward]||-1===n.y,[g.Forward]:e.y[g.Forward]||1===n.y}}},[r,t,a])}({delta:h,disabled:!i}),[b,v]=(t=(0,w.useRef)(null),[(0,w.useCallback)((e,r)=>{t.current=setInterval(e,r)},[]),(0,w.useCallback)(()=>{null!==t.current&&(clearInterval(t.current),t.current=null)},[])]),y=(0,w.useRef)({x:0,y:0}),k=(0,w.useRef)({x:0,y:0}),j=(0,w.useMemo)(()=>{switch(a){case f.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case f.DraggableRect:return l}},[a,l,d]),N=(0,w.useRef)(null),C=(0,w.useCallback)(()=>{let e=N.current;if(!e)return;let t=y.current.x*k.current.x,r=y.current.y*k.current.y;e.scrollBy(t,r)},[]),S=(0,w.useMemo)(()=>o===p.TreeOrder?[...c].reverse():c,[o,c]);(0,w.useEffect)(()=>{if(!i||!c.length||!j)return void v();for(let e of S){if((null==n?void 0:n(e))===!1)continue;let t=u[c.indexOf(e)];if(!t)continue;let{direction:a,speed:l}=function(e,t,r,a,n){let{top:l,left:i,right:s,bottom:o}=r;void 0===a&&(a=10),void 0===n&&(n=eA);let{isTop:d,isBottom:c,isLeft:u,isRight:h}=eI(e),m={x:0,y:0},x={x:0,y:0},f={height:t.height*n.y,width:t.width*n.x};return!d&&l<=t.top+f.height?(m.y=g.Backward,x.y=a*Math.abs((t.top+f.height-l)/f.height)):!c&&o>=t.bottom-f.height&&(m.y=g.Forward,x.y=a*Math.abs((t.bottom-f.height-o)/f.height)),!h&&s>=t.right-f.width?(m.x=g.Forward,x.x=a*Math.abs((t.right-f.width-s)/f.width)):!u&&i<=t.left+f.width&&(m.x=g.Backward,x.x=a*Math.abs((t.left+f.width-i)/f.width)),{direction:m,speed:x}}(e,t,j,r,m);for(let e of["x","y"])x[e][a[e]]||(l[e]=0,a[e]=0);if(l.x>0||l.y>0){v(),N.current=e,b(C,s),y.current=l,k.current=a;return}}y.current={x:0,y:0},k.current={x:0,y:0},v()},[r,C,n,v,i,s,JSON.stringify(j),JSON.stringify(x),b,c,S,u,JSON.stringify(m)])}({...eD,delta:Q,draggingRect:tn,pointerCoordinates:eq,scrollableAncestors:eV,scrollableAncestorRects:eJ});let tk=(0,w.useMemo)(()=>({active:en,activeNode:ej,activeNodeRect:eP,activatorEvent:ed,collisions:tl,containerNodeRect:e$,dragOverlay:eF,draggableNodes:q,droppableContainers:ee,droppableRects:ep,over:tm,measureDroppableContainers:eb,scrollableAncestors:eV,scrollableAncestorRects:eJ,measuringConfiguration:ef,measuringScheduled:ew,windowRect:eK}),[en,ej,eP,ed,tl,e$,eF,q,ee,ep,tm,eb,eV,eJ,ef,ew,eK]),tw=(0,w.useMemo)(()=>({activatorEvent:ed,activators:ty,active:en,activeNodeRect:eP,ariaDescribedById:{draggable:eh},dispatch:A,draggableNodes:q,over:tm,measureDroppableContainers:eb}),[ed,ty,en,eP,A,eh,q,tm,eb]);return w.default.createElement(eo.Provider,{value:B},w.default.createElement(ti.Provider,{value:tw},w.default.createElement(ts.Provider,{value:tk},w.default.createElement(tg.Provider,{value:tf},E)),w.default.createElement(tc,{disabled:(null==C?void 0:C.restoreFocus)===!1})),w.default.createElement(eu,{...C,hiddenTextDescribedById:eh}))}),tm=(0,w.createContext)(null),tx="button",tf={timeout:25};function tp(e){let{data:t,disabled:r=!1,id:a,resizeObserverConfig:n}=e,l=G("Droppable"),{active:i,dispatch:s,over:o,measureDroppableContainers:d}=(0,w.useContext)(ti),c=(0,w.useRef)({disabled:r}),g=(0,w.useRef)(!1),h=(0,w.useRef)(null),m=(0,w.useRef)(null),{disabled:x,updateMeasurementsFor:f,timeout:p}={...tf,...n},b=K(null!=f?f:a),v=e2({callback:(0,w.useCallback)(()=>{if(!g.current){g.current=!0;return}null!=m.current&&clearTimeout(m.current),m.current=setTimeout(()=>{d(Array.isArray(b.current)?b.current:[b.current]),m.current=null},p)},[p]),disabled:x||!i}),[y,k]=J((0,w.useCallback)((e,t)=>{v&&(t&&(v.unobserve(t),g.current=!1),e&&v.observe(e))},[v])),j=K(t);return(0,w.useEffect)(()=>{v&&y.current&&(v.disconnect(),g.current=!1,v.observe(y.current))},[y,v]),(0,w.useEffect)(()=>(s({type:u.RegisterDroppable,element:{id:a,key:l,disabled:r,node:y,rect:h,data:j}}),()=>s({type:u.UnregisterDroppable,key:l,id:a})),[a]),(0,w.useEffect)(()=>{r!==c.current.disabled&&(s({type:u.SetDroppableDisabled,id:a,key:l,disabled:r}),c.current.disabled=r)},[a,l,r,s]),{active:i,rect:h,isOver:(null==o?void 0:o.id)===a,node:y,over:o,setNodeRef:k}}function tb(e){let{animation:t,children:r}=e,[a,n]=(0,w.useState)(null),[l,i]=(0,w.useState)(null),s=_(r);return r||a||!s||n(s),Y(()=>{if(!l)return;let e=null==a?void 0:a.key,r=null==a?void 0:a.props.id;null==e||null==r?n(null):Promise.resolve(t(r,l)).then(()=>{n(null)})},[t,a,l]),w.default.createElement(w.default.Fragment,null,r,a?(0,w.cloneElement)(a,{ref:i}):null)}let tv={x:0,y:0,scaleX:1,scaleY:1};function ty(e){let{children:t}=e;return w.default.createElement(ti.Provider,{value:tl},w.default.createElement(tg.Provider,{value:tv},t))}let tk={position:"fixed",touchAction:"none"},tw=e=>et(e)?"transform 250ms ease":void 0,tj=(0,w.forwardRef)((e,t)=>{let{as:r,activatorEvent:a,adjustScale:n,children:l,className:i,rect:s,style:o,transform:d,transition:c=tw}=e;if(!s)return null;let u=n?d:{...d,scaleX:1,scaleY:1},g={...tk,width:s.width,height:s.height,top:s.top,left:s.left,transform:ea.Transform.toString(u),transformOrigin:n&&a?function(e,t){let r=er(e);if(!r)return"0 0";let a={x:(r.x-t.left)/t.width*100,y:(r.y-t.top)/t.height*100};return a.x+"% "+a.y+"%"}(a,s):void 0,transition:"function"==typeof c?c(a):c,...o};return w.default.createElement(r,{className:i,style:g,ref:t},l)}),tN={duration:250,easing:"ease",keyframes:e=>{let{transform:{initial:t,final:r}}=e;return[{transform:ea.Transform.toString(t)},{transform:ea.Transform.toString(r)}]},sideEffects:(t={styles:{active:{opacity:"0"}}},e=>{let{active:r,dragOverlay:a}=e,n={},{styles:l,className:i}=t;if(null!=l&&l.active)for(let[e,t]of Object.entries(l.active))void 0!==t&&(n[e]=r.node.style.getPropertyValue(e),r.node.style.setProperty(e,t));if(null!=l&&l.dragOverlay)for(let[e,t]of Object.entries(l.dragOverlay))void 0!==t&&a.node.style.setProperty(e,t);return null!=i&&i.active&&r.node.classList.add(i.active),null!=i&&i.dragOverlay&&a.node.classList.add(i.dragOverlay),function(){for(let[e,t]of Object.entries(n))r.node.style.setProperty(e,t);null!=i&&i.active&&r.node.classList.remove(i.active)}})},tC=0,tS=w.default.memo(e=>{var t;let{adjustScale:r=!1,children:a,dropAnimation:n,style:l,transition:i,modifiers:s,wrapperElement:o="div",className:d,zIndex:c=999}=e,{activatorEvent:u,active:g,activeNodeRect:h,containerNodeRect:m,draggableNodes:x,droppableContainers:f,dragOverlay:p,over:b,measuringConfiguration:v,scrollableAncestors:y,scrollableAncestorRects:k,windowRect:j}=(0,w.useContext)(ts),N=(0,w.useContext)(tg),C=(t=null==g?void 0:g.id,(0,w.useMemo)(()=>{if(null!=t)return++tC},[t])),S=tu(s,{activatorEvent:u,active:g,activeNodeRect:h,containerNodeRect:m,draggingNodeRect:p.rect,over:b,overlayNodeRect:p.rect,scrollableAncestors:y,scrollableAncestorRects:k,transform:N,windowRect:j}),E=e1(h),M=function(e){let{config:t,draggableNodes:r,droppableContainers:a,measuringConfiguration:n}=e;return X((e,l)=>{if(null===t)return;let i=r.get(e);if(!i)return;let s=i.node.current;if(!s)return;let o=e9(l);if(!o)return;let{transform:d}=W(l).getComputedStyle(l),c=ew(d);if(!c)return;let u="function"==typeof t?t:function(e){let{duration:t,easing:r,sideEffects:a,keyframes:n}={...tN,...e};return e=>{let{active:l,dragOverlay:i,transform:s,...o}=e;if(!t)return;let d={x:i.rect.left-l.rect.left,y:i.rect.top-l.rect.top},c={scaleX:1!==s.scaleX?l.rect.width*s.scaleX/i.rect.width:1,scaleY:1!==s.scaleY?l.rect.height*s.scaleY/i.rect.height:1},u={x:s.x-d.x,y:s.y-d.y,...c},g=n({...o,active:l,dragOverlay:i,transform:{initial:s,final:u}}),[h]=g,m=g[g.length-1];if(JSON.stringify(h)===JSON.stringify(m))return;let x=null==a?void 0:a({active:l,dragOverlay:i,...o}),f=i.node.animate(g,{duration:t,easing:r,fill:"forwards"});return new Promise(e=>{f.onfinish=()=>{null==x||x(),e()}})}}(t);return eP(s,n.draggable.measure),u({active:{id:e,data:i.data,node:s,rect:n.draggable.measure(s)},draggableNodes:r,dragOverlay:{node:l,rect:n.dragOverlay.measure(o)},droppableContainers:a,measuringConfiguration:n,transform:c})})}({config:n,draggableNodes:x,droppableContainers:f,measuringConfiguration:v}),D=E?p.setRef:void 0;return w.default.createElement(ty,null,w.default.createElement(tb,{animation:M},g&&C?w.default.createElement(tj,{key:C,id:g.id,ref:D,as:o,activatorEvent:u,adjustScale:r,className:d,transition:i,rect:E,style:{zIndex:c,...l},transform:S},a):null))});function tE(e,t,r){let a=e.slice();return a.splice(r<0?a.length+r:r,0,a.splice(t,1)[0]),a}function tM(e){return null!==e&&e>=0}let tD=w.default.createContext({activeIndex:-1,containerId:"Sortable",disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:e=>{let{rects:t,activeIndex:r,overIndex:a,index:n}=e,l=tE(t,a,r),i=t[n],s=l[n];return s&&i?{x:s.left-i.left,y:s.top-i.top,scaleX:s.width/i.width,scaleY:s.height/i.height}:null},disabled:{draggable:!1,droppable:!1}}),tT=e=>{let{id:t,items:r,activeIndex:a,overIndex:n}=e;return tE(r,a,n).indexOf(t)},tL=e=>{let{containerId:t,isSorting:r,wasDragging:a,index:n,items:l,newIndex:i,previousItems:s,previousContainerId:o,transition:d}=e;return!!d&&!!a&&(s===l||n!==i)&&(!!r||i!==n&&t===o)},tR={duration:200,easing:"ease"},tI="transform",tA=ea.Transition.toString({property:tI,duration:0,easing:"linear"}),tO={roleDescription:"sortable"};function tP(e){var t,r,a,n;let{animateLayoutChanges:l=tL,attributes:i,disabled:s,data:o,getNewIndex:d=tT,id:c,strategy:u,resizeObserverConfig:g,transition:h=tR}=e,{items:m,containerId:x,activeIndex:f,disabled:p,disableTransforms:b,sortedRects:v,overIndex:y,useDragOverlay:k,strategy:j}=(0,w.useContext)(tD),N=(t=s,r=p,"boolean"==typeof t?{draggable:t,droppable:!1}:{draggable:null!=(a=null==t?void 0:t.draggable)?a:r.draggable,droppable:null!=(n=null==t?void 0:t.droppable)?n:r.droppable}),C=m.indexOf(c),S=(0,w.useMemo)(()=>({sortable:{containerId:x,index:C,items:m},...o}),[x,o,C,m]),E=(0,w.useMemo)(()=>m.slice(m.indexOf(c)),[m,c]),{rect:M,node:D,isOver:T,setNodeRef:L}=tp({id:c,data:S,disabled:N.droppable,resizeObserverConfig:{updateMeasurementsFor:E,...g}}),{active:R,activatorEvent:I,activeNodeRect:A,attributes:O,setNodeRef:P,listeners:$,isDragging:B,over:W,setActivatorNodeRef:z,transform:F}=function(e){let{id:t,data:r,disabled:a=!1,attributes:n}=e,l=G("Draggable"),{activators:i,activatorEvent:s,active:o,activeNodeRect:d,ariaDescribedById:c,draggableNodes:u,over:g}=(0,w.useContext)(ti),{role:h=tx,roleDescription:m="draggable",tabIndex:x=0}=null!=n?n:{},f=(null==o?void 0:o.id)===t,p=(0,w.useContext)(f?tg:tm),[b,v]=J(),[y,k]=J(),j=(0,w.useMemo)(()=>i.reduce((e,r)=>{let{eventName:a,handler:n}=r;return e[a]=e=>{n(e,t)},e},{}),[i,t]),N=K(r);return Y(()=>(u.set(t,{id:t,key:l,node:b,activatorNode:y,data:N}),()=>{let e=u.get(t);e&&e.key===l&&u.delete(t)}),[u,t]),{active:o,activatorEvent:s,activeNodeRect:d,attributes:(0,w.useMemo)(()=>({role:h,tabIndex:x,"aria-disabled":a,"aria-pressed":!!f&&h===tx||void 0,"aria-roledescription":m,"aria-describedby":c.draggable}),[a,h,x,f,m,c.draggable]),isDragging:f,listeners:a?void 0:j,node:b,over:g,setNodeRef:v,setActivatorNodeRef:k,transform:p}}({id:c,data:S,attributes:{...tO,...i},disabled:N.draggable}),U=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,w.useMemo)(()=>e=>{t.forEach(t=>t(e))},t)}(L,P),H=!!R,X=H&&!b&&tM(f)&&tM(y),V=!k&&B,_=V&&X?F:null,q=X?null!=_?_:(null!=u?u:j)({rects:v,activeNodeRect:A,activeIndex:f,overIndex:y,index:C}):null,Q=tM(f)&&tM(y)?d({id:c,items:m,activeIndex:f,overIndex:y}):C,Z=null==R?void 0:R.id,ee=(0,w.useRef)({activeId:Z,items:m,newIndex:Q,containerId:x}),er=m!==ee.current.items,en=l({active:R,containerId:x,isDragging:B,isSorting:H,id:c,index:C,items:m,newIndex:ee.current.newIndex,previousItems:ee.current.items,previousContainerId:ee.current.containerId,transition:h,wasDragging:null!=ee.current.activeId}),el=function(e){let{disabled:t,index:r,node:a,rect:n}=e,[l,i]=(0,w.useState)(null),s=(0,w.useRef)(r);return Y(()=>{if(!t&&r!==s.current&&a.current){let e=n.current;if(e){let t=eN(a.current,{ignoreTransform:!0}),r={x:e.left-t.left,y:e.top-t.top,scaleX:e.width/t.width,scaleY:e.height/t.height};(r.x||r.y)&&i(r)}}r!==s.current&&(s.current=r)},[t,r,a,n]),(0,w.useEffect)(()=>{l&&i(null)},[l]),l}({disabled:!en,index:C,node:D,rect:M});return(0,w.useEffect)(()=>{H&&ee.current.newIndex!==Q&&(ee.current.newIndex=Q),x!==ee.current.containerId&&(ee.current.containerId=x),m!==ee.current.items&&(ee.current.items=m)},[H,Q,x,m]),(0,w.useEffect)(()=>{if(Z===ee.current.activeId)return;if(null!=Z&&null==ee.current.activeId){ee.current.activeId=Z;return}let e=setTimeout(()=>{ee.current.activeId=Z},50);return()=>clearTimeout(e)},[Z]),{active:R,activeIndex:f,attributes:O,data:S,rect:M,index:C,newIndex:Q,items:m,isOver:T,isSorting:H,isDragging:B,listeners:$,node:D,overIndex:y,over:W,setNodeRef:U,setActivatorNodeRef:z,setDroppableNodeRef:L,setDraggableNodeRef:P,transform:null!=el?el:q,transition:el||er&&ee.current.newIndex===C?tA:(!V||et(I))&&h&&(H||en)?ea.Transition.toString({...h,property:tI}):void 0}}m.Down,m.Right,m.Up,m.Left;let t$=[{id:"suggested",title:"Suggested",dotColor:"bg-purple-400"},{id:"backlog",title:"Backlog",dotColor:"bg-gray-400"},{id:"in-progress",title:"In Progress",dotColor:"bg-blue-400"},{id:"review",title:"Review",dotColor:"bg-amber-400"},{id:"done",title:"Done",dotColor:"bg-emerald-400"},{id:"archived",title:"Archived",dotColor:"bg-red-400"}],tB={suggested:"#a855f7",backlog:"#9ca3af","in-progress":"#60a5fa",review:"#f59e0b",done:"#34d399",archived:"#f87171"},tW=(0,w.forwardRef)(function({task:e,subTasks:t=[],isSubTask:r,onEdit:a,onArchive:n,onDelete:l,onRestore:i,onAddSubTask:s,animateIn:o,fadeOut:d,onToggleExpand:c,expanded:u,isDragOverlay:g,isDropTarget:h,dragHandleProps:m,style:x,className:f,...p},b){let[v,y]=(0,w.useState)(!1),[j,N]=(0,w.useState)(!o);(0,w.useEffect)(()=>{o&&(N(!1),requestAnimationFrame(()=>{requestAnimationFrame(()=>{N(!0)})}))},[o]);let C="archived"===e.column,S="done"===e.column,E=tB[e.column]||"#9ca3af",D=t.filter(e=>"done"===e.column).length,T=t.length;return(0,k.jsxs)("div",{ref:b,style:{...x,borderLeftColor:E,borderLeftWidth:4,...d?{opacity:0,transform:`${x?.transform||""} scale(0.97)`.trim(),transition:`opacity 0.35s ease-out, transform 0.35s ease-out${x?.transition?", "+x.transition:""}`}:o?{opacity:j?1:.3,transition:`opacity 1.2s ease-out${x?.transition?", "+x.transition:""}`}:{}},className:`group rounded-xl p-4 transition-all duration-200 border ${r?"ml-4 bg-gray-50 dark:bg-gray-900/40 border-gray-200 dark:border-gray-800/30":"bg-white dark:bg-gray-900/60"} ${C?"border-red-300 dark:border-red-500/20 opacity-50":S?"border-emerald-300 dark:border-emerald-500/20 opacity-70":"border-gray-200 dark:border-gray-800/50 hover:border-amber-400 dark:hover:border-amber-500/30 hover:shadow-lg dark:hover:shadow-[0_0_20px_rgba(245,158,11,0.08)]"} ${g?"shadow-2xl ring-2 ring-amber-400 scale-[1.02] rotate-1":""} ${h?"ring-2 ring-blue-400 bg-blue-50 dark:bg-blue-900/20":""} ${f||""}`,...p,children:[(0,k.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,k.jsxs)("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[!C&&!r&&(0,k.jsx)("div",{className:"opacity-40 group-hover:opacity-60 transition-opacity flex-shrink-0 cursor-grab active:cursor-grabbing p-1 -m-1 select-none",style:{touchAction:"none"},...m||{},children:(0,k.jsxs)("svg",{className:"w-4 h-4 text-gray-400 dark:text-gray-500",fill:"currentColor",viewBox:"0 0 24 24",children:[(0,k.jsx)("circle",{cx:"9",cy:"6",r:"1.5"}),(0,k.jsx)("circle",{cx:"15",cy:"6",r:"1.5"}),(0,k.jsx)("circle",{cx:"9",cy:"12",r:"1.5"}),(0,k.jsx)("circle",{cx:"15",cy:"12",r:"1.5"}),(0,k.jsx)("circle",{cx:"9",cy:"18",r:"1.5"}),(0,k.jsx)("circle",{cx:"15",cy:"18",r:"1.5"})]})}),S&&(0,k.jsx)("svg",{className:"w-4 h-4 text-emerald-500 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12.75l6 6 9-13.5"})}),(0,k.jsx)("h3",{className:`text-sm font-medium leading-snug cursor-pointer ${C||S?"text-gray-400 dark:text-gray-500 line-through":"text-gray-900 dark:text-gray-100"}`,onClick:()=>{T>0&&c?c():y(!v)},children:e.title})]}),(0,k.jsx)("div",{className:"flex items-center gap-1 flex-shrink-0 ml-2",children:C?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("button",{onClick:t=>{t.stopPropagation(),i?.(e.id)},className:"p-1.5 rounded-md hover:bg-emerald-50 dark:hover:bg-emerald-500/10 text-gray-400 dark:text-gray-500 hover:text-emerald-500 dark:hover:text-emerald-400 transition-colors",title:"Restore",children:(0,k.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 15L3 9m0 0l6-6M3 9h12a6 6 0 010 12h-3"})})}),(0,k.jsx)("button",{onClick:t=>{t.stopPropagation(),l(e.id)},className:"p-1.5 rounded-md hover:bg-red-50 dark:hover:bg-red-500/10 text-gray-400 dark:text-gray-500 hover:text-red-500 dark:hover:text-red-400 transition-colors",title:"Delete",children:(0,k.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})})})]}):(0,k.jsxs)(k.Fragment,{children:[!r&&s&&(0,k.jsx)("button",{onClick:t=>{t.stopPropagation(),s(e.id)},className:"p-1.5 rounded-md hover:bg-blue-50 dark:hover:bg-blue-500/10 text-gray-400 dark:text-gray-500 hover:text-blue-500 dark:hover:text-blue-400 transition-colors",title:"Add sub-task",children:(0,k.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})})}),(0,k.jsx)("button",{onClick:t=>{t.stopPropagation(),a(e)},className:"p-1.5 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800/80 text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",title:"Edit",children:(0,k.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931z"})})}),(0,k.jsx)("button",{onClick:t=>{t.stopPropagation(),n(e.id)},className:"p-1.5 rounded-md hover:bg-amber-50 dark:hover:bg-amber-500/10 text-gray-400 dark:text-gray-500 hover:text-amber-500 dark:hover:text-amber-400 transition-colors",title:"Archive",children:(0,k.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z"})})}),(0,k.jsx)("button",{onClick:t=>{t.stopPropagation(),l(e.id)},className:"p-1.5 rounded-md hover:bg-red-50 dark:hover:bg-red-500/10 text-gray-400 dark:text-gray-500 hover:text-red-500 dark:hover:text-red-400 transition-colors",title:"Delete",children:(0,k.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})})})]})})]}),(0,k.jsx)("p",{className:`text-xs text-gray-500 dark:text-gray-500 leading-relaxed mb-3 cursor-pointer ${v?"":"line-clamp-2"}`,onClick:()=>y(!v),children:e.description}),T>0&&(0,k.jsx)("div",{className:"mb-3",children:(0,k.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,k.jsx)("div",{className:"flex-1 bg-gray-200 dark:bg-gray-800 rounded-full h-1.5",children:(0,k.jsx)("div",{className:"bg-emerald-500 h-1.5 rounded-full transition-all",style:{width:`${Math.round(D/T*100)}%`}})}),(0,k.jsxs)("span",{className:"text-[10px] text-gray-400 dark:text-gray-500 font-medium",children:[D,"/",T]})]})}),(0,k.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[(0,k.jsxs)("div",{className:"flex items-center gap-2",children:[(0,k.jsxs)("span",{className:"flex items-center gap-1.5 text-xs text-gray-500 dark:text-gray-400",children:[(0,k.jsx)("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:e.agentColor}}),e.agent]}),(0,k.jsx)("span",{className:"px-2 py-0.5 bg-gray-100 dark:bg-gray-800/80 text-gray-500 dark:text-gray-400 text-[10px] rounded-full font-medium",children:e.project}),T>0&&(0,k.jsxs)("span",{className:"px-2 py-0.5 bg-blue-50 dark:bg-blue-500/10 text-blue-500 dark:text-blue-400 text-[10px] rounded-full font-medium border border-blue-200 dark:border-blue-500/20 cursor-pointer",onClick:e=>{e.stopPropagation(),c?.()},children:[T," sub-task",1!==T?"s":""," ",u?"▾":"▸"]})]}),(0,k.jsx)("span",{className:"text-[10px] text-gray-400 dark:text-gray-600",children:M(e.createdAt)})]})]})});var tz=e.i(93610);function tF({id:e,children:t}){let{setNodeRef:r,isOver:a}=tp({id:`column:${e}`});return(0,k.jsx)("div",{ref:r,className:`min-h-[100px] transition-colors rounded-lg ${a?"bg-amber-50/50 dark:bg-amber-500/5":""}`,children:t})}function tU({id:e,isActive:t}){let{setNodeRef:r,isOver:a}=tp({id:e}),n=a||t;return(0,k.jsx)("div",{ref:r,className:"relative transition-all duration-150",style:{height:n?8:6,marginTop:-2,marginBottom:-2},children:n&&(0,k.jsxs)("div",{className:"absolute inset-x-2 top-1/2 -translate-y-1/2 h-[3px] bg-amber-500 rounded-full shadow-[0_0_8px_rgba(245,158,11,0.5)]",children:[(0,k.jsx)("div",{className:"absolute -left-1 top-1/2 -translate-y-1/2 w-2.5 h-2.5 bg-amber-500 rounded-full"}),(0,k.jsx)("div",{className:"absolute -right-1 top-1/2 -translate-y-1/2 w-2.5 h-2.5 bg-amber-500 rounded-full"})]})})}function tH({task:e,subTasks:t,isExpanded:r,onToggleExpand:a,dropTargetId:n,...l}){let{attributes:i,listeners:s,setNodeRef:o,transform:d,transition:c,isDragging:u}=tP({id:e.id,data:{type:"task",task:e}}),g={transform:ea.Transform.toString(d),transition:c,opacity:u?.3:void 0};return(0,k.jsxs)("div",{children:[(0,k.jsx)(tW,{ref:o,style:g,task:e,subTasks:t,expanded:r,onToggleExpand:a,isDropTarget:n===e.id,dragHandleProps:{...i,...s},...l}),r&&t.map(e=>(0,k.jsx)(tY,{task:e,dropTargetId:n,...l},e.id))]})}function tY({task:e,dropTargetId:t,...r}){let{attributes:a,listeners:n,setNodeRef:l,transform:i,transition:s,isDragging:o}=tP({id:e.id,data:{type:"task",task:e}}),d={transform:ea.Transform.toString(i),transition:s,opacity:o?.3:void 0};return(0,k.jsx)(tW,{ref:l,style:d,task:e,isSubTask:!0,isDropTarget:t===e.id,dragHandleProps:{...a,...n},...r})}let tX="drag-preview";function tK({tasks:e,onEditTask:t,onArchiveTask:r,onDeleteTask:a,onRestoreTask:n,onMoveTask:l,onReorderTask:i,onAddSubTask:s,animateTaskIds:o,fadeOutIds:d}){let{toast:c,dismiss:u}=(0,tz.useToast)(),[g,h]=(0,w.useState)(new Set),[m,x]=(0,w.useState)(null),[f,p]=(0,w.useState)(null),[b,v]=(0,w.useState)(null),y=(0,w.useRef)(null),j=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,w.useMemo)(()=>[...t].filter(e=>null!=e),[...t])}(eh(eq,{activationConstraint:{distance:8}}),eh(eQ,{activationConstraint:{delay:300,tolerance:5}})),N=(0,w.useMemo)(()=>e.filter(e=>!e.parentId),[e]),C=(0,w.useMemo)(()=>{let t=new Map;return e.filter(e=>e.parentId).forEach(e=>{let r=t.get(e.parentId)||[];r.push(e),t.set(e.parentId,r)}),t},[e]),S=m?e.find(e=>e.id===m):null,E=(0,w.useCallback)(e=>{h(t=>{let r=new Set(t);return r.has(e)?r.delete(e):r.add(e),r})},[]),M=(0,w.useCallback)(e=>{x(e.active.id)},[]),D=(0,w.useCallback)(t=>{let{over:r,active:a}=t;if(!r){p(null),v(null),u(tX);return}let n=r.id,l=e.find(e=>e.id===a.id),i=null,s=!1;if(n.startsWith("gap:"))v(n),p(null),i=n.split(":")[1];else if(n.startsWith("column:"))p(null),v(null),i=n.replace("column:","");else{p(n),v(null);let t=e.find(e=>e.id===n);t&&!t.parentId&&(s=!0),i=t?.column||null}if(l&&i)if(s){let t=e.find(e=>e.id===n);c(`→ Sub-task of "${t?.title}"`,{type:"preview",id:tX})}else if(i!==l.column){let e;c(`→ ${(e=i,t$.find(t=>t.id===e)?.title||e)}`,{type:"preview",id:tX})}else u(tX)},[e,c,u]),T=(0,w.useCallback)(t=>{let{active:r,over:a}=t;if(x(null),p(null),v(null),u(tX),!a)return;let n=r.id,s=a.id,o=e.find(e=>e.id===n);if(o){if(s.startsWith("gap:")){let t=s.split(":"),r=t[1],a=parseInt(t[2]);if(o.parentId){let t=e.find(e=>e.id===o.parentId);if(t?.column==="suggested"&&"suggested"!==r)return}i&&i(n,r,a);return}if(l)if(s.startsWith("column:")){let t=s.replace("column:","");if(o.parentId){let r=e.find(e=>e.id===o.parentId);if(r?.column==="suggested"&&"suggested"!==t)return}o.column!==t&&l(n,t,o.parentId)}else{let t=e.find(e=>e.id===s);if(t&&n!==s){if(t.parentId||o.parentId===s)return;l(n,t.column,s)}}}},[l,i,e]),L=(0,w.useCallback)(()=>{x(null),p(null),v(null),u(tX)},[u]);return(0,k.jsxs)(th,{sensors:j,collisionDetection:eb,onDragStart:M,onDragOver:D,onDragEnd:T,onDragCancel:L,autoScroll:{enabled:!0,threshold:{x:.05,y:.15},interval:10,acceleration:5},children:[(0,k.jsx)("div",{ref:y,className:"flex gap-4 overflow-x-auto pb-4 lg:grid lg:grid-cols-6 lg:overflow-x-visible",children:t$.map(e=>{let l=N.filter(t=>t.column===e.id);return(0,k.jsxs)("div",{className:"flex-shrink-0 w-[85vw] sm:w-[70vw] lg:w-auto rounded-xl border border-gray-200 dark:border-gray-800/50 bg-gray-50/50 dark:bg-gray-950/30 p-3 flex flex-col",children:[(0,k.jsxs)("div",{className:"flex items-center gap-2 mb-3 px-1 sticky top-0 z-10 bg-gray-50/95 dark:bg-gray-950/95 backdrop-blur-sm py-2 -mt-1 rounded-lg",children:[(0,k.jsx)("span",{className:`w-2.5 h-2.5 rounded-full ${e.dotColor}`}),(0,k.jsx)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:e.title}),(0,k.jsx)("span",{className:"text-xs text-gray-400 dark:text-gray-600 ml-1",children:l.length})]}),(0,k.jsx)(tF,{id:e.id,children:0!==l.length||m?(0,k.jsxs)("div",{className:"space-y-1",children:[l.map((l,i)=>{let c=C.get(l.id)||[];return(0,k.jsxs)("div",{children:[m&&(0,k.jsx)(tU,{id:`gap:${e.id}:${i}`,isActive:b===`gap:${e.id}:${i}`}),(0,k.jsx)(tH,{task:l,subTasks:c,isExpanded:g.has(l.id),onToggleExpand:()=>E(l.id),dropTargetId:f,onEdit:t,onArchive:r,onDelete:a,onRestore:n,onAddSubTask:s,animateIn:o?.has(l.id)||!1,fadeOut:d?.has(l.id)||!1})]},l.id)}),m&&(0,k.jsx)(tU,{id:`gap:${e.id}:${l.length}`,isActive:b===`gap:${e.id}:${l.length}`})]}):(0,k.jsx)("div",{className:"border-2 border-dashed border-gray-200 dark:border-gray-800/30 rounded-xl p-6 text-center",children:(0,k.jsx)("p",{className:"text-xs text-gray-400 dark:text-gray-600",children:"No tasks"})})})]},e.id)})}),(0,k.jsx)(tS,{children:S?(0,k.jsx)(tW,{task:S,subTasks:C.get(S.id)||[],isDragOverlay:!0,onEdit:()=>{},onArchive:()=>{},onDelete:()=>{}}):null})]})}let tV={Ezra:"bg-amber-400"};function tJ({activities:e}){return(0,k.jsxs)("div",{className:"bg-white dark:bg-gray-900/40 backdrop-blur-sm border border-gray-200 dark:border-gray-800/50 rounded-xl p-4",children:[(0,k.jsxs)("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-4 flex items-center gap-2",children:[(0,k.jsx)("span",{className:"w-2 h-2 rounded-full bg-emerald-400 animate-pulse"}),"Activity"]}),(0,k.jsxs)("div",{className:"space-y-4",children:[e.map(e=>(0,k.jsxs)("div",{className:"flex gap-3",children:[(0,k.jsxs)("div",{className:"flex flex-col items-center",children:[(0,k.jsx)("div",{className:`w-2 h-2 rounded-full mt-1.5 flex-shrink-0 ${tV[e.agent]||"bg-gray-400 dark:bg-gray-700"}`}),(0,k.jsx)("div",{className:"w-px flex-1 bg-gray-200 dark:bg-gray-800/50"})]}),(0,k.jsxs)("div",{className:"pb-4",children:[(0,k.jsx)("p",{className:"text-[10px] text-amber-500 dark:text-amber-400/70 font-medium mb-0.5",children:e.agent}),(0,k.jsx)("p",{className:"text-xs text-gray-700 dark:text-gray-300 leading-relaxed",children:e.message}),(0,k.jsx)("p",{className:"text-[10px] text-gray-400 dark:text-gray-600 mt-1",children:M(e.timestamp)})]})]},e.id)),0===e.length&&(0,k.jsx)("p",{className:"text-xs text-gray-400 dark:text-gray-600 text-center py-4",children:"No activity yet"})]})]})}function t_({isOpen:e,onClose:t,onSave:r,editingTask:a,projects:n,tasks:l,preselectedParentId:i}){let[s,o]=(0,w.useState)(""),[d,c]=(0,w.useState)(""),[u,g]=(0,w.useState)("backlog"),[h,m]=(0,w.useState)("Ezra"),[x,f]=(0,w.useState)(""),[p,b]=(0,w.useState)(""),[v,y]=(0,w.useState)(!1),[j,N]=(0,w.useState)(null);if((0,w.useEffect)(()=>{if(a)o(a.title),c(a.description),g(a.column),m(a.agent),f(a.project),b(a.parentId||"");else{o(""),c("");let e=i?l.find(e=>e.id===i):null;g(e?e.column:"backlog"),m("Ezra"),f(e?e.project:n[0]?.id||""),b(i||"")}N(null),y(!1)},[a,e,n]),!e)return null;let C=l.filter(e=>!e.parentId&&e.id!==a?.id),S=!!p,E=p?l.find(e=>e.id===p):null,M=async e=>{if(e.preventDefault(),s.trim()){y(!0),N(null);try{await r({title:s,description:d,column:u,agent:h,agentColor:"#f59e0b",project:x||n[0]?.id||"",parentId:p||null}),t()}catch(e){N(e instanceof Error?e.message:"Failed to save task")}finally{y(!1)}}},D="w-full bg-gray-100 dark:bg-gray-800/60 border border-gray-300 dark:border-gray-700/50 text-gray-900 dark:text-gray-200 text-sm rounded-lg px-3 py-2.5 focus:outline-none focus:border-amber-500/50 transition-colors min-h-[44px]";return(0,k.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,k.jsx)("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:v?void 0:t}),(0,k.jsx)("div",{className:"relative bg-white dark:bg-gray-900/95 backdrop-blur-xl border border-gray-200 dark:border-gray-800/50 rounded-2xl w-full max-w-lg shadow-2xl",children:(0,k.jsxs)("div",{className:"p-6",children:[(0,k.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-6",children:a?"Edit Task":"New Task"}),j&&(0,k.jsx)("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-500/10 border border-red-200 dark:border-red-500/20 rounded-lg text-sm text-red-600 dark:text-red-400",children:j}),(0,k.jsxs)("form",{onSubmit:M,className:"space-y-4",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-xs text-gray-500 mb-1.5",children:"Title"}),(0,k.jsx)("input",{type:"text",value:s,onChange:e=>o(e.target.value),className:D,placeholder:"What needs to be done?",autoFocus:!0,disabled:v})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-xs text-gray-500 mb-1.5",children:"Description"}),(0,k.jsx)("textarea",{value:d,onChange:e=>c(e.target.value),className:`${D} min-h-[88px] resize-none`,placeholder:"Add details...",rows:3,disabled:v})]}),(0,k.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-xs text-gray-500 mb-1.5",children:"Column"}),(0,k.jsx)("select",{value:u,onChange:e=>g(e.target.value),className:D,disabled:v,children:t$.filter(e=>"archived"!==e.id&&(!S||E?.column!=="suggested"||"suggested"===e.id)).map(e=>(0,k.jsx)("option",{value:e.id,children:e.title},e.id))})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-xs text-gray-500 mb-1.5",children:"Project"}),(0,k.jsx)("select",{value:x,onChange:e=>f(e.target.value),className:D,disabled:v,children:n.map(e=>(0,k.jsx)("option",{value:e.id,children:e.name},e.id))})]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-xs text-gray-500 mb-1.5",children:"Parent task (optional)"}),(0,k.jsxs)("select",{value:p,onChange:e=>b(e.target.value),className:D,disabled:v,children:[(0,k.jsx)("option",{value:"",children:"None (top-level task)"}),C.map(e=>(0,k.jsx)("option",{value:e.id,children:e.title},e.id))]})]}),(0,k.jsxs)("div",{className:"flex justify-end gap-3 pt-2",children:[(0,k.jsx)("button",{type:"button",onClick:t,disabled:v,className:"px-4 py-2 text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 transition-colors min-h-[44px] disabled:opacity-50",children:"Cancel"}),(0,k.jsxs)("button",{type:"submit",disabled:v,className:"px-5 py-2 bg-amber-500 hover:bg-amber-400 text-gray-950 font-semibold text-sm rounded-lg transition-colors min-h-[44px] disabled:opacity-70 flex items-center gap-2",children:[v&&(0,k.jsxs)("svg",{className:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[(0,k.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,k.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),a?"Save Changes":"Create Task"]})]})]})]})})]})}let tq=["#f59e0b","#3b82f6","#10b981","#8b5cf6","#6366f1","#ec4899","#ef4444","#14b8a6","#f97316","#84cc16"],tG=[{value:"active",label:"Active"},{value:"suggested",label:"Suggested"},{value:"completed",label:"Completed"},{value:"archived",label:"Archived"}];function tQ({isOpen:e,onClose:t,onSave:r,editingProject:a}){let[n,l]=(0,w.useState)(""),[i,s]=(0,w.useState)(""),[o,d]=(0,w.useState)(tq[0]),[c,u]=(0,w.useState)("active");return((0,w.useEffect)(()=>{a?(l(a.name),s(a.description),d(a.color),u(a.status||"active")):(l(""),s(""),d(tq[Math.floor(Math.random()*tq.length)]),u("active"))},[a,e]),e)?(0,k.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,k.jsx)("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:t}),(0,k.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n.trim()&&(r({name:n.trim(),description:i.trim(),color:o,status:c}),t())},className:"relative bg-white dark:bg-gray-900 rounded-2xl border border-gray-200 dark:border-gray-800/50 shadow-xl w-full max-w-md p-6 space-y-4",children:[(0,k.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:a?"Edit Project":"New Project"}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Name"}),(0,k.jsx)("input",{type:"text",value:n,onChange:e=>l(e.target.value),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-800/60 border border-gray-200 dark:border-gray-700 rounded-lg text-sm text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-amber-500/50",placeholder:"Project name",autoFocus:!0})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Description"}),(0,k.jsx)("textarea",{value:i,onChange:e=>s(e.target.value),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-800/60 border border-gray-200 dark:border-gray-700 rounded-lg text-sm text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-amber-500/50 resize-none",rows:2,placeholder:"Brief description"})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-2",children:"Color"}),(0,k.jsx)("div",{className:"flex gap-2 flex-wrap",children:tq.map(e=>(0,k.jsx)("button",{type:"button",onClick:()=>d(e),className:`w-7 h-7 rounded-full transition-all ${o===e?"ring-2 ring-offset-2 ring-amber-500 dark:ring-offset-gray-900 scale-110":"hover:scale-110"}`,style:{backgroundColor:e}},e))})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Status"}),(0,k.jsx)("select",{value:c,onChange:e=>u(e.target.value),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-800/60 border border-gray-200 dark:border-gray-700 rounded-lg text-sm text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-amber-500/50",children:tG.map(e=>(0,k.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,k.jsxs)("div",{className:"flex justify-end gap-3 pt-2",children:[(0,k.jsx)("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors",children:"Cancel"}),(0,k.jsx)("button",{type:"submit",className:"px-4 py-2 bg-amber-500 hover:bg-amber-600 text-white text-sm font-medium rounded-lg transition-colors",children:a?"Save":"Create"})]})]})]}):null}let tZ=[{status:"active",label:"Active Projects",icon:"🚀",emptyText:"No active projects"},{status:"suggested",label:"Suggested",icon:"💡",emptyText:"No suggested projects"},{status:"completed",label:"Completed",icon:"✅",emptyText:"No completed projects"},{status:"archived",label:"Archived",icon:"📦",emptyText:"No archived projects"}];function t0({projects:e,tasks:t,onEditTask:r,onArchiveTask:a,onDeleteTask:n,onRestoreTask:l,onMoveTask:i,onReorderTask:s,onAddSubTask:o,animateTaskIds:d,fadeOutIds:c,onNewProject:u,onEditProject:g,onUpdateProjectStatus:h}){let[m,x]=(0,w.useState)(null),[f,p]=(0,w.useState)(new Set(["completed","archived"]));if(m){let u=e.find(e=>e.id===m),h=t.filter(e=>e.project===m);return(0,k.jsxs)("div",{className:"space-y-4",children:[(0,k.jsxs)("button",{onClick:()=>x(null),className:"flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 transition-colors min-h-[44px]",children:[(0,k.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})}),"Back to projects"]}),(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[(0,k.jsx)("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:u?.color}}),u?.name,u?.status&&(0,k.jsx)("span",{className:"text-xs font-normal px-2 py-0.5 rounded-full bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400",children:u.status})]}),u&&g&&(0,k.jsx)("button",{onClick:()=>g(u),className:"text-xs text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:"Edit project"})]}),(0,k.jsx)(tK,{tasks:h,onEditTask:r,onArchiveTask:a,onDeleteTask:n,onRestoreTask:l,onMoveTask:i,onReorderTask:s,onAddSubTask:o,animateTaskIds:d,fadeOutIds:c})]})}return(0,k.jsxs)("div",{className:"space-y-6",children:[(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Projects"}),u&&(0,k.jsxs)("button",{onClick:u,className:"flex items-center gap-2 px-4 py-2 bg-amber-500 hover:bg-amber-600 text-white text-sm font-medium rounded-lg transition-colors",children:[(0,k.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),"New Project"]})]}),tZ.map(({status:r,label:a,icon:n,emptyText:l})=>{let i=e.filter(e=>(e.status||"active")===r),s=f.has(r);return(0,k.jsxs)("div",{children:[(0,k.jsxs)("button",{onClick:()=>{p(e=>{let t=new Set(e);return t.has(r)?t.delete(r):t.add(r),t})},className:"flex items-center gap-2 mb-3 text-sm font-medium text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200 transition-colors",children:[(0,k.jsx)("span",{children:n}),(0,k.jsx)("span",{children:a}),(0,k.jsxs)("span",{className:"text-xs text-gray-400 dark:text-gray-600",children:["(",i.length,")"]}),(0,k.jsx)("svg",{className:`w-3.5 h-3.5 transition-transform ${s?"":"rotate-180"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})})]}),!s&&(i.length>0?(0,k.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:i.map(e=>{let a=t.filter(t=>t.project===e.id).filter(e=>"archived"!==e.column),n=a.filter(e=>"backlog"===e.column).length,l=a.filter(e=>"in-progress"===e.column||"review"===e.column).length,i=a.filter(e=>"done"===e.column).length,s=a.length,o=s>0?Math.round(i/s*100):0;return(0,k.jsxs)("div",{className:"relative text-left bg-white dark:bg-gray-900/60 border border-gray-200 dark:border-gray-800/50 rounded-xl p-5 hover:border-amber-400 dark:hover:border-amber-500/30 hover:shadow-lg transition-all duration-200",style:{borderLeftColor:e.color,borderLeftWidth:4},children:[(0,k.jsxs)("button",{onClick:()=>x(e.id),className:"block w-full text-left",children:[(0,k.jsx)("h3",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 mb-1",children:e.name}),(0,k.jsx)("p",{className:"text-xs text-gray-500 mb-4 line-clamp-2",children:e.description}),(0,k.jsxs)("div",{className:"flex items-center gap-3 text-[11px]",children:[(0,k.jsxs)("span",{className:"text-gray-400",children:[n," backlog"]}),(0,k.jsxs)("span",{className:"text-blue-500 dark:text-blue-400",children:[l," active"]}),(0,k.jsxs)("span",{className:"text-emerald-500 dark:text-emerald-400",children:[i," done"]})]}),(0,k.jsx)("div",{className:"mt-3 w-full bg-gray-200 dark:bg-gray-800 rounded-full h-1.5",children:(0,k.jsx)("div",{className:"bg-emerald-500 h-1.5 rounded-full transition-all",style:{width:`${o}%`}})}),(0,k.jsxs)("p",{className:"text-[10px] text-gray-400 dark:text-gray-600 mt-1",children:[o,"% complete · ",s," tasks"]})]}),h&&(0,k.jsxs)("div",{className:"absolute top-3 right-3 flex items-center gap-1",children:["active"!==r&&(0,k.jsx)("button",{onClick:()=>h(e.id,"active"),className:"p-1 rounded text-[10px] text-gray-400 hover:text-emerald-500 hover:bg-emerald-50 dark:hover:bg-emerald-500/10 transition-colors",title:"Activate",children:"🚀"}),"completed"!==r&&(0,k.jsx)("button",{onClick:()=>h(e.id,"completed"),className:"p-1 rounded text-[10px] text-gray-400 hover:text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-500/10 transition-colors",title:"Complete",children:"✅"}),"archived"!==r&&(0,k.jsx)("button",{onClick:()=>h(e.id,"archived"),className:"p-1 rounded text-[10px] text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-500/10 transition-colors",title:"Archive",children:"📦"})]})]},e.id)})}):(0,k.jsx)("p",{className:"text-xs text-gray-400 dark:text-gray-600 pl-6",children:l}))]},r)})]})}function t1(){let[e,t]=(0,w.useState)([]),[r,a]=(0,w.useState)({});(0,w.useEffect)(()=>{Promise.resolve([{id:"morning-brief",name:"Morning Brief",description:"Daily briefing at 9am ET",schedule:"0 14 * * *",enabled:!0,lastRun:null,status:"active",nextRun:"",type:"cron"},{id:"work-sprint",name:"Work Sprint",description:"4x daily autonomous work sessions",schedule:"0 15,18,21,0 * * *",enabled:!0,lastRun:null,status:"active",nextRun:"",type:"cron"},{id:"idea-generator",name:"Idea Generator",description:"M/W/F business ideas",schedule:"0 16 * * 1,3,5",enabled:!0,lastRun:null,status:"active",nextRun:"",type:"cron"},{id:"health-check",name:"System Health Check",description:"Every 30min infra check",schedule:"*/30 * * * *",enabled:!0,lastRun:null,status:"active",nextRun:"",type:"cron"},{id:"eod-report",name:"EOD Report",description:"End of day summary",schedule:"0 23 * * 1-5",enabled:!0,lastRun:null,status:"active",nextRun:"",type:"cron"}]).then(e=>{t(e);let r={};e.forEach(e=>{r[e.id]="active"===e.status}),a(r)})},[]);let n=e.length,l=Object.values(r).filter(Boolean).length,i=e.filter(e=>"cron"===e.type).length,s=e.filter(e=>"heartbeat"===e.type).length;return(0,k.jsxs)("div",{className:"space-y-6",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Automations"}),(0,k.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Crons, heartbeats, and scheduled workflows"})]}),(0,k.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[{label:"Total",value:n,color:"text-gray-900 dark:text-gray-100"},{label:"Active",value:l,color:"text-emerald-500 dark:text-emerald-400"},{label:"Cron Jobs",value:i,color:"text-blue-500 dark:text-blue-400"},{label:"Heartbeats",value:s,color:"text-amber-500 dark:text-amber-400"}].map(e=>(0,k.jsxs)("div",{className:"bg-white dark:bg-gray-900/40 backdrop-blur-sm border border-gray-200 dark:border-gray-800/50 rounded-xl p-4",children:[(0,k.jsx)("div",{className:`text-2xl font-bold ${e.color}`,children:e.value}),(0,k.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:e.label})]},e.label))}),(0,k.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:e.map(e=>{let t=r[e.id]??!0;return(0,k.jsxs)("div",{className:"group bg-white dark:bg-gray-900/40 backdrop-blur-sm border border-gray-200 dark:border-gray-800/50 rounded-xl p-5 transition-all duration-200 hover:border-gray-300 dark:hover:border-gray-700/60 hover:shadow-lg dark:hover:shadow-amber-500/5",children:[(0,k.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,k.jsxs)("div",{className:"flex items-center gap-2.5 min-w-0",children:[(0,k.jsx)("span",{className:"relative flex h-2.5 w-2.5 flex-shrink-0",children:t?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"}),(0,k.jsx)("span",{className:"relative inline-flex rounded-full h-2.5 w-2.5 bg-emerald-500"})]}):(0,k.jsx)("span",{className:"relative inline-flex rounded-full h-2.5 w-2.5 bg-gray-400 dark:bg-gray-600"})}),(0,k.jsx)("h3",{className:"font-semibold text-sm text-gray-900 dark:text-gray-100 truncate",children:e.name})]}),(0,k.jsx)("span",{className:`flex-shrink-0 text-[10px] font-medium px-2 py-0.5 rounded-full ${"cron"===e.type?"bg-blue-50 dark:bg-blue-500/15 text-blue-500 dark:text-blue-400 border border-blue-200 dark:border-blue-500/20":"bg-amber-50 dark:bg-amber-500/15 text-amber-500 dark:text-amber-400 border border-amber-200 dark:border-amber-500/20"}`,children:e.type})]}),(0,k.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 line-clamp-2 mb-3 leading-relaxed",children:e.description}),(0,k.jsx)("div",{className:"text-[11px] font-mono text-gray-500 mb-1",children:e.schedule}),(0,k.jsxs)("div",{className:"text-[11px] text-gray-400 dark:text-gray-600 mb-4",children:["Next: ",e.nextRun]}),(0,k.jsxs)("div",{className:"flex items-center justify-between pt-3 border-t border-gray-200 dark:border-gray-800/40",children:[(0,k.jsx)("span",{className:"text-[11px] text-gray-500",children:t?"Enabled":"Disabled"}),(0,k.jsx)("button",{onClick:()=>a(t=>({...t,[e.id]:!t[e.id]})),className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors duration-200 ${t?"bg-emerald-500/80":"bg-gray-300 dark:bg-gray-700"}`,children:(0,k.jsx)("span",{className:`inline-block h-3.5 w-3.5 rounded-full bg-white transition-transform duration-200 ${t?"translate-x-[18px]":"translate-x-[3px]"}`})})]})]},e.id)})})]})}let t2=["tasks","projects","automations","team"];function t5(){let e=window.location.hash.replace("#","");return t2.includes(e)?e:"tasks"}let t4=e=>t$.find(t=>t.id===e)?.title||e;function t3(){let{toast:e}=(0,tz.useToast)(),[t,r]=(0,w.useState)("tasks"),[a,n]=(0,w.useState)(!1),[l,i]=(0,w.useState)([]),[s,o]=(0,w.useState)([]),[d,c]=(0,w.useState)([]),[u,g]=(0,w.useState)(!1),[h,m]=(0,w.useState)(null),[x,f]=(0,w.useState)(null),[p,b]=(0,w.useState)(null),[v,y]=(0,w.useState)(null),[M,D]=(0,w.useState)(!1),[L,O]=(0,w.useState)(null),[P,$]=(0,w.useState)(new Set),[B,W]=(0,w.useState)(new Set),z=(0,w.useCallback)((...e)=>{$(new Set(e)),setTimeout(()=>$(new Set),1500)},[]),F=(0,w.useCallback)(e=>new Promise(t=>{W(new Set(e)),setTimeout(()=>{W(new Set),t()},400)}),[]);(0,w.useEffect)(()=>{r(t5());let e=()=>r(t5());return window.addEventListener("hashchange",e),()=>window.removeEventListener("hashchange",e)},[]);let U=(0,w.useCallback)(e=>{window.location.hash=e},[]),H=(0,w.useCallback)(async()=>{try{let[e,t,r]=await Promise.all([j("/api/tasks"),j("/api/projects"),j("/api/activities")]);i(e),o(t),c(r)}catch(e){console.error("Failed to load data:",e)}},[]);(0,w.useEffect)(()=>{H()},[H]);let Y=l.filter(e=>(!p||e.agent===p)&&(!v||e.project===v)),X=(0,w.useCallback)(()=>{m(null),f(null),g(!0)},[]),K=(0,w.useCallback)(e=>{m(null),f(e),g(!0)},[]),V=(0,w.useCallback)(e=>{m(e),g(!0)},[]),J=(0,w.useCallback)(async t=>{try{let r=l.find(e=>e.id===t);if(!r)return;let a="archived"!==r.column?r.column:"backlog",n=l.filter(e=>e.column===r.column&&!e.parentId).findIndex(e=>e.id===t),i=l.filter(e=>e.parentId===t).map(e=>e.id);for(let e of(await F([t,...i]),await C(t,{column:"archived",previousColumn:a,previousIndex:n>=0?n:null}),l.filter(e=>e.parentId===t))){let t="archived"!==e.column?e.column:"backlog";await C(e.id,{column:"archived",previousColumn:t})}await H(),e("Archived",{type:"warning",action:{label:"Undo",onClick:async()=>{try{await C(t,{column:a,previousColumn:null,previousIndex:null}),n>=0&&await S(t,a,n);let r=await j("/api/tasks"),l=[];for(let e of r.filter(e=>e.parentId===t&&"archived"===e.column))await C(e.id,{column:e.previousColumn||a,previousColumn:null}),l.push(e.id);await H(),z(t,...l),e("Restored",{type:"success"})}catch{e("Failed",{type:"error"})}}}})}catch(e){console.error("Failed to archive task:",e)}},[H,l,e]),_=(0,w.useCallback)(async t=>{try{let r=l.find(e=>e.id===t);if(!r)return;let a=[...l.filter(e=>e.parentId===t)],n=l.filter(e=>e.column===r.column&&!e.parentId).findIndex(e=>e.id===t);await F([t,...a.map(e=>e.id)]),await j(`/api/tasks/?id=${t}`,{method:"DELETE"}),await H(),e("Deleted",{type:"error",durationMs:8e3,action:{label:"Undo",onClick:async()=>{try{let t=await N({title:r.title,description:r.description,column:r.column,agent:r.agent,agentColor:r.agentColor,project:r.project,parentId:r.parentId});n>=0&&await S(t.id,r.column,n);let l=[t.id];for(let e of a){let r=await N({title:e.title,description:e.description,column:e.column,agent:e.agent,agentColor:e.agentColor,project:e.project,parentId:t.id});l.push(r.id)}await H(),z(...l),e("Restored",{type:"success"})}catch{e("Restore failed",{type:"error"})}}}})}catch(e){console.error("Failed to delete task:",e)}},[H,l,e]),q=(0,w.useCallback)(async t=>{try{let r=await j("/api/tasks"),a=r.find(e=>e.id===t);if(!a)return;let n=a.previousColumn||"backlog",l=a.previousIndex;await C(t,{column:n,previousColumn:null,previousIndex:null}),null!=l&&l>=0&&await S(t,n,l);let i=r.filter(e=>e.parentId===t&&"archived"===e.column),s=[];for(let e of i){let t=e.previousColumn||n;await C(e.id,{column:t,previousColumn:null,previousIndex:null}),s.push(e.id)}await H(),z(t,...s),e(`Restored → ${t4(n)}`,{type:"success"})}catch(e){console.error("Failed to restore task:",e)}},[H,e]),[G,Q]=(0,w.useState)(!1),Z=(0,w.useCallback)(async(t,r,a)=>{try{let n,i=["suggested","backlog","in-progress","review","done","archived"],s=l.find(e=>e.id===t);if(!s)return;let o={column:r};void 0!==a&&(o.parentId=a);let d=i.indexOf(r)>(n=s.column,i.indexOf(n));if(s.parentId){let n=l.find(e=>e.id===s.parentId);if(n&&"suggested"===n.column&&"suggested"!==r)return;if(a&&a!==s.parentId){let e=l.find(e=>e.id===a);e&&(o.column=e.column)}let i=s.column,d=o.column||r;if(await C(t,o),a&&a!==s.parentId?(l.find(e=>e.id===a),e("Added as sub-task",{type:"info"})):i!==d&&e(`Moved → ${t4(d)}`,{type:"info"}),"done"===r&&s.parentId){let r=l.filter(e=>e.parentId===s.parentId&&e.id!==t).every(e=>"done"===e.column),a=l.find(e=>e.id===s.parentId);r&&a&&"done"!==a.column&&confirm(`All sub-tasks are now done. Mark "${a.title}" as done too?`)&&(await C(a.id,{column:"done"}),e(`Parent completed ✓`,{type:"success"}))}await H(),z(t);return}let c=l.filter(e=>e.parentId===t);if("archived"===r){if(c.length>0&&!confirm(`This will also archive ${c.length} sub-task${c.length>1?"s":""}. Continue?`))return;for(let e of(await C(t,o),c))await C(e.id,{column:"archived"})}else if(d){if("done"===r&&c.length>0){let e=c.filter(e=>"done"!==e.column);if(e.length>0){if(!confirm(`${e.length} sub-task${e.length>1?"s are":" is"} not done yet. Mark all as done?`))return;for(let t of e)await C(t.id,{column:"done"})}}else for(let e of c.filter(e=>{let t;return t=e.column,i.indexOf(t)<i.indexOf(r)&&"done"!==e.column}))await C(e.id,{column:r});await C(t,o)}else{let e=c.filter(e=>{let t;return t=e.column,i.indexOf(t)>i.indexOf(r)});if(e.length>0){let t=t4(r);if(!confirm(`Moving backward will also move ${e.length} sub-task${e.length>1?"s":""} back to "${t}". Continue?`))return;for(let t of e)await C(t.id,{column:r})}await C(t,o)}s.column!==r&&e(`Moved → ${t4(r)}`,{type:"done"===r?"success":"info"}),await H(),s.column!==r&&z(t)}catch(e){console.error("Failed to move task:",e)}},[H,l,e]),ee=(0,w.useCallback)(async(t,r,a)=>{try{let n=l.find(e=>e.id===t);await S(t,r,a),await H(),z(t),n&&n.column!==r&&e(`Moved → ${t4(r)}`,{type:"info"})}catch(e){console.error("Failed to reorder task:",e)}},[H,l,e]),et=(0,w.useCallback)(()=>{O(null),D(!0)},[]),er=(0,w.useCallback)(e=>{O(e),D(!0)},[]),ea=(0,w.useCallback)(async e=>{try{if(L)await E(L.id,e);else await j("/api/projects",{method:"POST",body:JSON.stringify(e)});await H()}catch(e){console.error("Failed to save project:",e)}},[L,H]),en=(0,w.useCallback)(async(e,t)=>{try{await E(e,{status:t}),await H()}catch(e){console.error("Failed to update project status:",e)}},[H]),el=(0,w.useCallback)(async e=>{h?await C(h.id,e):await N(e),await H()},[h,H]);return(0,k.jsxs)("div",{className:"flex h-screen overflow-hidden",children:[(0,k.jsx)(T,{activeTab:t,onTabChange:U}),a&&(0,k.jsxs)("div",{className:"fixed inset-0 z-40 md:hidden",children:[(0,k.jsx)("div",{className:"absolute inset-0 bg-black/50",onClick:()=>n(!1)}),(0,k.jsxs)("aside",{className:"absolute left-0 top-0 bottom-0 w-64 bg-white/95 dark:bg-gray-900/95 backdrop-blur-xl border-r border-gray-200 dark:border-gray-800/50 z-50",children:[(0,k.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-800/50",children:[(0,k.jsxs)("div",{className:"flex items-center gap-2",children:[(0,k.jsx)("span",{className:"text-lg",children:"⚡"}),(0,k.jsx)("span",{className:"font-semibold text-sm text-gray-900 dark:text-gray-100",children:"Mission Control"})]}),(0,k.jsx)("button",{onClick:()=>n(!1),className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800/60 text-gray-500 dark:text-gray-400 min-w-[44px] min-h-[44px] flex items-center justify-center",children:(0,k.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),(0,k.jsx)("nav",{className:"p-3 space-y-1",children:[{id:"tasks",label:"Tasks"},{id:"projects",label:"Projects"},{id:"automations",label:"Automations"},{id:"team",label:"Team"}].map(e=>(0,k.jsx)("a",{href:`#${e.id}`,onClick:t=>{t.preventDefault(),U(e.id),n(!1)},className:`block w-full text-left px-4 py-3 rounded-lg text-sm font-medium transition-all min-h-[44px] ${t===e.id?"bg-amber-500/10 text-amber-500 dark:text-amber-400 border border-amber-500/20":"text-gray-500 dark:text-gray-300 hover:text-gray-700 dark:hover:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-800/40"}`,children:e.label},e.id))})]})]}),(0,k.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,k.jsx)(R,{onMenuToggle:()=>n(!0)}),"tasks"===t?(0,k.jsxs)("main",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,k.jsxs)("div",{className:"flex flex-col lg:flex-row flex-1 min-h-0",children:[(0,k.jsxs)("div",{className:"flex-1 p-4 md:p-6 space-y-5 overflow-y-auto",children:[(0,k.jsx)(I,{tasks:l}),(0,k.jsx)(A,{selectedAgent:p,selectedProject:v,onAgentChange:b,onProjectChange:y,onNewTask:X,projects:s,tasks:l}),(0,k.jsx)(tK,{tasks:Y,onEditTask:V,onArchiveTask:J,onDeleteTask:_,onRestoreTask:q,onMoveTask:Z,onReorderTask:ee,onAddSubTask:K,animateTaskIds:P,fadeOutIds:B})]}),(0,k.jsx)("div",{className:"hidden lg:block w-72 xl:w-80 flex-shrink-0 p-6 pl-0",children:(0,k.jsx)(tJ,{activities:d})})]}),(0,k.jsxs)("div",{className:"lg:hidden border-t border-gray-200 dark:border-gray-800/50 flex-shrink-0",children:[(0,k.jsxs)("button",{onClick:()=>Q(!G),className:"w-full flex items-center justify-between px-4 py-2 text-xs font-medium text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 transition-colors",children:[(0,k.jsxs)("span",{className:"flex items-center gap-2",children:[(0,k.jsx)("span",{className:"w-2 h-2 rounded-full bg-emerald-400 animate-pulse"}),"Activity (",d.length,")"]}),(0,k.jsx)("svg",{className:`w-4 h-4 transition-transform ${G?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 15.75l7.5-7.5 7.5 7.5"})})]}),G&&(0,k.jsx)("div",{className:"max-h-[150px] overflow-y-auto px-4 pb-3",children:(0,k.jsx)(tJ,{activities:d})})]})]}):"projects"===t?(0,k.jsx)("main",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:(0,k.jsx)(t0,{projects:s,tasks:l,onEditTask:V,onArchiveTask:J,onDeleteTask:_,onRestoreTask:q,onMoveTask:Z,onReorderTask:ee,onAddSubTask:K,animateTaskIds:P,fadeOutIds:B,onNewProject:et,onEditProject:er,onUpdateProjectStatus:en})}):"automations"===t?(0,k.jsx)("main",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:(0,k.jsx)(t1,{})}):(0,k.jsx)("main",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:(0,k.jsxs)("div",{className:"bg-white dark:bg-gray-900/40 backdrop-blur-sm border border-gray-200 dark:border-gray-800/50 rounded-xl p-8 text-center",children:[(0,k.jsx)("div",{className:"text-4xl mb-4",children:"🤖"}),(0,k.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-200 mb-2",children:"Team"}),(0,k.jsx)("p",{className:"text-sm text-gray-500 max-w-md mx-auto",children:"Your AI sub-agents and team members will appear here. This view is coming soon as your agent team grows."})]})})]}),(0,k.jsx)(t_,{isOpen:u,onClose:()=>{g(!1),m(null),f(null)},onSave:el,editingTask:h,projects:s,tasks:l,preselectedParentId:x}),(0,k.jsx)(tQ,{isOpen:M,onClose:()=>{D(!1),O(null)},onSave:ea,editingProject:L})]})}e.s(["default",()=>t3],31713)}]);